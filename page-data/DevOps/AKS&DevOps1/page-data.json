{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/DevOps/AKS&DevOps1/",
    "result": {"data":{"cur":{"id":"620d7676-a502-56cb-8aa7-582cd297be3b","html":"<h2 id=\"-1-aks-소개\" style=\"position:relative;\"><a href=\"#-1-aks-%EC%86%8C%EA%B0%9C\" aria-label=\" 1 aks 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 1. AKS 소개</h2>\n<p>AKS(AzureK Kubernetes Service)는 Azure 에서 제공하는 컨테이너 기반 인프라 운영 서비스입니다. Master 서버를 Azure 에서 관리해 주기에\r\n인프라 관리 부담은 줄어들고 Azure 리소스와의 뛰어난 호환성을 가지고 있습니다. 또한 Azure CNI(Container Network Interface) 를 활용하여\r\nAKS에서 생성된 Pod와 Azure VNet 상의 리소스를 직접 통신시킬 수 있습니다.  🙌</p>\n<blockquote>\n<p>혹시 만드시는 과정에서 궁금하신 점이나 어려움이 있으시다면 <a href=\"https://github.com/zoomKoding/zoomkoding-gatsby-blog/issues/new\">이슈</a>를 통해 문의 남겨주세요!<br>\n<a href=\"https://github.com/zoomKoding/zoomkoding.com\">스타</a>는 블로그 테마를 지속적으로 발전시키는데 큰 힘이 됩니다!⭐️</p>\n</blockquote>\n<h2 id=\"-시작하기\" style=\"position:relative;\"><a href=\"#-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\" 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚀 시작하기</h2>\n<ol>\n<li>Azure Portal에 로그인하여 상단의 검색바에서 Kubernetes &#x26; AKS 를 검색합니다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAAAk0lEQVQY06WL0QrDMAhF+/8fWhgkaZIuVa81jjaQhzHYQw8iHPEs7m52bqVuDU10zE5ogsbaWEvjSuLuOWcRuHvvfehyx5ZSKaUSHRCBsEIgJ67XPr9jDFsluw+3xhGf6xpTyu29Ky5UwYzjoJGNHUIQkakppStW1VeIxGJm/osZM/N33M0AdP8DEQGYCmDxBzyKPz8WnM6EbX53AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_1.png\"\n        title=\"AKS_1.png\"\n        src=\"/static/f6936d9bb60df2547a0c7a3a8352dd52/37523/AKS_1.png\"\n        srcset=\"/static/f6936d9bb60df2547a0c7a3a8352dd52/e9ff0/AKS_1.png 180w,\n/static/f6936d9bb60df2547a0c7a3a8352dd52/f21e7/AKS_1.png 360w,\n/static/f6936d9bb60df2547a0c7a3a8352dd52/37523/AKS_1.png 720w,\n/static/f6936d9bb60df2547a0c7a3a8352dd52/302a4/AKS_1.png 1080w,\n/static/f6936d9bb60df2547a0c7a3a8352dd52/07a9c/AKS_1.png 1440w,\n/static/f6936d9bb60df2547a0c7a3a8352dd52/14747/AKS_1.png 1914w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"2\">\n<li>상단 +만들기 에서 Kubernetes 클러스트 만들기 를 클릭합니다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAAAzUlEQVQY042P3WrCQBCF8/4P1ttS6FUrNAZDoiZp3Ow6O/+yioIVtOdqZjgfc0417Pa77XYaRxFxd3M3M/+HzKxa1s3v13eo10eAw5JCyocI8xIj4AKYUI7IN0BEVNXMRKTAkBICUM7CzKKihkQsxYJIkEnPViISEUQkIkTMAMxcPYa8XkoDL7Op2eXhvcGrJ636vt+07RPDX1hVS3yREELb1N2mmecZES9tX8DMHM+axuHzp39fddOwj6kIEV/Afq3r7h9dfqvTbX2MfQKnfdXhImE5FgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_2.png\"\n        title=\"AKS_2.png\"\n        src=\"/static/8e9a7e30432d6ccab6717be985e0d676/37523/AKS_2.png\"\n        srcset=\"/static/8e9a7e30432d6ccab6717be985e0d676/e9ff0/AKS_2.png 180w,\n/static/8e9a7e30432d6ccab6717be985e0d676/f21e7/AKS_2.png 360w,\n/static/8e9a7e30432d6ccab6717be985e0d676/37523/AKS_2.png 720w,\n/static/8e9a7e30432d6ccab6717be985e0d676/302a4/AKS_2.png 1080w,\n/static/8e9a7e30432d6ccab6717be985e0d676/07a9c/AKS_2.png 1440w,\n/static/8e9a7e30432d6ccab6717be985e0d676/c2b0b/AKS_2.png 1895w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"3\">\n<li>AKS 생성 상세 메뉴 입니다. 먼저 AKS를 배포할 리소스 그룹을 생성해줍니다. 리소스 그룹 부분에 새로 만들기를 클릭하여 리소스 그룹 이름을 지정해줍니다. 리소스 그룹 이름은 규칙성 있게 지정해주는 편이 나중에 햇갈리지 않습니다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAABH0lEQVQoz31Ri27CMAzk/39zmoCWNi1J/LY7hYxSmLSTFTmnnM+xT8uSLpdrrZWZOpiFmVWVmdtFRB4MM7v7dsAJEZjaC2YSESK6r2sphZkBABGJCJ/40J9iCzVjkc6q2nBLaVlqrWam7+gdHZwBaqmllIjYts19A3bzlj+I/3Ca52kcx3EYVFpJU81rIkRCeJyE+Ns8EQHAm/OedWdi/joP52H6vt7Ow20Yp3mecs59nIhobi+xiGArDkQYEaYxTaUUAXRAY/KwcN3D3Q4Dg1oRwN3NWkkTXcZ0n9ecMlc2MgbZAwsp64czxXM4pDbOqeYCFUoubeZqe6ho93iJiVBEul7c03pfloQIfc/HVYnIm7gv80VFtA8cXsQf7OIfs5eEPZB1h+YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_3.png\"\n        title=\"AKS_3.png\"\n        src=\"/static/5ba37fb016d915ba25ba94e8cd59f951/37523/AKS_3.png\"\n        srcset=\"/static/5ba37fb016d915ba25ba94e8cd59f951/e9ff0/AKS_3.png 180w,\n/static/5ba37fb016d915ba25ba94e8cd59f951/f21e7/AKS_3.png 360w,\n/static/5ba37fb016d915ba25ba94e8cd59f951/37523/AKS_3.png 720w,\n/static/5ba37fb016d915ba25ba94e8cd59f951/302a4/AKS_3.png 1080w,\n/static/5ba37fb016d915ba25ba94e8cd59f951/4ad3a/AKS_3.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>클러스터 사전 설정 구성은 AKS의 목적에 따라 표준, 개발/테스트, 비용 최적화, 일괄 처리, 강화된 액세스 로 나뉘어 집니다.\r\n일반적인 실습이 목적이라면 표준 &#x26; 개발/테스트 로 선택해줍니다. 본 실습에서는 표준으로 선택하고 진행하겠습니다.</p>\n<p>Kuberbetes Cluster 의 이름은 구독 내에서 유일한 이름으로 지정해줍니다.</p>\n<p>지역은 사용자가 위치한 지역에 알맞게 설정해줍니다.</p>\n<p>가용성 영역은 기본 3개로 지정되어있습니다.</p>\n<p>여기서 가용석 영역이란 예를들어 현재 AKS를 만들고자 하는 한국 중부 리전에 지진,홍수 등 데이터 센터에 문제가 생겼을 시에 대비하여</p>\n<p>물리적으로 구분되어 전력적으로 배치된 데이터 선터를 최소 3개 이상 연결하는 지역 네트워크 설계를 통해 단일 실패 지점을 제거하는 방식 입니다.</p>\n<p>노드 크기는 AKS를 위해 존재하는 VMSS(Virtual Machine Scale Set) 의 성능(SKU)을 의미합니다. 이 또한 기본값으로 지정된 DS2 v2로 지정합니다.</p>\n<ol start=\"4\">\n<li>인증 및 권한 부여 부분은 기본적으로 설정되어 있는 Kubernetes RBAC가 있는 로컬 계정으로 선택합니다. 이것이 의미하는 바는</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAAA/UlEQVQoz3WRyW7DMAxE/f8f2R6DprZl7VyGVCHXMXIJTwOIj5ohl+2oKWVmbq2rKgAF7CxVuLkPHx9qefzuTL21lnM5Us61EVGn7u4A3D+SE963QNTzWZ1ofm7GCgFYwaIs+Ain0sYYrbUQQq2ZmRToLCRKLMTSie9unzEuL2a2hJzdvdayHbGKiXllvBuWcwP/mlhE5F8z87KGEGPMOf3scc1a2faqJDpee2I14IIbCb2MTDiWysyqGlJeYyexQqC3nGoOs3EaYVGZc09Hqkt9Tfravh9hhSgTQeW2DXPWK+p5ywsGsBwpz0g2nuVZpGK+z0u/w7dWGIB7YX/dVREDrxz3qQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_7.png\"\n        title=\"AKS_7.png\"\n        src=\"/static/28c00961d09f32d725983e942b39a3cc/37523/AKS_7.png\"\n        srcset=\"/static/28c00961d09f32d725983e942b39a3cc/e9ff0/AKS_7.png 180w,\n/static/28c00961d09f32d725983e942b39a3cc/f21e7/AKS_7.png 360w,\n/static/28c00961d09f32d725983e942b39a3cc/37523/AKS_7.png 720w,\n/static/28c00961d09f32d725983e942b39a3cc/302a4/AKS_7.png 1080w,\n/static/28c00961d09f32d725983e942b39a3cc/07a9c/AKS_7.png 1440w,\n/static/28c00961d09f32d725983e942b39a3cc/5eb90/AKS_7.png 1612w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Azure 에서 제공되는 리소스에는 액세스 제어(IAM) 탭이 있습니다. 이 IAM에 명시되어 있는 사용자들에게 한해 접근 권한을 부여한다는 뜻 입니다.</p>\n<ol start=\"5\">\n<li>네트워킹 설정 탭 입니다.</li>\n</ol>\n<p>네트워크 구성은 kubenet 과 Azure CNI 로 나뉘어 집니다. Kubenet은 기본 네트워킹 Azure CNI는 고급 네트워킹 입니다.\r\n간단하게만 보면 kubenet은 AKS에 필요한 가상 네트워크 대역폭을 자동으로 지정해주고\r\nAzure CNI는 사용자가 직접 가상네트워크의 대역폭을 설정해줄 수 있습니다.</p>\n<p>Azure CNI와 kubenet를 비교하는 표 입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAABYUlEQVQoz6XOwYriQBCAYZ9TmGAGNooXrw7CCPsivoawRIO0GQ3pVIx2b1d3BXVYJQhmouB1MpjVgWWPfqei4Keq1u/3bdu2LKvZbDqO88Nxei8vP19fn237ybIajUa9Xu90Or1er9vttlqtdrttWdZgMCjLsgYAQggAWK/XeZ6fzudlkrz5/nK5BIAoioQQSZLM5/M0TaWUqnI4HK5xkiRxHEdRhIjGGCIKggAAiEgphYhpmi4WC9/3AUBKiYhSyv1+f40nk4nruqPRyPM8xhgihmHIOdcVRCSiOI5931+tVlprY4xSKsuyazybzd4qjLEgCIgIADjn5o6IhBCMMaUUERljEPEWj8fj4XD4q+K6rtZ6Op2GYai1/l3RWnPOPc9Td0KI29u73W77/r7ZbLZp+me7PZ1OWZYdj8ePu6IoDpWiKP5u8jy/XC7XuHxA7fNfZVl+D9/+39zihy4/En8Bqec7RZjbab0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_Network.png\"\n        title=\"AKS_Network.png\"\n        src=\"/static/77d6d16ecda834d2bc9ae89e2883b7be/37523/AKS_Network.png\"\n        srcset=\"/static/77d6d16ecda834d2bc9ae89e2883b7be/e9ff0/AKS_Network.png 180w,\n/static/77d6d16ecda834d2bc9ae89e2883b7be/f21e7/AKS_Network.png 360w,\n/static/77d6d16ecda834d2bc9ae89e2883b7be/37523/AKS_Network.png 720w,\n/static/77d6d16ecda834d2bc9ae89e2883b7be/302a4/AKS_Network.png 1080w,\n/static/77d6d16ecda834d2bc9ae89e2883b7be/4ad3a/AKS_Network.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>정리하자면</p>\n<p>Kubenet이 권장되는 경우\r\n-> 제한된 IP 주소 공간\r\n-> 대부분의 Pod 통신이 Cluster 내에 있을때\r\n-> 가상 노드와 같은 기능 사용 XX</p>\n<p>Azure CNI 가 권장되는 경우\r\n-> 가상 노드 또는 네트워크 정책과 같은 고급 보안 기능 필요\r\n-> Pod 통신이 Cluster 외부의 리소스일때\r\n-> 직접적인 IP 주소 할당이 필요할때</p>\n<p>로 정리하였습니다. 본 실습에서는 kubenet로 지정하겠습니다.</p>\n<p>AKS 에 배포된 애플리케이션에 쉽게 액세스 하기 위하여 HTTP 애플리케이션 라우팅 사용을 체크해줍니다.</p>\n<p>AKS 보안 설정을 위해 Calico 설정을 할 수 있습니다. 이 실습에서는 사용하지 않겠습니다.</p>\n<ol start=\"6\">\n<li>통합 탭 입니다.</li>\n</ol>\n<p>추후 Azure Devops에서 이미지를 Build &#x26; Deploy 할 ACR(Azure Container Registry)를 생성하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAAAsklEQVQY04WO0U7FQAgF9/8/U5+83nbZLrvAAVpTE6NJq054gkyYslBfKjWizDz+BMD741lXatT23DOycD9RwOCqCvj+yVV2dxM78jhNTzcvdV079/ry2h5rn8pjqshthQG0beEeEZnnlLcnLW3QQpNZROaYAI67zwAqbWYWX5Qp6h6sVltjZjPLzNvsCDcgf1B4DANEIapmBiAibuXrsrQ+eKqoyZngv5n38vft+Ier/AFrd9dZZxThswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_8.png\"\n        title=\"AKS_8.png\"\n        src=\"/static/fdaa0e7fd6781cdca9d239fe02b825c8/37523/AKS_8.png\"\n        srcset=\"/static/fdaa0e7fd6781cdca9d239fe02b825c8/e9ff0/AKS_8.png 180w,\n/static/fdaa0e7fd6781cdca9d239fe02b825c8/f21e7/AKS_8.png 360w,\n/static/fdaa0e7fd6781cdca9d239fe02b825c8/37523/AKS_8.png 720w,\n/static/fdaa0e7fd6781cdca9d239fe02b825c8/302a4/AKS_8.png 1080w,\n/static/fdaa0e7fd6781cdca9d239fe02b825c8/07a9c/AKS_8.png 1440w,\n/static/fdaa0e7fd6781cdca9d239fe02b825c8/7970d/AKS_8.png 1908w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>컨테이너 레지스트리 탭에서 새로만들기를 클릭후 ACR이름을 지정하여 생성해줍니다. 이때 ACR의 이름은 Azure 전체에서 유일한 이름이어야합니다.</p>\n<ol start=\"7\">\n<li>최종</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABJ0AAASdAHeZh94AAAA10lEQVQoz5WSzW7EIAyEef/3bJs0PyI4xHgMuMoirXLqwsiHuXzGg+2WdZnnaVl+v3++BGJm1Wqr2/4rF9KaMhXjbBfsfBRlwwf4ijHGEwpmFkkAOCUfKJdin+SAu32ttZRSa315K6Vah5wIWjYi8t4zc87Z+uSOEF68necpIm2KXlhVm+tnnmNLcyLybjT8MoCUEjDAuyNQc8fhp2neto2IRKQnhcMjs6rmnFUVql3wvu/NEZFiMPO6baXex+S9j/Eag0MI7c8AjG7LMXN5nTGAGOPQtv4AvmZ5ufPy+qYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_9.png\"\n        title=\"AKS_9.png\"\n        src=\"/static/a5f898572852dd40bc6bb383b3a1774e/37523/AKS_9.png\"\n        srcset=\"/static/a5f898572852dd40bc6bb383b3a1774e/e9ff0/AKS_9.png 180w,\n/static/a5f898572852dd40bc6bb383b3a1774e/f21e7/AKS_9.png 360w,\n/static/a5f898572852dd40bc6bb383b3a1774e/37523/AKS_9.png 720w,\n/static/a5f898572852dd40bc6bb383b3a1774e/302a4/AKS_9.png 1080w,\n/static/a5f898572852dd40bc6bb383b3a1774e/4ad3a/AKS_9.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>설정한 내용들을 최종적으로 검토하고 하단의 만들기를 클릭하여 리소스를 생성합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAAA0ElEQVQoz52Q4U4EMQiE+/4PaszpeS1lWxgoNXu79i4mmuj3A5LCZOikl9e3y0eB+RgjIsaIcRDx1WPeiTvPL+lyvXFXqnzNxF0V6CIwA6AAYMMdQBN1dzNXhZmd4ta2iCg5Z+7v1DJ3xTlbuLuoLsNFEpGIyLkwN1E0dTVX2F7N568k932jlEJEIkKVibcm2tW62nJetma28ebuUD3FOefrjd3Hkcw3B661tbbEtdYjvdR7n3MSUYz48b6Yzx9+pL3xHhgRzb+TDIgIEfmH+BO2txNOPIYg9AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_10.png\"\n        title=\"AKS_10.png\"\n        src=\"/static/224f6bdfc23f6ced7fef78182dbddd63/37523/AKS_10.png\"\n        srcset=\"/static/224f6bdfc23f6ced7fef78182dbddd63/e9ff0/AKS_10.png 180w,\n/static/224f6bdfc23f6ced7fef78182dbddd63/f21e7/AKS_10.png 360w,\n/static/224f6bdfc23f6ced7fef78182dbddd63/37523/AKS_10.png 720w,\n/static/224f6bdfc23f6ced7fef78182dbddd63/302a4/AKS_10.png 1080w,\n/static/224f6bdfc23f6ced7fef78182dbddd63/07a9c/AKS_10.png 1440w,\n/static/224f6bdfc23f6ced7fef78182dbddd63/f42d7/AKS_10.png 1489w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAABJ0lEQVQoz4WSyXIkIQxE+/9/1B4v7NolcBTYFe6Zw+QJQTylUsGjDig5wxhINOASi5i5u5v7OUTE3IoIjzC1GbHWery+f7SSmbC2luoAFhZh5k2a/sBADKxzw6oWB+6DmNnda6kN+T233KADD5QOjKJry/Yg61kPRNDdv5RKxGbGYqJOoqQu+jew1po3XHtfO0wtBUYnotZHH0Ai/AOfwDdMiMzkZo+Ouh/jM+U/lQvY4DCfv61OazM7JSKqyuVcambiiEilvDR9a1LQvpc71zGcc6aUVL/zAwAiXnCDeuBScgJMYCD+r/MY4y4RkYjOtkGubUcp6aP1PJw0xH5nvODW2n0FcH2IPXYrqnqlahVEUVx9qj/Bc04RuUvd2jCAbfgM9gT9T19yLIUiUSh5JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_11.png\"\n        title=\"AKS_11.png\"\n        src=\"/static/4d81f67d6ecfb8cfa25a6129378159fb/37523/AKS_11.png\"\n        srcset=\"/static/4d81f67d6ecfb8cfa25a6129378159fb/e9ff0/AKS_11.png 180w,\n/static/4d81f67d6ecfb8cfa25a6129378159fb/f21e7/AKS_11.png 360w,\n/static/4d81f67d6ecfb8cfa25a6129378159fb/37523/AKS_11.png 720w,\n/static/4d81f67d6ecfb8cfa25a6129378159fb/302a4/AKS_11.png 1080w,\n/static/4d81f67d6ecfb8cfa25a6129378159fb/07a9c/AKS_11.png 1440w,\n/static/4d81f67d6ecfb8cfa25a6129378159fb/6c99d/AKS_11.png 1447w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>생성된 리소스를 확인합니다.</p>\n<ol start=\"8\">\n<li>AKS 접속 테스트</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAAAmklEQVQoz+2NUQ6CMBBEewUsuAUrbYHu0hqCcP+D0CJXUQNE/w2/vkwys5NMlhkj0Rq0JaGSEuCcCOBwPgnBizwVgucivRTZngHWE4AL4FmasHGwfd+MdxwH7Loabem9caRvviJUTX1tSTunvTPeGSJFpFyrCVVlJFuWR9iYphBjmOf41YcQwmpbEzbtIbLXAdjzAMc+/8e/jd8riR/9i1PmJQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_12.png\"\n        title=\"AKS_12.png\"\n        src=\"/static/8a28a8708a61ff3c6ae59ade01afec4b/37523/AKS_12.png\"\n        srcset=\"/static/8a28a8708a61ff3c6ae59ade01afec4b/e9ff0/AKS_12.png 180w,\n/static/8a28a8708a61ff3c6ae59ade01afec4b/f21e7/AKS_12.png 360w,\n/static/8a28a8708a61ff3c6ae59ade01afec4b/37523/AKS_12.png 720w,\n/static/8a28a8708a61ff3c6ae59ade01afec4b/302a4/AKS_12.png 1080w,\n/static/8a28a8708a61ff3c6ae59ade01afec4b/105d8/AKS_12.png 1170w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Window의 경우 PowerShell에서 Az login 을 입력하여 Azure 계정으로 login 합니다.\r\n(Azure CLI 설치 필요!!)</p>\n<ul>\n<li>\n<p>az account set —subscription subscriptionid 를 입력하여 AKS가 생성된 구독 ID를 지정합니다.</p>\n</li>\n<li>\n<p>az aks get-credentials —resource-group RG-Kubernetes —name korwoo</p>\n</li>\n</ul>\n<p>를 입력하여 AKS의 Credential를 Get 합니다.</p>\n<ul>\n<li>kubectl get namespaces 등의 명령어를 입력하여 AKS를 테스트 합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAAAYElEQVQoz+3NsQ3AIAxE0ZvBGcAIRmAALFGxGhOwKgjiFJQpAqLNL05ungznHBFdF1nLxhgAOWdV7b3rV0gpiYj3PgSJMTJzKWUV11pba3PnMcbQtaAH4X61gY8+/3gPP7rXcEAVQT3TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AKS_13.png\"\n        title=\"AKS_13.png\"\n        src=\"/static/1ae00852c5754cfcec446c56a15f0a02/37523/AKS_13.png\"\n        srcset=\"/static/1ae00852c5754cfcec446c56a15f0a02/e9ff0/AKS_13.png 180w,\n/static/1ae00852c5754cfcec446c56a15f0a02/f21e7/AKS_13.png 360w,\n/static/1ae00852c5754cfcec446c56a15f0a02/37523/AKS_13.png 720w,\n/static/1ae00852c5754cfcec446c56a15f0a02/302a4/AKS_13.png 1080w,\n/static/1ae00852c5754cfcec446c56a15f0a02/4ad3a/AKS_13.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-1-aks-%EC%86%8C%EA%B0%9C\">👋 1. AKS 소개</a></li>\n<li><a href=\"#-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">🚀 시작하기</a></li>\n</ul>\n</div>","excerpt":"👋 1. AKS 소개 AKS(AzureK Kubernetes Service)는 Azure 에서 제공하는 컨테이너 기반 인프라 운영 서비스입니다. Master 서버를 Azure 에서 관리해 주기에\r\n인프라 관리 부담은 줄어들고 Azure 리소스와의 뛰어난 호환성을 가지고 있습니다. 또한 Azure CNI(Container Network Interface) 를 활용하여\r\nAKS에서 생성된 Pod와 Azure VNet 상의 리소스를 직접 통신시킬 수 있습니다.  🙌 혹시 만드시는 과정에서 궁금하신 점이나 어려움이 있으시다면 이슈를 통해 문의 남겨주세요! 스타는 블로그 테마를 지속적으로 발전시키는데 큰 힘이 됩니다!⭐️ 🚀 시작하기 Azure Portal에 로그인하여 상단의 검색바에서 Kubernetes & AKS 를 검색합니다.  상단 +만들기 에서 Kubernetes 클러스트 만들기 를 클릭합니다.  AKS 생성 상세 메뉴 입니다. 먼저 AKS를 배포할 리소스 그룹을 생성해줍니다. 리소…","frontmatter":{"date":"August 28, 2022","title":"Azure Kubernetes Service 생성 & Test","categories":"Devops","author":"KORWOO","emoji":"🧢"},"fields":{"slug":"/DevOps/AKS&DevOps1/"}},"next":{"id":"5cd4b259-eef7-5b8e-bc0d-22869467545e","html":"<h2 id=\"-azure-devops\" style=\"position:relative;\"><a href=\"#-azure-devops\" aria-label=\" azure devops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👋 Azure Devops</h2>\n<p>지난번에 AKS 및 ACR 생성에 이어서 DevOps에서 Pipeline 구축을 진행해보도록 하겠습니다.</p>\n<h2 id=\"-시작하기\" style=\"position:relative;\"><a href=\"#-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\" 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚀 시작하기</h2>\n<p><a href=\"https://devops.azure.com/\">https://devops.azure.com/</a> 에 접속하셔서 로그인을 하시면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAABBklEQVQoz9WP3UrDQBBG8/5PJCIEJmyTXVOJMbnwStCqjcnuZqtZsz+TlRpapK2olx4+mO/mMDMRIYRSmp2CUkoIqetaqV4IPo7v1hprjbMW0Tcv6yiO4wQSAFgckaZpAnB1XbZKK20HO+2C2oemk9H52QUAZFmW5zml9EAGgLK80cYPo9XG7WMcth2PGGXLZT7DGDsll+gdokfvnXPWeeuc87huecQY+/rz4dlJUhQF55wLoYehk5uHp0ZIJV/13aqJFt+z3yylFEIMW1k9Ni2Xfb8ZVs+/kKuqCiG4T8w4zgURhRA/y3VdhxCmaQo75i6l/F9ymCYMoeV/l7cD7eX9G7ltPgBAsmapzuRRngAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_1.png\"\n        title=\"DevOps_1.png\"\n        src=\"/static/b4eeb9661065c359e1f57f2a401be37f/37523/DevOps_1.png\"\n        srcset=\"/static/b4eeb9661065c359e1f57f2a401be37f/e9ff0/DevOps_1.png 180w,\n/static/b4eeb9661065c359e1f57f2a401be37f/f21e7/DevOps_1.png 360w,\n/static/b4eeb9661065c359e1f57f2a401be37f/37523/DevOps_1.png 720w,\n/static/b4eeb9661065c359e1f57f2a401be37f/302a4/DevOps_1.png 1080w,\n/static/b4eeb9661065c359e1f57f2a401be37f/07a9c/DevOps_1.png 1440w,\n/static/b4eeb9661065c359e1f57f2a401be37f/3a188/DevOps_1.png 1623w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>과 같은 프로젝트 생성 화면을 보실 수 있습니다.\r\n프로젝트의 이름 및 공개 여부를 설정해주시고 DevOps 프로젝트를 생성하도록 하겠습니다.</p>\n<h2 id=\"azure-devops-git\" style=\"position:relative;\"><a href=\"#azure-devops-git\" aria-label=\"azure devops git permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Azure Devops Git</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABTElEQVQoz4WRa0/CMBSG9///gcavokFgeKXs0su67hxa+QsajBG5CASBSSKbWckQI8YnJ8358uZ92joX1yQIaRRFEWeCc0Yp5xwROyVa693y0u8Px6P54v0z26zWqXPacAOvHVLabDPKmJRSKQUAWAIAumTce1pPZx+TWfo2TSczxz0+qjcady1SueEhpQAJIiYWAFBKxXFsjLm3jB978+f+4nW4HIyWg7FTq5zVajVCSKJiwYWUMpYxWG3EDtjBUj5N0zzPsyzLLc55tdp03RbxTlzKuUBASGB34a4t3J7GmO+wHadevyKE0OKdhBBCqaRQLWRjRNR7HGhuXd76YcCDANymbntdy7bHGPNP2Pd9z/MYY5EQkRCcc8aYUkprbX6itd4PbzZZEfZ9jzImpJJScmsvpcRfAMCfzVB+D0CxqkNsw3meL1dpCA9fRLPoLAFVoNMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_2.png\"\n        title=\"DevOps_2.png\"\n        src=\"/static/5dc75fd6b2041494a449716eec365381/37523/DevOps_2.png\"\n        srcset=\"/static/5dc75fd6b2041494a449716eec365381/e9ff0/DevOps_2.png 180w,\n/static/5dc75fd6b2041494a449716eec365381/f21e7/DevOps_2.png 360w,\n/static/5dc75fd6b2041494a449716eec365381/37523/DevOps_2.png 720w,\n/static/5dc75fd6b2041494a449716eec365381/302a4/DevOps_2.png 1080w,\n/static/5dc75fd6b2041494a449716eec365381/07a9c/DevOps_2.png 1440w,\n/static/5dc75fd6b2041494a449716eec365381/9efb3/DevOps_2.png 1894w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Azure Devops 왼쪽에 Repos라는 메뉴가 있습니다.\r\n이 메뉴는 Azure Devops에서 제공하는 Git Repository 입니다.\r\n이는 표준 Git을 채택하여 사용하기에 기존 사용하시던 GitHub와 동일하게 사용하실 수 있습니다.\r\n여기서 저는 Azure에서 기본적으로 제공해주는 Python Flask 샘플앱\r\n(<a href=\"https://github.com/Azure-Samples/msdocs-python-flask-webapp-quickstart.git\">https://github.com/Azure-Samples/msdocs-python-flask-webapp-quickstart.git</a>) 을 Import 해보도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAABW0lEQVQoz1WRSY7bQAxFdf/b9EmSldFKA3bLgRypJqkGVpGsKS0rMZK34ILA5yc/h8eqvHPeWgBgoggBCYmYiPL/cCkR0SYSLjGX99v3YXnMUsrdyBACM5tt33ebUooxppTwBVHcbdFq/FjevgkltB8/hvfxx+fnTSvpQyCiFCMRtdZ678yc/kLMfl3d/Wee53y/8Tzj49dwuVyu16sx27Zth0MCQuxP6In33jnHzKW12nvtPXKmUnKtwziO0zQZbay1RBRjhOBPZ0SMEK2z+24RkZlrrb2dk3stZbhP07Is3vsQwmEc07aZnHPvPaXknDPGaKX3fQeAs/9HXOuwrItW6riK6BCnBACvmwkRAEIIZ30Gd3yhtVZKGVYhpJSvYAFASinEqqRUWq3KCGUWqUOihPQcfmaPOedBrOu/4hij1kprLZTZrPeJXCQXETAD5lxq76311lr7Wvs3u74DB48dQdoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_3.png\"\n        title=\"DevOps_3.png\"\n        src=\"/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/37523/DevOps_3.png\"\n        srcset=\"/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/e9ff0/DevOps_3.png 180w,\n/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/f21e7/DevOps_3.png 360w,\n/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/37523/DevOps_3.png 720w,\n/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/302a4/DevOps_3.png 1080w,\n/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/07a9c/DevOps_3.png 1440w,\n/static/2ae04d3d3d1a62e1dc9bb007ee55deb6/44d2c/DevOps_3.png 1899w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Import가 성공적으로 완료되면 다음과 같은 화면을 보실 수 있습니다.\r\n여기서 저희는 이 Flask App을 컨테이너로 Build &#x26; Push 해야하기에 Dockerfile 파일을 추가해주겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAAA00lEQVQoz9WRSU4EMQxFc/8rseIEsEViWECjTlXHSZzJdiUu1ANSLYre8/RWlr9sy8afJuccEdVa7WRTKaU1Erm55VJnDw+PL0/P7zWjwQg5JRappdiPz2QtATAAO0feMwtvEeGcX9+Oh8NMrZoQQkRkEUqYj1BS7kzrIusi6mFddc8zvXcTYzzNcyXilMoErdRObTAt1DqA6vhLETbBh+vN1JpiXBMqRkXUGDTny4zd4TpGN99z/JqCS4yV9HelDXov3BpdJSLVcad7J7z9xf8J/wAK4UlAqko1+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_4.png\"\n        title=\"DevOps_4.png\"\n        src=\"/static/a8061fae628896ab7183d65cd1159936/37523/DevOps_4.png\"\n        srcset=\"/static/a8061fae628896ab7183d65cd1159936/e9ff0/DevOps_4.png 180w,\n/static/a8061fae628896ab7183d65cd1159936/f21e7/DevOps_4.png 360w,\n/static/a8061fae628896ab7183d65cd1159936/37523/DevOps_4.png 720w,\n/static/a8061fae628896ab7183d65cd1159936/302a4/DevOps_4.png 1080w,\n/static/a8061fae628896ab7183d65cd1159936/07a9c/DevOps_4.png 1440w,\n/static/a8061fae628896ab7183d65cd1159936/799f3/DevOps_4.png 1642w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\">\r\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:3.8-slim</span>\r\n\r\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> . /app</span>\r\n\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> pip3 install flask </span>\r\n\r\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /app</span>\r\n\r\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"python3\"</span>, <span class=\"token string\">\"-m\"</span>, <span class=\"token string\">\"flask\"</span>, <span class=\"token string\">\"run\"</span>, <span class=\"token string\">\"--host=0.0.0.0\"</span>]</span>\r\n</code></pre></div>\n<p>해당 DockerFile 내용을 Git에 Commmit 해주겠습니다.</p>\n<h2 id=\"azure-devops-pipeline\" style=\"position:relative;\"><a href=\"#azure-devops-pipeline\" aria-label=\"azure devops pipeline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Azure Devops pipeLine</h2>\n<p>이제 본격적으로 생성하였던 Azure Container Registry에 Build &#x26; Push 해주기 위한 PipeLine 작업을 진행하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAAAsUlEQVQY05WQXwuCMBTF9/0/URBETwVGSaVsaGp/MNlUwqlpbbu3h3pzBp63C+fHOfcQer5zUbRto7U2xuBfKaV+NkDRCOJFkeC8khKni7Cde0mSsiynkgBA3Nn86Dj3LPveAwcaGE/e+x5lTHA+xBDxllbL8AGv3g7TA42ik7V233cBYxs/jMMY0VKAZNdU5EIOBgMA0Gq1jRfr4P1slNYWOC9yzrkcWbupu1p2Yz9/AIr60f0+3RTZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_5.png\"\n        title=\"DevOps_5.png\"\n        src=\"/static/d238334f9459d9057910838c7afa542e/37523/DevOps_5.png\"\n        srcset=\"/static/d238334f9459d9057910838c7afa542e/e9ff0/DevOps_5.png 180w,\n/static/d238334f9459d9057910838c7afa542e/f21e7/DevOps_5.png 360w,\n/static/d238334f9459d9057910838c7afa542e/37523/DevOps_5.png 720w,\n/static/d238334f9459d9057910838c7afa542e/302a4/DevOps_5.png 1080w,\n/static/d238334f9459d9057910838c7afa542e/07a9c/DevOps_5.png 1440w,\n/static/d238334f9459d9057910838c7afa542e/40a97/DevOps_5.png 1911w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>왼쪽에 보이는 pipelines 에서 Create Pipeline을 선택하여 들어갑니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAABUUlEQVQoz5WPa2+CMBiF/f+/bC5LHIKOFRCkgL1wa0tbWiouhmTRzJDs+fCmH86TnrM5JGkKL4Q2wyCUVkIqPVqlx+v1Os/zch8ftwc2b94hTaKiKBBCXAytGAd7M25JzsaYaZqcc9baxX+St/EZVSWlNSGEc37KYVmWNaUQQqX0bZVNetwhQgnBGGM5CHHYNnXTtG3X9XZ68duT/PHuhd9hlmVJkjDGo5gwfkdr7Zybpul37YvNnh8EQRDHMQCg7/u44j1jUsolN//hSfb3e9/3oygCAHRdV0DI7vSCcykHa+1a7SDwwzA8nU4AAMZ6XuWcMa21Mcasmnd5v/c+d5/hVwgA4EKoruNaGXufuiTWakfHNMvSAhZlVQ1t20dnAWLdtKO1xhjn3Frt3I8qfKlpTSiVbWdyKPNSN81ojB61Hsc1GSOEMSaEIISUUrf/8AObRLCBx3kmdAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_6.png\"\n        title=\"DevOps_6.png\"\n        src=\"/static/420239d7ce0de242f9fb47901641541c/37523/DevOps_6.png\"\n        srcset=\"/static/420239d7ce0de242f9fb47901641541c/e9ff0/DevOps_6.png 180w,\n/static/420239d7ce0de242f9fb47901641541c/f21e7/DevOps_6.png 360w,\n/static/420239d7ce0de242f9fb47901641541c/37523/DevOps_6.png 720w,\n/static/420239d7ce0de242f9fb47901641541c/302a4/DevOps_6.png 1080w,\n/static/420239d7ce0de242f9fb47901641541c/4ad3a/DevOps_6.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하단에 보이는 Use the Classic Editor 를 선택합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABA0lEQVQoz62Q3W6EIBBGef8ntNY1a9sFAS0DzPCzUbZB061Nvey5IEwyh/kGxuXsnCWiEEOM8f6bZVkef1i/YSP/GKW01vozkMK7UKP+DDHUisg5ZwCcczlnprVWSjnncAMAtNbPEil2b2LgozFGCDFPs5Tydrtxwb3zrH1t+743xtDG3lRnboQQPOIzfCnlmJ81TXO5XHbZez9Ns5ISjNnlGMgCpJSWylpKWdd67q+w5qXpus5s3WCMUooLPk2TtbbKMaDzKaUYQ77nXf6Z3LbtMAwAQER1R0IK9YLeY6BogPprQXwKx+RsVPL4YUc8YkZcDJSUH2cwtXEue5/zufYP8heBPz2/tCDyWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_7.png\"\n        title=\"DevOps_7.png\"\n        src=\"/static/149ed3b413cda40b3bab10b4f222f357/37523/DevOps_7.png\"\n        srcset=\"/static/149ed3b413cda40b3bab10b4f222f357/e9ff0/DevOps_7.png 180w,\n/static/149ed3b413cda40b3bab10b4f222f357/f21e7/DevOps_7.png 360w,\n/static/149ed3b413cda40b3bab10b4f222f357/37523/DevOps_7.png 720w,\n/static/149ed3b413cda40b3bab10b4f222f357/302a4/DevOps_7.png 1080w,\n/static/149ed3b413cda40b3bab10b4f222f357/07a9c/DevOps_7.png 1440w,\n/static/149ed3b413cda40b3bab10b4f222f357/70ad2/DevOps_7.png 1665w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>저희가 사용하는 Azure Repos Git을 선택해줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAAA70lEQVQY04XQwXKDIBAGYN7/6Xpqkh461saIKBjYXUBgtROtmSQ99BsOHPj5F0Tb9c5aIvLexxinBymlECPzvGHmGGOeJt8P2biPzzfRtRelegBARABwzsEKEUPwDimVeXnEnPQ4acNXFOfmLFsJAERkrW2axlqLiESEAAQuxZimqezul8zLIg6H96qq7s1aD9vexzBeWld/x37I2pTxOu/z34nT6bSFiUgp9VVVUspbs/dea+yUNyYYE8YrlzLPT08Qx+OxruutzTlnV7jiklO+rVxKXmdm5qdwK+XQ/34YrXD3cvQvoZTq9/CLf8M/Ty/MtnLcEnoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_8.png\"\n        title=\"DevOps_8.png\"\n        src=\"/static/eea964e3169959684d358f31ecec09ac/37523/DevOps_8.png\"\n        srcset=\"/static/eea964e3169959684d358f31ecec09ac/e9ff0/DevOps_8.png 180w,\n/static/eea964e3169959684d358f31ecec09ac/f21e7/DevOps_8.png 360w,\n/static/eea964e3169959684d358f31ecec09ac/37523/DevOps_8.png 720w,\n/static/eea964e3169959684d358f31ecec09ac/302a4/DevOps_8.png 1080w,\n/static/eea964e3169959684d358f31ecec09ac/07a9c/DevOps_8.png 1440w,\n/static/eea964e3169959684d358f31ecec09ac/8bf8a/DevOps_8.png 1901w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Docker Build &#x26; Push 를 위해 상단에서 Docker를 검색 후 나오는 Docker Container을 선택해줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAAA50lEQVQY032O4W6DMAwG8/6PR6t1oIlOHdCSlJoskMSxk0yFaRpb1dP9PX8Wh7d3pa7Ozui9czagR/QpxbyQUsq/CAvMnFMGC6KsayV7OYxXbcE4MO5mvJ7QOA7EeRv/QVSvZdu2TXdp+9ug7fD57XWcJ+cxoF+m4iPEbrevyrLtulFrJrpPreZsAeDSz6CdQ+K4lQORKIqiKqtT0wwARMQxrsacTdMNpyYMY/CInJDjXVrkGDiKl/3hWB+llNM/nHOEGJeL8edz5tWUkjh/dFIpAJi3pTGGiPNThFKq73sAmB7E9Dz+An3ezhumU9K4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_9.png\"\n        title=\"DevOps_9.png\"\n        src=\"/static/b47d8bf3007a772222e861daf39989d4/37523/DevOps_9.png\"\n        srcset=\"/static/b47d8bf3007a772222e861daf39989d4/e9ff0/DevOps_9.png 180w,\n/static/b47d8bf3007a772222e861daf39989d4/f21e7/DevOps_9.png 360w,\n/static/b47d8bf3007a772222e861daf39989d4/37523/DevOps_9.png 720w,\n/static/b47d8bf3007a772222e861daf39989d4/302a4/DevOps_9.png 1080w,\n/static/b47d8bf3007a772222e861daf39989d4/07a9c/DevOps_9.png 1440w,\n/static/b47d8bf3007a772222e861daf39989d4/8963a/DevOps_9.png 1918w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Agent Specificastion 은 어떤 운영체제가 PipeLine을 실행시켜주느냐 인데 저는 ubuntu 로 선택을 하였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAABKElEQVQoz22R62rDMAxG/f6vth/rUujaQtf1smRxYseJ77Isj4SO7tLDQSDBh0BiT6+Hum6UUiEEY4y11joHAKUUWihE5Zu8QMskJM+q3bbjvBdi0gYgQgSABACImHCGfoTnPBEgpUxIxNbP1dvx+HG9DlJ672KYmWuMYRx9L3DSqHU25qZeWq1xmli1Xu+22/fT5VB3n4MbXJYOpUvCkWj6se9iCIT4y5SICIVgq5fVZrM5nc9cSG2d9XHWRRvAymFSo3beRUiYMdNNzFgKDIrtq/3pcuYtt9bc0fPpNO+lVKP1NiYPOSS6CdnnEnrJ2kvNOy6EMH+w1vLOW4dUloX5LuK8WUjGu65t28dhIXTT4DjmafovKsV4yx+Gtdbee0jzv/IjMOcvDxID954uTkQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_10.png\"\n        title=\"DevOps_10.png\"\n        src=\"/static/9f02e39c73b24da94fd4d352fdec6519/37523/DevOps_10.png\"\n        srcset=\"/static/9f02e39c73b24da94fd4d352fdec6519/e9ff0/DevOps_10.png 180w,\n/static/9f02e39c73b24da94fd4d352fdec6519/f21e7/DevOps_10.png 360w,\n/static/9f02e39c73b24da94fd4d352fdec6519/37523/DevOps_10.png 720w,\n/static/9f02e39c73b24da94fd4d352fdec6519/302a4/DevOps_10.png 1080w,\n/static/9f02e39c73b24da94fd4d352fdec6519/07a9c/DevOps_10.png 1440w,\n/static/9f02e39c73b24da94fd4d352fdec6519/09262/DevOps_10.png 1896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>보이시는 Docker Build 에서 AKS 및 ACR을 생성하였던 구독, 생성한 ACR을 선택해줍니다.\r\n바로 아래 보이는 Docker Push 또한 Docker Build 와 동일하게 선택해줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABHElEQVQoz52Qy26DQAxF+f+Pa0kqQpROKJQAA0N5TAY8L3uqtFIlmm7Ss/DGOr7yjV7OZd32Us7rumqtF63BGAAAaync+J73GGOi/enM64pzrgGc1qp4N3J2BqCqbVkGrSkEcpa8J+8DbU5F6fHQ970QouqGc9HkCRvHZQI/inloPsbFyn6as1zx1glB0/RjElGU7JPsLcvzvO6GdlyuLkiNElCaIE2YNM2D6ovLcKlUw+04bpKfnuM0TRlj8zTBoghx+xohorpKayzAugLQF4h4S97td6fTK2NMKeW8d87/KgYRpVKIaK1xzm3kON4dkgNjDAD+bJWIZnmT71dRdszqpuYNN8aEB4nqouyE6NrWWvuwLHrRdV37L/kT78xCcggEiYYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_12.png\"\n        title=\"DevOps_12.png\"\n        src=\"/static/a46ad0b1ae6a03555258f09f09f8718e/37523/DevOps_12.png\"\n        srcset=\"/static/a46ad0b1ae6a03555258f09f09f8718e/e9ff0/DevOps_12.png 180w,\n/static/a46ad0b1ae6a03555258f09f09f8718e/f21e7/DevOps_12.png 360w,\n/static/a46ad0b1ae6a03555258f09f09f8718e/37523/DevOps_12.png 720w,\n/static/a46ad0b1ae6a03555258f09f09f8718e/302a4/DevOps_12.png 1080w,\n/static/a46ad0b1ae6a03555258f09f09f8718e/07a9c/DevOps_12.png 1440w,\n/static/a46ad0b1ae6a03555258f09f09f8718e/2a077/DevOps_12.png 1533w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>상단의 Triggers 에 접속하여 Enable Continous Integration을 체크해줍니다.\r\n이것을 선택해 주면 해당 Git에 Commit &#x26; Push 하였을때 이것을 감지하고 자동적으로 Docker Build &#x26; Push 작업을 진행해주는 기능입니다.\r\n활성화 후 Save &#x26; Queue를 선택하여 저장 및 실행해주도록 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABJ0AAASdAHeZh94AAABAElEQVQY05XNy06DQBiGYS5AaS008RBbDp6XGi8SEtqEeh01wHWoC0tBgosaIv4DjAOBqWwcM+qqiVW/vNsnnxAungv8Wtc1IQRlaLl8Cx/C0dia2PbIslYyTcM0eFf2xBwbwjyOMwCMcVVVGGPG2PR6Koobg/29jri5UrcjftXb6vZlSYiCIEmSPM/Lio8x5rru8dHh5cX5ga7pmvpTmqoIN7d3s9l9mqY5KQBe3jl2dne2z05PdE1VhoM1Cb7vR1EEAAUpACH+7Diy1FOV4XrJ8dwP4jjOsoxSWpYlY8zz3L4saaryO356XAACQkjbtpTST+z9FSOEAL5x0zT/wh+etcq97GPgfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_13.png\"\n        title=\"DevOps_13.png\"\n        src=\"/static/8a74c722faccd864b2d4321f057ab3b7/37523/DevOps_13.png\"\n        srcset=\"/static/8a74c722faccd864b2d4321f057ab3b7/e9ff0/DevOps_13.png 180w,\n/static/8a74c722faccd864b2d4321f057ab3b7/f21e7/DevOps_13.png 360w,\n/static/8a74c722faccd864b2d4321f057ab3b7/37523/DevOps_13.png 720w,\n/static/8a74c722faccd864b2d4321f057ab3b7/302a4/DevOps_13.png 1080w,\n/static/8a74c722faccd864b2d4321f057ab3b7/07a9c/DevOps_13.png 1440w,\n/static/8a74c722faccd864b2d4321f057ab3b7/26c3a/DevOps_13.png 1907w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>PipeLine에 메인메뉴에서 위의 화면과 같이 작업이 잘 진행되고 있는지 확인하실 수 있습니다.\r\n위의 화면에서 작업이 잘 완료되었다고 하니 ACR로 이동하여 이미지가 잘 Build 및 배포가 되었는지 확인해보도록 하겠습니다.</p>\n<h1 id=\"container-확인작업\" style=\"position:relative;\"><a href=\"#container-%ED%99%95%EC%9D%B8%EC%9E%91%EC%97%85\" aria-label=\"container 확인작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Container 확인작업</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAAAyklEQVQoz52NsU4DQQxE9/+/ihRUURBUIFLQ3AWIkuP27LW99q6NDhpEA7qnqUZ6M2n3fN09vd8cP/YD3418GPn2eHkcruMsb2A/c8b2Mul+oMPI9yd+eOWkghEWbr1iuEZEq9StRrf4izRl7N3nvJwvEyASM2ABxEJExGbN2prWe62VWXRteuveuieiEhGlFHf/3mMRM/WVHuGqCgtUEWYWYREBACJan3/JX47H/0iAaGqIuEXOOavWBZYt8pyzaQWAjc9mRkQb5E8Xkw87Qao7UwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_14.png\"\n        title=\"DevOps_14.png\"\n        src=\"/static/b7df72d3f464027ae23b13490a31147c/37523/DevOps_14.png\"\n        srcset=\"/static/b7df72d3f464027ae23b13490a31147c/e9ff0/DevOps_14.png 180w,\n/static/b7df72d3f464027ae23b13490a31147c/f21e7/DevOps_14.png 360w,\n/static/b7df72d3f464027ae23b13490a31147c/37523/DevOps_14.png 720w,\n/static/b7df72d3f464027ae23b13490a31147c/302a4/DevOps_14.png 1080w,\n/static/b7df72d3f464027ae23b13490a31147c/07a9c/DevOps_14.png 1440w,\n/static/b7df72d3f464027ae23b13490a31147c/70ad2/DevOps_14.png 1665w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Azure Portal로 이동하여 ACR -> 리포지토리 로 이동하면 위의 그림과 같이 컨테이너 이미지가 잘 배포되었음을 확인할 수 있습니다.\r\n이제 이 컨테이너 이미지가 정상적인지 확인해 보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAAAyUlEQVQoz9XNMYuDMBjG8XeWCyZReKlUwTOtqXBEKji7ukh0yGD8IH74iykUDq6tcEOn+40P/HmgKIqqqoT4TNPkeEyT5ICInPMoiuI4ZowBwDAM3nvnnH8ESqm6ri9SKvWVZVkYhvyXP+K2bZumOZ3O12uDiEEQEEI+flBKAUBrvR+XZSmEyPNcSomIhBB6xxijlHLOAaDv+/14WRZjjLV2nmdrrTFmHEet9Xg3TVPXdeu6eu+3bXuO/Rvg+4Vz7nXZj996/p/xDZs07SnhhlW9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_15.png\"\n        title=\"DevOps_15.png\"\n        src=\"/static/6297cb48bbf61ef4614d7545c2b6394b/37523/DevOps_15.png\"\n        srcset=\"/static/6297cb48bbf61ef4614d7545c2b6394b/e9ff0/DevOps_15.png 180w,\n/static/6297cb48bbf61ef4614d7545c2b6394b/f21e7/DevOps_15.png 360w,\n/static/6297cb48bbf61ef4614d7545c2b6394b/37523/DevOps_15.png 720w,\n/static/6297cb48bbf61ef4614d7545c2b6394b/302a4/DevOps_15.png 1080w,\n/static/6297cb48bbf61ef4614d7545c2b6394b/4ad3a/DevOps_15.png 1152w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>터미널에 접속하여 먼저 az acr login -n ACRNAME 을 입력하여 ACR에 로그인을 해줘야합니다. 다음 배포된 이미지를 당겨옵니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAABiklEQVQoz42Qy07CUBCGjy6gjb239ECrEtFIa2NCvLHSROMWgix8A97FR9C48RHc+QQmunRr3MhpQbQFNFDo3SBGUWrin0lmFt+XmQxwPa/Xt4fO0HHdyRq6ru953aFju6M4U9W3bRDFJRy3ICid3l482KMxjMHi5SAcsYbVPz6/O7np/EsOoyj8SBSFAye8b7jmW2BYnt72P4HwC/h7cxRFvh+0X23DHLx0Bz3biWXABO03mk8IoWazoeu6jtBjXT+7QpfX6PlJr9cRQsgwDIRQq9X6lsdndDqdo2q1WCzubG9pmqaqqqooqpJXlPw4iqJomibLcq1W+/hm8C1bllUoFCiKYllujiBomiYIIonhSQzDcAzD8UQigeM4AKBUKk3Jpnm4t7uSXVjNLmYlCfJ8imUzgiDxAuQFWUilGAay3CyYqVQqv2XTNA/295ay8rq2tpzLQVFMQ8hzHMswLMPQFEWSJEPTAIByuRwjb2xsEgQpz8+LIzMtSVI6k4EQiqLIcRxJktRP+R3w2ssdnRn7gwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps_16.png\"\n        title=\"DevOps_16.png\"\n        src=\"/static/37825223c56f654e7d42e47ef21c9011/37523/DevOps_16.png\"\n        srcset=\"/static/37825223c56f654e7d42e47ef21c9011/e9ff0/DevOps_16.png 180w,\n/static/37825223c56f654e7d42e47ef21c9011/f21e7/DevOps_16.png 360w,\n/static/37825223c56f654e7d42e47ef21c9011/37523/DevOps_16.png 720w,\n/static/37825223c56f654e7d42e47ef21c9011/302a4/DevOps_16.png 1080w,\n/static/37825223c56f654e7d42e47ef21c9011/07a9c/DevOps_16.png 1440w,\n/static/37825223c56f654e7d42e47ef21c9011/701e9/DevOps_16.png 1780w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>저는 여기서 Docker run -it —name FlaskTest -p 80:5000 Container Image Name:version\r\n과 같은 방식으로 입력하여 FLask 테스트를 진행하였고 LocalHost로 접속해보니 정상적으로 잘 작동하였음을 확인하였습니다.\r\n다음에는 이 이미지를 AKS로 배포해보도록 하겠습니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-azure-devops\">👋 Azure Devops</a></li>\n<li><a href=\"#-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">🚀 시작하기</a></li>\n<li><a href=\"#azure-devops-git\">Azure Devops Git</a></li>\n<li><a href=\"#azure-devops-pipeline\">Azure Devops pipeLine</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 28, 2022","title":"Azure Devops PipeLine 구축 1","categories":"Devops","author":"KORWOO","emoji":"🧢"},"fields":{"slug":"/DevOps/AKS&DevOps2/"}},"prev":{"id":"1fb5e8d0-d94f-544d-ae1b-f83ff6323242","html":"<p>가시다님 스터디 : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p>가시다님의 쿠버네티스 스터디 2주차 쿠버네티스 네트워크 입니다.\r\n이번주차는 저를 포함한 이번 스터디를 수행하는 모든 문들이 어려움을 많이 느꼈던것으로 알고 있습니다.\r\n저역시 쉽지 않아서 원래대로 라면 지난주에 포스팅해야했을것을 과제만 우선 제출하고 현재 포스팅을 하고 있습니다.ㅜㅜ</p>\n<h2 id=\"1-kops-원클릭-배포\" style=\"position:relative;\"><a href=\"#1-kops-%EC%9B%90%ED%81%B4%EB%A6%AD-%EB%B0%B0%ED%8F%AC\" aria-label=\"1 kops 원클릭 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. KOPS 원클릭 배포</h2>\n<p>지난번 1주차에서 스터디장님인 가시다님이 제공해주신 CloudFormation을 통해 EC2등을 배포하고\r\n거기서 aws configure 등의 작업을 진행해 주었습니다.\r\n하지만 가시다님의 노력으로 인하여 저희는 몇줄의 명령어 만으로 쉽게 배포할 수 있게 되었습니다.</p>\n<p>kops 원클릭 배포</p>\n<p>원클릭 배포를 위해서는 먼저 SSH 키페어, IAM 계정 키, S3 버킷이 필요합니다.</p>\n<p>위에서 말씀드린 것들은 1주차에서 생성하였으므로 이번 포스팅에서는 생략하겠습니다.</p>\n<p>먼저 cloudformation에서 사용할 yaml 파일이 필요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -O https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/K8S/kops-oneclick.yaml</code></pre></div>\n<p>해당 파일을 다운받았다면 아래 명렁어를 통하여 배포해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws cloudformation deploy --template-file kops-oneclick.yaml --stack-name mykops --parameter-overrides <span class=\"token assign-left variable\">KeyName</span><span class=\"token operator\">=</span>본인의 키페어 이름 <span class=\"token assign-left variable\">SgIngressSshCidr</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s ipinfo.io/ip<span class=\"token variable\">)</span></span>/32  <span class=\"token assign-left variable\">MyIamUserAccessKeyID</span><span class=\"token operator\">=</span>액세스키 <span class=\"token assign-left variable\">MyIamUserSecretAccessKey</span><span class=\"token operator\">=</span><span class=\"token string\">'시크릿키'</span> <span class=\"token assign-left variable\">ClusterBaseName</span><span class=\"token operator\">=</span><span class=\"token string\">'korwoo.net'</span> <span class=\"token assign-left variable\">S3StateStore</span><span class=\"token operator\">=</span><span class=\"token string\">'hellokorwoo'</span> <span class=\"token assign-left variable\">MasterNodeInstanceType</span><span class=\"token operator\">=</span>c5d.large <span class=\"token assign-left variable\">WorkerNodeInstanceType</span><span class=\"token operator\">=</span>c5d.large --region ap-northeast-2</code></pre></div>\n<p><img src=\"OneClick_Deploy.png\" alt=\"OneClick_Deploy.png\"></p>\n<p>5~10분 정도의 시간이 지나면 위에 화면과 같이 컨트롤플레인 및 워커노드가 모두 생성이 되어있는것을 확인하실 수 있습니다.</p>\n<p>다시한번 가시다님의 노고에 감사드립니다ㅜㅜ</p>\n<h2 id=\"2-aws-vpc-cni\" style=\"position:relative;\"><a href=\"#2-aws-vpc-cni\" aria-label=\"2 aws vpc cni permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. AWS VPC CNI</h2>\n<p><code class=\"language-text\">C</code>ontainer <code class=\"language-text\">N</code>etwork <code class=\"language-text\">I</code>nterface</p>\n<p>CNI는 공식 Github(<a href=\"https://github.com/containernetworking/cni\">https://github.com/containernetworking/cni</a>) 에 들어가서 내용을 확인하실 수 있습니다.\r\n간단하게 말하자면 컨테이너 간 네트워킹을 제어할 수 있는 플러그인을 만들기 위한 도구 정도라고 정리가 됩니다.</p>\n<p>지원되는 플러그인은 (<a href=\"https://kubernetes.io/docs/concepts/cluster-administration/addons/#networking-and-network-policy\">https://kubernetes.io/docs/concepts/cluster-administration/addons/#networking-and-network-policy</a>) 에서 확인 가능합니다.</p>\n<p>가시다님의 스터디에서 소개되는 내용은 AWS VPC CNI에 대해서 소개가 되었습니다.</p>\n<p>AWS VPC CNI의 강조되는 특징중 하나는 POD와 NODE의 네트워크 대역이 같다는 점 입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABSElEQVQoz42T266CQAxF+f8/Ux58MSFqlICKghcuAfGC1qwmJTPmPJwmDTNkzW53BwJx4na7Sdd1+nTj8/l4+77vpa5raZpG2rb1uOD9fsvj8ZDX6yW73U6SJJHz+SzDMIzvDWYPn+e5rNdr2e/3cjgcRlYFn8+nkGzSNFVwtVppdeJ+v6sICUd3m81GrterirFG2BOkApFlmURRJMvlUg8TPE2QbjlIh2VZqpPj8aji1lRgC2DsAhZFoYfohveuIPx2u1XudDrpmBD2BKlKInS5XBTgcrDrWqYAPAxdkay5RHIUtIuZzWYynU4lDEOpqkot20UYQ8znc+Umk4nO3WbtCVKBC8HOYrFQ+3TkCmKZRIR5x3Gs1s2hJ4hFbovOgBk2Rf4ShEMIBsueoH1DCNvQ7aDNF5DE1i9nzGjZPlrr4jfdv+Q/3BdonVHxtDvc3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Network_Diff\"\n        title=\"Network_Diff\"\n        src=\"/static/8f73f4f2e4e0f0a214625aa888864ed3/37523/Network_Diff.png\"\n        srcset=\"/static/8f73f4f2e4e0f0a214625aa888864ed3/e9ff0/Network_Diff.png 180w,\n/static/8f73f4f2e4e0f0a214625aa888864ed3/f21e7/Network_Diff.png 360w,\n/static/8f73f4f2e4e0f0a214625aa888864ed3/37523/Network_Diff.png 720w,\n/static/8f73f4f2e4e0f0a214625aa888864ed3/82b28/Network_Diff.png 931w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>같은 네트워크 대역대를 사용함으로서 노드와 파드간의 소통이 좀더 원활하다는 장점을 가지게 됩니다.</p>\n<p>간단하게 내용들을 확인해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl describe daemonset aws-node --namespace kube-system <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Image <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d <span class=\"token string\">\"/\"</span> -f <span class=\"token number\">2</span></code></pre></div>\n<p>명령어를 입력하게 되면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.777777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABJ0AAASdAHeZh94AAAAUUlEQVQI14WKsQoAIQxDXZWOitZaKtT//8UcdrjtuOFBkpfEurG3wd0x58QYA6oa+bLWin5h5ui1VphZeBF5/713pOMesrUGIkLO+ZdSyuf+AAUlMSPWxmd3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CNI_Info\"\n        title=\"CNI_Info\"\n        src=\"/static/6183460e8a33438ffc018aedcff3fb0b/37523/CNI_Info.png\"\n        srcset=\"/static/6183460e8a33438ffc018aedcff3fb0b/e9ff0/CNI_Info.png 180w,\n/static/6183460e8a33438ffc018aedcff3fb0b/f21e7/CNI_Info.png 360w,\n/static/6183460e8a33438ffc018aedcff3fb0b/37523/CNI_Info.png 720w,\n/static/6183460e8a33438ffc018aedcff3fb0b/302a4/CNI_Info.png 1080w,\n/static/6183460e8a33438ffc018aedcff3fb0b/1bba3/CNI_Info.png 1433w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음과 같이 CNI 정보를 확인하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws ec2 describe-instances --query <span class=\"token string\">\"Reservations[*].Instances[*].{PublicIPAdd:PublicIpAddress,PrivateIPAdd:PrivateIpAddress,InstanceName:Tags[?Key=='Name']|[0].Value,Status:State.Name}\"</span> --filters <span class=\"token assign-left variable\">Name</span><span class=\"token operator\">=</span>instance-state-name,Values<span class=\"token operator\">=</span>running --output table</code></pre></div>\n<p>명령어를 입력하면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQY01WMy26FMAxE2ROQyMuBJARKCVe8Llf9/2+bKpa66OJoPLZnqiMl5O1Avj44jgPP87C+Xi+c54l937FtG+77Zs05Y1kW1nVdef6j7CpDhL538EMP5xwcEav3ngOFeZ7Zl71SClJKdF2h47ltWzRNw1TGGD5KqeBDwDTNsJb42RiNGEd8LQtCiCAipDQhxgjnCHEcUfKlqK5rptL9N2R4IIcLOn6g/QkV3mhVgBA1pI3Q4w/UsENTguL7DWUGqJIzHk0juEwIgYr8ChMvaDdDUeKCooz1sBRgwgFFE6yL0ENmT8MEEy5oCv8KfwHA6YM5lOc4igAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Node_IP.png\"\n        title=\"Node_IP.png\"\n        src=\"/static/44982c1575e76de722c6c47e62f64de6/37523/Node_IP.png\"\n        srcset=\"/static/44982c1575e76de722c6c47e62f64de6/e9ff0/Node_IP.png 180w,\n/static/44982c1575e76de722c6c47e62f64de6/f21e7/Node_IP.png 360w,\n/static/44982c1575e76de722c6c47e62f64de6/37523/Node_IP.png 720w,\n/static/44982c1575e76de722c6c47e62f64de6/302a4/Node_IP.png 1080w,\n/static/44982c1575e76de722c6c47e62f64de6/bed7a/Node_IP.png 1437w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음과 같이 노드의 IP를 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pod -n kube-system -o<span class=\"token operator\">=</span>custom-columns<span class=\"token operator\">=</span>NAME:.metadata.name,IP:.status.podIP,STATUS:.status.phase</code></pre></div>\n<p>명령어를 입력하여 Pod의 IP를 확인해보도록합시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJklEQVQoz42SS4+CQBCEOZgAKh4QAgo4gOExg8rLi///h9WmOhmTTTa6h06Hmeqvq6dxtFJQRYm8btE0Dfq+R13XSNMUSZLgfD4jjmP5Vkq9z5l5x3w6neQsiiI42hg0bYOqVHJghUEQwPM8ZFmG6/UqRWxYFAVc18V2u4Xv+78ywzFaY1kWcUYnBG02G+x2OxHQ1TRNuFwu0FoLnID9fv9nOBTd73fcbjes64pxHFGWJY7HoxQSxHs67boOVVV9BlJEdwS2bStB4OFweAMfj4cA7ft+BFI0DIMU5XmOMAzfD02BBbKJMea7Q47MMZlZwDdiE+vSjkwQNV+BdMegeJ5nKeY2+RtwSRbI5fwLSDFHYn4+n3i9XuKQW+ZvQ6fcMoFs/G3LP4pF6glfQdmrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"POD_IP.png\"\n        title=\"POD_IP.png\"\n        src=\"/static/29d902bb840a0e6bd2d9677d08750a2e/37523/POD_IP.png\"\n        srcset=\"/static/29d902bb840a0e6bd2d9677d08750a2e/e9ff0/POD_IP.png 180w,\n/static/29d902bb840a0e6bd2d9677d08750a2e/f21e7/POD_IP.png 360w,\n/static/29d902bb840a0e6bd2d9677d08750a2e/37523/POD_IP.png 720w,\n/static/29d902bb840a0e6bd2d9677d08750a2e/302a4/POD_IP.png 1080w,\n/static/29d902bb840a0e6bd2d9677d08750a2e/07a9c/POD_IP.png 1440w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위에서 확인했던 노드의 Private IP 대역대와 파드의 IP 대역대가 일치하는것을 확인하실 수 있습니다.</p>\n<p>##3. 노드 간 파드 통신</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz0WR63KiQBSE8/5PltrUmqirsqKCXAQGkeE6MDB8W2DWdNX5M9Wn53T3m+/7+L6H414RiUDKgrZVJIngkUvqukEIQRiGuK6L47hEcUwuC+qmJRUpeS7puo4Zb3xDFhW7ry9uYUTVdHz83nC6eFR1jRnH/zSCW8L7r0+8IEYWNYfNGs8P6Xv9FJymickYZFlz2lnEsaAoa+xLQHBLKcuKvu+ZecYY0kxyvASkd4msmmUn8EK6vn8KbjZbLMvCDxKOqw1pnKB6jWX7i6BSLe71ysw7WBaJyDjYHlle0rQK+3NNHInl00VwdzgSJ3cGbWiKiiaJGIcBPTwtzNm4Xsh2vl5kr7fRGFSWoWTOBGj9bdn3A7KHfGVkVAuqRsqGKLpTliVxkuI41xfPTBNMhkE+aHu9lNK27VNQlu1ybqc69DBwti9sV2uOJ4+P1Z4sLxjGkX4Ylpmzmvnns8tu/YeTG/G++ruUugj2+qfBGc7lxmG9R2V3UA1jXaGr8mfKAi1znL2F4waYCUbDYptp4h/gkV4Q3J4lbgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Node&amp;Pod\"\n        title=\"Node&amp;Pod\"\n        src=\"/static/4c44c334b2ddbc4d1517b4c3ff673298/37523/Node%26Pod.png\"\n        srcset=\"/static/4c44c334b2ddbc4d1517b4c3ff673298/e9ff0/Node%26Pod.png 180w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/f21e7/Node%26Pod.png 360w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/37523/Node%26Pod.png 720w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/76823/Node%26Pod.png 1038w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlUlEQVQY012QWw7FIAhEu/9l9rPW2qh9WXWaQ2Jyc0lwBAcYmUopwu/71rIs2vddWM5Z67paDM7zrG3bFGO0+HkeXddlOThgCEHT+746z9OS3ntDyOTA3rtaa6q1atj/Hc7AST9GIUpxph/HYUpBlKWUzMnxjsOlDmHWkGNMQh0F48vEEClCPauhCauBxxDnnK1grOcDNhE2VAMutwYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pod_Commu\"\n        title=\"Pod_Commu\"\n        src=\"/static/7674f1355507182fbefd3849981e31d7/37523/Pod_Commu.png\"\n        srcset=\"/static/7674f1355507182fbefd3849981e31d7/e9ff0/Pod_Commu.png 180w,\n/static/7674f1355507182fbefd3849981e31d7/f21e7/Pod_Commu.png 360w,\n/static/7674f1355507182fbefd3849981e31d7/37523/Pod_Commu.png 720w,\n/static/7674f1355507182fbefd3849981e31d7/38124/Pod_Commu.png 953w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>파드간 통신 흐름 : 별도의 오버레이 통신 기술 없이, VPC Native 하게 파드간 직접 통신이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f ~/pkos/2/netshoot-2pods.yaml</code></pre></div>\n<p>먼저 위 명령어를 통해 테스트용 POD를 배포해주도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.444444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeUlEQVQI1z2OSwrDIABEs1Vj0NaqsTZ+caHk/seboIsuBgaG95jt634woSLGgJwzSikIIeC6LpznCeccGGMQQkApBUIIKKXgnP93rfXK7JsxGp/3C7VWeO8hpcRxHEs8gRgjUkqw1mKMgd477vteW2ttifZ9X2cm/wAg5zQY9TlbDAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"get_pod.png\"\n        title=\"get_pod.png\"\n        src=\"/static/055537801416ac118a5bfdf851ab21af/37523/get_pod.png\"\n        srcset=\"/static/055537801416ac118a5bfdf851ab21af/e9ff0/get_pod.png 180w,\n/static/055537801416ac118a5bfdf851ab21af/f21e7/get_pod.png 360w,\n/static/055537801416ac118a5bfdf851ab21af/37523/get_pod.png 720w,\n/static/055537801416ac118a5bfdf851ab21af/302a4/get_pod.png 1080w,\n/static/055537801416ac118a5bfdf851ab21af/daed9/get_pod.png 1426w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>배포한 POD를 보면 각각 다른 Node에 배포가 되어 있는것을 확인할 수 있습니다.</p>\n<p>이때 이 POD 끼리의 통신을 테스트해보도록 하겠습니다.</p>\n<p>먼저 각 워커 노드에 접속하여</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$W1PIP</span>\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$W2PIP</span></code></pre></div>\n<p><code class=\"language-text\">  </code>\r\n<code class=\"language-text\">  </code></p>\n<p>아래 명령어를 통하여 패킷 덤프를 확인하는 명령어를 실행시켜 두도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tcpdump -i any -nn icmp\r\n<span class=\"token function\">sudo</span> tcpdump -i ens5 -nn icmp\r\n<span class=\"token function\">sudo</span> tcpdump -i ens6 -nn icmp</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">POD1</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod pod-1 -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>.status.podIP<span class=\"token punctuation\">}</span><span class=\"token variable\">)</span></span>\r\n<span class=\"token assign-left variable\">POD2</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod pod-2 -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>.status.podIP<span class=\"token punctuation\">}</span><span class=\"token variable\">)</span></span>\r\nkubectl <span class=\"token builtin class-name\">exec</span> -it pod-1 -- <span class=\"token function\">ping</span> -c <span class=\"token number\">2</span> <span class=\"token variable\">$POD2</span></code></pre></div>\n<p>pod 1 shell 에서 pod2 로 ping 테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl <span class=\"token builtin class-name\">exec</span> -it pod-2 -- <span class=\"token function\">ping</span> -c <span class=\"token number\">2</span> <span class=\"token variable\">$POD1</span></code></pre></div>\n<p>pod 2 shell 에서 pod1 로 ping 테스트</p>\n<p>먼저 any 에서의 패킷 덤프는 확인이 되었습니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABS0lEQVQoz02Sx47CQBBEfUSICxLBeQk2DoyNAwLt/v9/1eq1NJYPrelQU1VtT5C5VHEdKWpCxW2kpIuUlz9q6kZFWagoCmVZpsvlovv9bvn5fFYURTqdTtrtdhabzUbb7VZB73oR8zCrrVq5xmkaRrnO6fF4qKoq1XWttm0tnHPq+9567/fb5kmSmGCapgoA1U2t379fAwF4vV7mDMLn82kk9IdhWOqmaYyYPtjP52OkQVmWtgpDBuSI3G43Xa/XpUcgSA0ZM4/L89xyzgAQTuZ5XhziAiBi9Kjpd11nWB84RQhnzIyQJuzf79eUIWA1//3WK47jaBfZhvk0TYZHnByegAFO/Hcj9w5R98TMuEDtV1079PmyMupcXK8Cif/Lvs+JWwhx6gkxgRlb+XA42K8/Ho8WcRzbGyNfn7y9MAztHfra3+HJ7Pd7/QMOEgEQwKacuwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcpdump_any.png\"\n        title=\"tcpdump_any.png\"\n        src=\"/static/75e22e2353f5bf36b48572b7ffddad8b/37523/tcpdump_any.png\"\n        srcset=\"/static/75e22e2353f5bf36b48572b7ffddad8b/e9ff0/tcpdump_any.png 180w,\n/static/75e22e2353f5bf36b48572b7ffddad8b/f21e7/tcpdump_any.png 360w,\n/static/75e22e2353f5bf36b48572b7ffddad8b/37523/tcpdump_any.png 720w,\n/static/75e22e2353f5bf36b48572b7ffddad8b/302a4/tcpdump_any.png 1080w,\n/static/75e22e2353f5bf36b48572b7ffddad8b/d93d9/tcpdump_any.png 1243w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음 ens5에서의 패킷 덤프또한 확인이 되었습니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA20lEQVQY0z2QyRKDIBBEPapHD0ailiuySdAD+f8/61RPlTl0NUzDm4Gi92+8ncLLtlC+gwovDHqENQ760Nj3HeM4YpomrOsq3nUdlFJomgZlWaKua1RVJSqij/DGI51J3B0O6ZMQzgDvPZxz0FrDWosQAo7jQIzxX2/bVjQMA/q+RxE/USbJ3wznHYw1SFeSw7xMyAO47xvneYqYX9cljbjOOcuZwhgjz0opCYAhIdu2iZg/lzgx93RmBNOXZfmvC3Zn4YHwnwhgjWKzB84694Qz40TzPMu/sgn9B+6pjmNpwf+TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcpdump_ens5\"\n        title=\"tcpdump_ens5\"\n        src=\"/static/e82dd90aa0f24c71e1ab89eb6585c705/37523/tcpdump_ens5.png\"\n        srcset=\"/static/e82dd90aa0f24c71e1ab89eb6585c705/e9ff0/tcpdump_ens5.png 180w,\n/static/e82dd90aa0f24c71e1ab89eb6585c705/f21e7/tcpdump_ens5.png 360w,\n/static/e82dd90aa0f24c71e1ab89eb6585c705/37523/tcpdump_ens5.png 720w,\n/static/e82dd90aa0f24c71e1ab89eb6585c705/302a4/tcpdump_ens5.png 1080w,\n/static/e82dd90aa0f24c71e1ab89eb6585c705/91608/tcpdump_ens5.png 1251w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하지만 ens6에서는 패킷 덤프가 확인이 되지 않습니다.\r\npod간의 통신은 무조건 첫번째 ENI로만 빠져나가게끔 설정이 되어 있어서 ens6 로의 패킷 덤프는 확인이 되지 않는것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQY0z3NwXKCMABFUXZgEpRYcShMCBWMQRTQwdHa//+u22kWXdx5u/MiVcWoOkHWMeZWYZeabZFjqgJ/zHFtju/2FLnAWhsqyzKsMYYsy0jTFKUUUkoiXTp00aI/HR9NxVZrRCLZrFe4JqFvE4YuwTUrbvOF9/uHeZ653+8h733YYRgCHu1OCzt3Y9+/WR8qRBajpCJNFV9GcO4Ep4OkszFn3/B6fTONI9frlWmaArgsS0DzPCfSxqGrlm3tWds9aiOQQpFtJEcr6FuBawSdXTFPPc/ni3Ec//sDH49HONBa8wvtl2yAjtxjZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ENI.png\"\n        title=\"ENI.png\"\n        src=\"/static/3754d512ee4bc3220c94e9d34cf19588/37523/ENI.png\"\n        srcset=\"/static/3754d512ee4bc3220c94e9d34cf19588/e9ff0/ENI.png 180w,\n/static/3754d512ee4bc3220c94e9d34cf19588/f21e7/ENI.png 360w,\n/static/3754d512ee4bc3220c94e9d34cf19588/37523/ENI.png 720w,\n/static/3754d512ee4bc3220c94e9d34cf19588/302a4/ENI.png 1080w,\n/static/3754d512ee4bc3220c94e9d34cf19588/dcccd/ENI.png 1127w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"4-pod에서-외부-통신\" style=\"position:relative;\"><a href=\"#4-pod%EC%97%90%EC%84%9C-%EC%99%B8%EB%B6%80-%ED%86%B5%EC%8B%A0\" aria-label=\"4 pod에서 외부 통신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Pod에서 외부 통신</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQY00VR/WvCMBD1//8jxn6U4RxDpkOdU5xTJ0wHk7FPEJyzLkmbpk3T9OONntYdPJK73L33jlSstYjjGEXcPT+iNmwjiDTlOgzRnY1w0qyh2rvCaauOi2GH3lbOBmeDazQmfTSmfVT7LTx9vaJijEGBQCmstxu8fL4jTVOUEScWTHnQ1sANffg6pHqSJmDSBfc9yFDBcTmi2KBSDhYkNrFwdjswxiCEABcCggu4nodIR1BKAXmOLMv2Z54dhdNsf6/keY4CpWqS/bsrQ5sIodZwpSQxzjkE5yT+yxjV1ME5OSwJS3Jyay2B1rYxYmMQmQhBEBCZlBJaa8oL98V2R8LsQDh7W6Laa+J7+0MDvpQYzB/oQxr3tzgftnGzmFLvmjm4HPfQmY/RXUxQH3WxXH3gD/BNw0drQQsWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pod_ExtCommu\"\n        title=\"Pod_ExtCommu\"\n        src=\"/static/bf19c100540a56b83c6f5d90db90acec/37523/Pod_ExtComm.png\"\n        srcset=\"/static/bf19c100540a56b83c6f5d90db90acec/e9ff0/Pod_ExtComm.png 180w,\n/static/bf19c100540a56b83c6f5d90db90acec/f21e7/Pod_ExtComm.png 360w,\n/static/bf19c100540a56b83c6f5d90db90acec/37523/Pod_ExtComm.png 720w,\n/static/bf19c100540a56b83c6f5d90db90acec/d7abb/Pod_ExtComm.png 959w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>파드에서 외부 통신 흐름 : iptable에 SNAT을 통하여 노드의 eth0 IP로 변경되어 외부와 통신합니다.</p>\n<p>VPC CNI의 External source network address translation 설정에 따라, 외부 통신 시 SNAT 하거나 혹은 SNAT 없이 통신 가능합니다.</p>\n<p>작업용 EC2에서 pod-1 shell에서 외부로 ping을 날려보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl <span class=\"token builtin class-name\">exec</span> -it pod-1 -- <span class=\"token function\">ping</span> -c <span class=\"token number\">1</span> www.google.com</code></pre></div>\n<p>다음 Pod-1에 접속해서 tcpdump를 해주겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tcpdump -i any -nn icmp</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVQoz22R226DMBBEeUWgXCAmYMAYm6sDqdT//7epZqugNOrDapG9c5hZR6PW0LVBaXp459D3Pay1aNtWSmuNy+WCPM9xvV6RpqmUUkruiqKQ77qu5T7y3kOpAqooME0TqqrC6XSSQQ51XSfgpmmwLIsUNcYYOSOcnTP8joK18H6GHRc8HgHruooghCA1z7OcUUDnBI3jCOecOIvjWEBJkkhFum0weAfX/w5TyNhlWR5xGJexKXiJX9HfYeJwcw5r2BG+vrFtG/Z9P/rz+TwcE3673ZBl2fGz8/n8By4OrTGwvUNruuNBuLf33bHf73cBsfMxWIR/uo0I4Z6WecYwDOKGi39BKSSIsT/F/8X/AQXNtXAFFn4aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcpdump_out.png\"\n        title=\"tcpdump_out.png\"\n        src=\"/static/4856f17c7f26d3939046356c461df536/37523/tcpdump_out.png\"\n        srcset=\"/static/4856f17c7f26d3939046356c461df536/e9ff0/tcpdump_out.png 180w,\n/static/4856f17c7f26d3939046356c461df536/f21e7/tcpdump_out.png 360w,\n/static/4856f17c7f26d3939046356c461df536/37523/tcpdump_out.png 720w,\n/static/4856f17c7f26d3939046356c461df536/302a4/tcpdump_out.png 1080w,\n/static/4856f17c7f26d3939046356c461df536/07a9c/tcpdump_out.png 1440w,\n/static/4856f17c7f26d3939046356c461df536/95e59/tcpdump_out.png 1460w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>tcpdump 에서 확인해보면 POD1의 IP 에서 외부로의 트래픽을 확인하실 수 있습니다.</p>\n<p>작업용 EC2에서 해당 명령어를 입력하여 작업용 EC2에서 외부와 통신할 때 사용하는 public IP 를 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl <span class=\"token builtin class-name\">exec</span> -it pod-1 -- <span class=\"token function\">curl</span> -s ipinfo.io/ip <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span></code></pre></div>\n<p>다음은 워커노드에서 아래 명령어를 입력하여 public IP를 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s ipinfo.io/ip <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span></code></pre></div>\n<p>흥미로운 점은 2개의 Public IP가 같다는 점을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz0WR63KiQBSE8/5PltrUmqirsqKCXAQGkeE6MDB8W2DWdNX5M9Wn53T3m+/7+L6H414RiUDKgrZVJIngkUvqukEIQRiGuK6L47hEcUwuC+qmJRUpeS7puo4Zb3xDFhW7ry9uYUTVdHz83nC6eFR1jRnH/zSCW8L7r0+8IEYWNYfNGs8P6Xv9FJymickYZFlz2lnEsaAoa+xLQHBLKcuKvu+ZecYY0kxyvASkd4msmmUn8EK6vn8KbjZbLMvCDxKOqw1pnKB6jWX7i6BSLe71ysw7WBaJyDjYHlle0rQK+3NNHInl00VwdzgSJ3cGbWiKiiaJGIcBPTwtzNm4Xsh2vl5kr7fRGFSWoWTOBGj9bdn3A7KHfGVkVAuqRsqGKLpTliVxkuI41xfPTBNMhkE+aHu9lNK27VNQlu1ybqc69DBwti9sV2uOJ4+P1Z4sLxjGkX4Ylpmzmvnns8tu/YeTG/G++ruUugj2+qfBGc7lxmG9R2V3UA1jXaGr8mfKAi1znL2F4waYCUbDYptp4h/gkV4Q3J4lbgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Node&amp;Pod\"\n        title=\"Node&amp;Pod\"\n        src=\"/static/4c44c334b2ddbc4d1517b4c3ff673298/37523/Node%26Pod.png\"\n        srcset=\"/static/4c44c334b2ddbc4d1517b4c3ff673298/e9ff0/Node%26Pod.png 180w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/f21e7/Node%26Pod.png 360w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/37523/Node%26Pod.png 720w,\n/static/4c44c334b2ddbc4d1517b4c3ff673298/76823/Node%26Pod.png 1038w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 그림을 다시가져와 설명하자면\r\nPOD가 외부로 인터넷을 사용할 때 POD의 IP가 워커노드의 ENI0로 NAT가 되고\r\nENI0(192.168.1.64) -> 그림상 192.168.1.64로 표시되어 있지만 해당 실습에서는 다른 IP주소를 가지고 있습니다.\r\nENI0가 외부로 통신할 때에는 Public IP가 인터넷 게이트웨이를 통해 NAT가 되는 구조입니다.</p>\n<h2 id=\"5-노드에서-pod-생성갯수-제한\" style=\"position:relative;\"><a href=\"#5-%EB%85%B8%EB%93%9C%EC%97%90%EC%84%9C-pod-%EC%83%9D%EC%84%B1%EA%B0%AF%EC%88%98-%EC%A0%9C%ED%95%9C\" aria-label=\"5 노드에서 pod 생성갯수 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 노드에서 POD 생성갯수 제한</h2>\n<p>아래의 명렁어를 통해 EC2 사이즈 별 생성 가능한 POD의 갯수를 확인해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws ec2 describe-instance-types --filters <span class=\"token assign-left variable\">Name</span><span class=\"token operator\">=</span>instance-type,Values<span class=\"token operator\">=</span>c5.* <span class=\"token punctuation\">\\</span> --query <span class=\"token string\">\"InstanceTypes[].{Type: InstanceType, MaxENI: NetworkInfo.MaximumNetworkInterfaces, IPv4addr: NetworkInfo.Ipv4AddressesPerInterface}\"</span> <span class=\"token punctuation\">\\</span> --output table</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVQoz5WQy3KEIBBFXSsPaUB8gaUYxUxlkU3m/7/sTsmUWY+LU7eh6QNFEQePbkmI6xeO48C6rgghYNu2XKeUEGPM6zOXZcG+75lzb57n/7Nnv/AhIO0bjiPl4RPn2izt+x5EBM45pJQQQuS86pOrd2XhvUeYpmxv2xbjOMA1FqquUVUVyrLM+SmFdSMa10FrC20s7PiAHb+hTQPBOaqKgbHPKZi0UGTBpIEiDRp+ocMfyA7g7H3rLaFQHcg4CNWAyMBMzwyZFpyz+0Jev1/IJUEpAvU/UN0Dda3yR98VvgClFaukrcnKQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"EC2_SIZE.png\"\n        title=\"EC2_SIZE.png\"\n        src=\"/static/4c045fef5ec7a933660702295241d464/37523/EC2_SIZE.png\"\n        srcset=\"/static/4c045fef5ec7a933660702295241d464/e9ff0/EC2_SIZE.png 180w,\n/static/4c045fef5ec7a933660702295241d464/f21e7/EC2_SIZE.png 360w,\n/static/4c045fef5ec7a933660702295241d464/37523/EC2_SIZE.png 720w,\n/static/4c045fef5ec7a933660702295241d464/302a4/EC2_SIZE.png 1080w,\n/static/4c045fef5ec7a933660702295241d464/07a9c/EC2_SIZE.png 1440w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>현재 제가 생성한 워커노드의 사이즈는 C5d.large 입니다.</p>\n<p>생성가능한 POD의 계산법은 ((MaxENI * (IPv4addr-1)) + 2) 입니다.</p>\n<p>즉 C5d.large의 경우\r\n((3*(10-1))+2) 즉 29개의 POD를 생성할 수 있습니다.</p>\n<p>아래의 명렁어를 통해 생성가능한 POD의 갯수를 직접 확인하실 수도 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl describe node <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Allocatable: -A6</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQoz51Sy26DMBD0lZcx5WEwGLUmHAohR6Ko+f/fmmpWbZRDD6GH0Xrt8Xh212pMNWz/AWM9uq5DCAHeezRNA2stxnHEMAzo+172ySHatn3skUM+oT47h6GooHWOoihQVZUc1HUteZ7n0FoL/lozElmWCdT1dsN6PmNdV3mJrn5fpos4jpEkyctQX/c7ptNJBHjZOYdpmiSSkKbpIajROWRRjCiKRLAsS3FpjBHCUVEV6gbevEH/9OC5T8wPC26XC95DwDzPMk2WyvK55mDo+pDgvu9YlkW+Cx1xwhSl2HPJrzpV27Y9SmMfOVmKM/5H8BvdPtlj//lHNQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MAX_POD.png\"\n        title=\"MAX_POD.png\"\n        src=\"/static/532e5ec1bdca2ab0becc2928b132e9a5/37523/MAX_POD.png\"\n        srcset=\"/static/532e5ec1bdca2ab0becc2928b132e9a5/e9ff0/MAX_POD.png 180w,\n/static/532e5ec1bdca2ab0becc2928b132e9a5/f21e7/MAX_POD.png 360w,\n/static/532e5ec1bdca2ab0becc2928b132e9a5/37523/MAX_POD.png 720w,\n/static/532e5ec1bdca2ab0becc2928b132e9a5/e2e58/MAX_POD.png 1069w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그렇다면 여기서 POD의 갯수가 생성가능한 POD의 갯수를 초과했을 때 어떻게 생성 가능한 POD의 최대 갯수를\r\n늘릴 수 있을것인지에 대해 확인해보도록 하겠습니다.</p>\n<p>아래 명령의를 통하여 Test용 POD를 배포해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f ~/pkos/2/nginx-dp.yaml</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVQY052QRw6FMBBDs6VG9F6EgAVL7n83f72RwgH+wpoW2zNxbduq6zqN46iQ932vpmmUZZm89xbLsrQ8TdMPcRxrGAZDVVWm4c7z1LqumqZJ931r33cTBHVd24wYSPM8W40hJkVRWI+cvnuex0QQft9Xx3GYE2Q22rbNHiZJYsCUOViW5TOFd12XHETWx4lz8zy3EwH9UIczwxeAMCMCZo5/wJkYRdG3yT9A4wdk+XpTL+NZqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"POD_WATCH.png\"\n        title=\"POD_WATCH.png\"\n        src=\"/static/bc401920973e7a174795d609b2edac4d/37523/POD_WATCH.png\"\n        srcset=\"/static/bc401920973e7a174795d609b2edac4d/e9ff0/POD_WATCH.png 180w,\n/static/bc401920973e7a174795d609b2edac4d/f21e7/POD_WATCH.png 360w,\n/static/bc401920973e7a174795d609b2edac4d/37523/POD_WATCH.png 720w,\n/static/bc401920973e7a174795d609b2edac4d/302a4/POD_WATCH.png 1080w,\n/static/bc401920973e7a174795d609b2edac4d/07a9c/POD_WATCH.png 1440w,\n/static/bc401920973e7a174795d609b2edac4d/fe720/POD_WATCH.png 1448w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>POD가 정상적으로 기동되고 있는것을 확인하실 수 있습니다.</p>\n<p>그렇다면 POD의 갯수를 천천히 증가시켜보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx-deployment --replicas<span class=\"token operator\">=</span><span class=\"token number\">10</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz3WSR27FMAwFvXbvvfdy//MxGAYyguRnIZCi6OF7kq15nqWqKinLUvI815xYFIUkSaIriiLdx3EsQRCI7/ti27bmdV1LGIbaw7l1nqccxyHDMMi+7/I8j/R9L2maakPbtgoDkmWZAhhCnXP25F3Xad0Csq6rNE2jYAaglmYmU0cxiqiZYUQAOJqmSXDKYAVu2/YCr+t6VfwEOo6jNQNEERHgOI4KpO8FIvsT0FhGobFK5IoA4gaFuHwV/rZM/p9C1BiF3OkfhQCA8iHq7vv+aNkoNMOwbv4KgMuyfCvkkMv2PO99enLXdXXxuuxRyN6cEc2ix/R9AbeFzQPc5X+XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"POD_WATCH2.png\"\n        title=\"POD_WATCH2.png\"\n        src=\"/static/9a121df361351d8b8cd13e383d9dd077/37523/POD_WATCH2.png\"\n        srcset=\"/static/9a121df361351d8b8cd13e383d9dd077/e9ff0/POD_WATCH2.png 180w,\n/static/9a121df361351d8b8cd13e383d9dd077/f21e7/POD_WATCH2.png 360w,\n/static/9a121df361351d8b8cd13e383d9dd077/37523/POD_WATCH2.png 720w,\n/static/9a121df361351d8b8cd13e383d9dd077/302a4/POD_WATCH2.png 1080w,\n/static/9a121df361351d8b8cd13e383d9dd077/07a9c/POD_WATCH2.png 1440w,\n/static/9a121df361351d8b8cd13e383d9dd077/16068/POD_WATCH2.png 1451w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아직 POD 생성가능 갯수를 넘기지는 않았기에 별다른 이슈없이 POD 가 증가되었습니다.</p>\n<p>그렇다면 MAX POD를 넘어선갯수로 POD를 증가시켜 보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx-deployment --replicas<span class=\"token operator\">=</span><span class=\"token number\">40</span></code></pre></div>\n<p>다음 아래의 명령어를 통하여 Pending된 POD와 해당 원인에 대해 조회할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Pending\r\nkubectl describe pod <span class=\"token operator\">&lt;</span>Pending 파드<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Events: -A5</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.111111111111107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVQY021P23KEIBTzsa5OvQGirALe1xZXrf3/T0vnMLN9aR8ynBySEAI3L3CfGz62Hfv+xHVdcM7BWAtZlviqFPpaIc0y1HUNKSXCMEQcx4ii6A+C1Tkcx+HDzvP0gdu2odUaLM/xzUr0ssLb7QbOuQ99Bf6H4Nm06MyAZlgwDgMe6wpjDLTWqKTEou4w6g4uBJRSaNsWQggfXJaln+khxhiyLENgawXBuRfSMkkSLyQD8fc0RcEY+r5HURRI09QbSUc8z3N/vuZAG4Ou6zBNE+Z59kYCcWo6juPvzlrrNaSnOyrRNI3/DbWn3Q/FroOM9PFc+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"POD_Pendding.png\"\n        title=\"POD_Pendding.png\"\n        src=\"/static/679eaf44b813df148ec5724906b7638c/37523/POD_Pendding.png\"\n        srcset=\"/static/679eaf44b813df148ec5724906b7638c/e9ff0/POD_Pendding.png 180w,\n/static/679eaf44b813df148ec5724906b7638c/f21e7/POD_Pendding.png 360w,\n/static/679eaf44b813df148ec5724906b7638c/37523/POD_Pendding.png 720w,\n/static/679eaf44b813df148ec5724906b7638c/302a4/POD_Pendding.png 1080w,\n/static/679eaf44b813df148ec5724906b7638c/07a9c/POD_Pendding.png 1440w,\n/static/679eaf44b813df148ec5724906b7638c/ab3e6/POD_Pendding.png 1441w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>해당 이슈를 해결하기 위한 아주 간단한 방법은\r\nEC2의 성능을 업그레이드 해주어 자본주의의 참맛을 보여주면 됩니다.</p>\n<p>자본주의의 참맛을 보여주기 어렵다면 다른방법을 찾아봐야 합니다.</p>\n<p>해당 방법은 가시다님이 참조해주신 블로그\r\n<a href=\"https://blog.psnote.co.kr/186\">https://blog.psnote.co.kr/186</a>\r\n<a href=\"https://trans.yonghochoi.com/translations/aws_vpc_cni_increase_pods_per_node_limits.ko\">https://trans.yonghochoi.com/translations/aws_vpc_cni_increase_pods_per_node_limits.ko</a>\r\n에서 안내해준 방법을 참고하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx-deployment --replicas<span class=\"token operator\">=</span><span class=\"token number\">0</span></code></pre></div>\n<p>먼저 replicas를 0으로 조절해줍니다.(Deployment를 지우는것이 아닙니다.)</p>\n<p>다음 아래 명령어를 통해 limitrange를 제거해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl delete limitranges limits</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVQY01VQy46EMAzjylvALNDhWVrawtAOqx2hPfD/v+VVetuDlTqJ7LjB77ZjznI8ucb6vqDMDikElFKYpgmMMXRd59/jOP7jQgjUdY0wDBFFEeI4RuCsxdfjAcae2F8HjDHgnKPvewzDgKqqkOc5sixDmqa+EpIk8ZxmRVGgLEvfDz6LxE8/gm8nOn1CbS/Y48B937DWom1bfxVdtCyLNyJDMpNSYl1Xv0N9Eg0+ZoObObT9xmwc7PuE0RrXdcE552ORMH0BiTRN40EmxKlSZAJF/gNKQ2tXv/vgwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"limit_range.png\"\n        title=\"limit_range.png\"\n        src=\"/static/79dcb12f3a86b8f13244da83ad007fcf/37523/limit_range.png\"\n        srcset=\"/static/79dcb12f3a86b8f13244da83ad007fcf/e9ff0/limit_range.png 180w,\n/static/79dcb12f3a86b8f13244da83ad007fcf/f21e7/limit_range.png 360w,\n/static/79dcb12f3a86b8f13244da83ad007fcf/37523/limit_range.png 720w,\n/static/79dcb12f3a86b8f13244da83ad007fcf/cc488/limit_range.png 928w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음 아래 명령어를 통해 POD를 증가시켜 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx-deployment --replicas<span class=\"token operator\">=</span><span class=\"token number\">50</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVQI1z2OQWuEMBhEPbvarlQLIfliNFE2Rra2kUIvxf//p17RQ08Dw8ybKZIbcPUr91bxohztu8IYjfcerTXOOWKMzPPMOI6sKdFby7IsTNOEiFDXNWVZUlUVxdfzg1EEIxYZ/KUn5Awrpa5CCIGu65jCxOA99/aNR4yXdw5Zay/Y7XajyI9IHkbWbWf9/mV9frLvmeM4yDmzbdv/My3CrA0/YSYYQfoeo/UFTCnRNA1/cl1S2IW4StgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MAX_POD2.png\"\n        title=\"MAX_POD2.png\"\n        src=\"/static/86d59b41a7d5c7fe097a66c74a8d4f6a/37523/MAX_POD2.png\"\n        srcset=\"/static/86d59b41a7d5c7fe097a66c74a8d4f6a/e9ff0/MAX_POD2.png 180w,\n/static/86d59b41a7d5c7fe097a66c74a8d4f6a/f21e7/MAX_POD2.png 360w,\n/static/86d59b41a7d5c7fe097a66c74a8d4f6a/37523/MAX_POD2.png 720w,\n/static/86d59b41a7d5c7fe097a66c74a8d4f6a/82b28/MAX_POD2.png 931w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>POD의 최대갯수가 49개까지 늘어났습니다만… 아직 목표인 100대 이상에는 모자릅니다.\r\n다시 replicas를 0으로 조절해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx-deployment --replicas<span class=\"token operator\">=</span><span class=\"token number\">0</span></code></pre></div>\n<p>수정하기 전에 Node의 External IP 주소를 확인해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get node -owide</code></pre></div>\n<p>저희가 해볼 방법은 kops cluster 를 수정하는 방법입니다.\r\n이 과정에서 노드에 대한 rolling update를 진행해 줄것인데 Node가 재배포되가 될것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjklEQVQI1zWOSw6EIBBEOQIaQVAHBggysMP7360m1YmLF2i6Pqj8CfiGiFQbUkporWGMIez7Du89rutCzhnOOdEYY4RSCrZtE12MEVprqBAjfr3jmRO9d1nUWnHfN0IIYqTphQUMWNdVipZlgbUW53lKoWILfzPnIydnBhIaKGIAofE4Dnln+FtIDe/c/QEbhFBRe6BnpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"node_externalIP1.png\"\n        title=\"node_externalIP1.png\"\n        src=\"/static/d4d4d062dd2c123151a536aaf59ea452/37523/node_externalIP1.png\"\n        srcset=\"/static/d4d4d062dd2c123151a536aaf59ea452/e9ff0/node_externalIP1.png 180w,\n/static/d4d4d062dd2c123151a536aaf59ea452/f21e7/node_externalIP1.png 360w,\n/static/d4d4d062dd2c123151a536aaf59ea452/37523/node_externalIP1.png 720w,\n/static/d4d4d062dd2c123151a536aaf59ea452/302a4/node_externalIP1.png 1080w,\n/static/d4d4d062dd2c123151a536aaf59ea452/07a9c/node_externalIP1.png 1440w,\n/static/d4d4d062dd2c123151a536aaf59ea452/8b640/node_externalIP1.png 1454w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음 kops cluster 를 수정해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kops edit cluster</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABJ0AAASdAHeZh94AAAByElEQVQoz6XR227aMBjA8SC1DbHjJBAndjgkjnMgRyhpoYNm6qS16s32CHsStCIkrvKgiHuuIdM0saKJdpr21yff/WxZn1D27bskGdp2SMiA0MAw7wiVIZSPIYREUeScb7fbuq73+319TCj7zvNs/jyZPt3efvvydWQ7/4A9x7nJ85s8T3yfdTp900QAQAgRQn/HbV13GCOUtnRd0TSIkI6xqqqSJIHjLW/i8XhcluXsw+x+Pv/08BANBsM8Hw2HaZpy1+WcM8YMw3Bd9wzmnhelaZxlXhj+njCOTctqGxgipKpqs9k8/3Loup8nk4+j66TXswC0Va2LlJ6iEEmiAJjw3T9nhnmfZSljgWVxSh2MfUoZxj4hnNLMJJaiXFxdeWexL8t9hMbhIHNYyf2ibyeOE/V6OXMj2yk63a6iXIjieXwdx0/T6eNkOomigrHU6uSMxd1uZtsBIQQAVVHEtzC1rEGShHHcxvhSkpoQNiGU5F+nDN7fMyXU930DY03T2q1Wu/UzTVVfR9MAAEEQnMGmaRZFoes6OgYhFE5qNBqCIBBCNpvNn3i9XldVtVqtvp/0ctJyuVwsFlVV7Xa7uq4Ph8Mrrv+jH84uf1wi6pASAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kops_edit.png\"\n        title=\"kops_edit.png\"\n        src=\"/static/458ef2f22e3c6ed321038d0308d1ff3a/37523/kops_edit.png\"\n        srcset=\"/static/458ef2f22e3c6ed321038d0308d1ff3a/e9ff0/kops_edit.png 180w,\n/static/458ef2f22e3c6ed321038d0308d1ff3a/f21e7/kops_edit.png 360w,\n/static/458ef2f22e3c6ed321038d0308d1ff3a/37523/kops_edit.png 720w,\n/static/458ef2f22e3c6ed321038d0308d1ff3a/4c42d/kops_edit.png 896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 그림의 표시된 부분을 수정해준 뒤 저장해주도록 하겠습니다.\r\n이때 들여쓰기에 유의해주시길 바랍니다.\r\n저는 아래의 amazonvpc.env 부분을 수정할때 들여쓰기랠 해주지 않았어서 cluster를 수정했음에도 불구하고 저장이 되지 않는 이슈가 있었습니다..ㅜㅜ\r\n만약 cluster 수정에 성공하였다면 저장하였을때 약간의 로딩시간이 있고\r\n다시 kops edit cluster로 들어가서 저장된 내용을 확인해주셔야 합니다.</p>\n<p>수정이 성공적으로 되었다면 아래의 명령어를 통해 rolling update를 진행해 주도록 하겠습니다.\r\n대략 10분 정도의 시간이 소요될것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kops update cluster --yes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">5</span> <span class=\"token operator\">&amp;&amp;</span> kops rolling-update cluster --yes</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVQoz42S27KCMAxF+4ioyKhcRKA4chXw//8uzspMHDxP52FN2rTZSZq6rKilKCtpvJf7/S5lWUpVVbq+3W4/68vlIkmSSJqmcr1e5Xw+y+FwkP1+rxac97U0jdfAuq4VRLkcRdEPx+NRQSAMwx8hE3ZkL4pCq7AKDfxbqBAQRdBAyMSd916aplGBx+Mh7IFK8bNu21bPSJjnuVrrCEsy/HEci1vXVd7vt3Rdp3aeZxnHUaZpkr7v1eIbhkGDaJ3ALafTSf1aIZcRpYplWb6C8Hq95Pl8fivmXYMg0DZ3u52ybR0cmRFBEBGqshbBnoO2sizTKSP8F6bOmbMB8BYE2IXtJBkC7WBpD7uduu3BoWp/a2sNMtuX+A8f/l7jiwPO1KQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rollingUpdate.png\"\n        title=\"rollingUpdate.png\"\n        src=\"/static/6069011ce3a561ff0483b664bbbaf121/37523/rollingUpdate.png\"\n        srcset=\"/static/6069011ce3a561ff0483b664bbbaf121/e9ff0/rollingUpdate.png 180w,\n/static/6069011ce3a561ff0483b664bbbaf121/f21e7/rollingUpdate.png 360w,\n/static/6069011ce3a561ff0483b664bbbaf121/37523/rollingUpdate.png 720w,\n/static/6069011ce3a561ff0483b664bbbaf121/302a4/rollingUpdate.png 1080w,\n/static/6069011ce3a561ff0483b664bbbaf121/07a9c/rollingUpdate.png 1440w,\n/static/6069011ce3a561ff0483b664bbbaf121/9c6a1/rollingUpdate.png 1869w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiUlEQVQI1zVNSwqFMBBzXSyC9uOvtG5KXwW9/+nySMBFmMwkmQy9Vpwpo1wXev9h2zaEEOC9RykF67pq3/dd4C3GKE6Pc04ea63uw/M8eN8X930LKSWZlmVRYJom7eR8fByHgpwsJ885q4D60HtHaw21VoEGto3jiHmeYYzRcz7lztBXQFBj5tP/HGNNrf/LcfwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"node_externalIP2.png\"\n        title=\"node_externalIP2.png\"\n        src=\"/static/5b542d5b657eb1e54a420cd0a92087a6/37523/node_externalIP2.png\"\n        srcset=\"/static/5b542d5b657eb1e54a420cd0a92087a6/e9ff0/node_externalIP2.png 180w,\n/static/5b542d5b657eb1e54a420cd0a92087a6/f21e7/node_externalIP2.png 360w,\n/static/5b542d5b657eb1e54a420cd0a92087a6/37523/node_externalIP2.png 720w,\n/static/5b542d5b657eb1e54a420cd0a92087a6/302a4/node_externalIP2.png 1080w,\n/static/5b542d5b657eb1e54a420cd0a92087a6/07a9c/node_externalIP2.png 1440w,\n/static/5b542d5b657eb1e54a420cd0a92087a6/25be5/node_externalIP2.png 1893w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVQoz5VT24rCMBTsm9pW7f2StEldsQW3irAq6v//1yxzoN1lWaF9GJKQZM7MJMc5xSn6MIGuOwR5Da0V2rZFXdfI8xxVVWG/38vYNA2MMbLHtbVW1tzXWqMoCjg7Y3BsO9R5BlUWiOMYWZahLEvBer3GcrnEarV6i2HfdV04xlo8nk+cLxccj0eEYThWS9NUCH3fnwynthaffY8gDLHdbqUaLXVdJ0pZlQc9zxsvvZsLoU4y6ChG7Pmj7CAI5CDJhwsc/17+V+FOaXTGQicpkjRFFEVIkgRKKQEjmEL0Y9kYXG83sc0MmRsfgxkSg9rJhHyUr+sVSmtRRpv8DofDQch/ZzjJclWUqLIMG9cdM6TtwersDD9KhbZUUHzlIBAigv+RijebzTzLtmnweL1wOp/R9710B/8hwW6g2lmEbKf7/S4tRLLFYiEZsv24ZgxzLH8DJjoi6ZnoBcUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MAX_POD3.png\"\n        title=\"MAX_POD3.png\"\n        src=\"/static/03f391b78a3bea60d0cb806d934c62c6/37523/MAX_POD3.png\"\n        srcset=\"/static/03f391b78a3bea60d0cb806d934c62c6/e9ff0/MAX_POD3.png 180w,\n/static/03f391b78a3bea60d0cb806d934c62c6/f21e7/MAX_POD3.png 360w,\n/static/03f391b78a3bea60d0cb806d934c62c6/37523/MAX_POD3.png 720w,\n/static/03f391b78a3bea60d0cb806d934c62c6/84ee5/MAX_POD3.png 1076w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVQY03WPyQ6DMAxEObMeIYkTskJAiFKJ//+1qWKpXKoeRrbH8rNdbS5B5jdcSLiuF+77xrqu8N7jOA5IKSGEgDEGzrmnJiL2xnHENE1QSnGv0kJB2AQyM1KMiDHCWovzPDnPOXNd8gLUWqPrOtR1jaZpnvhVZSRB+gxFBjmvWJaFtxVQuWDbNoYUf55nhvd9z8Nt2/6o0kTQLkARIYQAax2/tO87xwIsr6SUGFyuHIbhL/ADwidpX+/rMewAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MAX_POD4.png\"\n        title=\"MAX_POD4.png\"\n        src=\"/static/4a5032fa8dd877fc2b42d644d1e3b541/37523/MAX_POD4.png\"\n        srcset=\"/static/4a5032fa8dd877fc2b42d644d1e3b541/e9ff0/MAX_POD4.png 180w,\n/static/4a5032fa8dd877fc2b42d644d1e3b541/f21e7/MAX_POD4.png 360w,\n/static/4a5032fa8dd877fc2b42d644d1e3b541/37523/MAX_POD4.png 720w,\n/static/4a5032fa8dd877fc2b42d644d1e3b541/302a4/MAX_POD4.png 1080w,\n/static/4a5032fa8dd877fc2b42d644d1e3b541/84f4d/MAX_POD4.png 1208w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>POD의 최대개수 증설이 성공적으로 되었습니다.</p>\n<h2 id=\"6-k8s-service\" style=\"position:relative;\"><a href=\"#6-k8s-service\" aria-label=\"6 k8s service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. K8S Service</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVQoz3WSW2vbQBCF/e/7nOf+iPYhcTCkUGjpDdyapApOsRNXlmxptbL2Iu2uY0tfkcBtCcmBgZnzcObMZXRwDXtjcFrjlMJZS6UUqtqhlMIYg9Yaay1aK2pr6bqO59Dzo+/TKUkc9yXt8Uh0PePr50+ExwNt2w5CURShtcEYS9M4Qgg45/E+4LwneP+3yWg8HvNjNqMv90co372mvDyjDTW0x0FAyB2FLMhEQZwkKG0RhWSz3ZILSS7Kf4K3UUScbDBNi1QBcXGGePMKvVrjc4lOVySrLb9u1yzuYh6WGdo68rxk/nNB/HvDJiuGCXvN0X8bYJHWzKKUUlZ4BSaDfKmYX82Zv5fcXEoevhi89aTLFfHdkq2oyHIJJ4e91VPcJ4bo5h6bp3QcB67dw8E84oucOttisxSVxNR5hm9qfAjDTrungj36o4jpFesPb6lUw/7Qke0aPk4ThCwpyhLnAy9huPIp6dG/x2Qy4eL8nFLKgROV49t1hlYaVVV454bxumeid/gHJbNeyoumGZkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"LoadBalancer.png\"\n        title=\"LoadBalancer.png\"\n        src=\"/static/30d7c36ab2456d720e2492440df57f88/37523/LoadBalancer.png\"\n        srcset=\"/static/30d7c36ab2456d720e2492440df57f88/e9ff0/LoadBalancer.png 180w,\n/static/30d7c36ab2456d720e2492440df57f88/f21e7/LoadBalancer.png 360w,\n/static/30d7c36ab2456d720e2492440df57f88/37523/LoadBalancer.png 720w,\n/static/30d7c36ab2456d720e2492440df57f88/1ff84/LoadBalancer.png 1040w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이번 실습에서 저희가 진행 할 방법은 AWS LoadBalancer + NLB IP 모드 동작 방식으로 진행하도록 하겠습니다.\r\nPOD의 IP가 LB의 백엔드풀에 바로 등록이 되는 방식 입니다\r\n(Node의 IP가 아닌 POD의 IP가 직접 등록되니 IP Table Rule또한 타지 않습니다.)</p>\n<p>실습을 위해서 먼저 LB 생성을 진행하도록 하겠습니다.</p>\n<p>그러기 위해서는 생성된 컨트롤플레인, 워커노드에 LB생성을 위한 권한을 부여해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -o iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.5/docs/install/iam_policy.json\r\naws iam create-policy --policy-name AWSLoadBalancerControllerIAMPolicy --policy-document file://iam_policy.json\r\n<span class=\"token assign-left variable\">ACCOUNT_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span>aws sts get-caller-identity --query <span class=\"token string\">'Account'</span> --output text<span class=\"token variable\">`</span></span>\r\naws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AWSLoadBalancerControllerIAMPolicy --role-name masters.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\naws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AWSLoadBalancerControllerIAMPolicy --role-name nodes.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span></code></pre></div>\n<p>위의 명렁어를 모두 입력해 주었다면 AWS Management Console -> IAM 역할로 이동하셔서 각 masters.도메인, nodes.도메인 으로 이동하셔서 아래와 같이\r\n권한이 잘 부여가 되었는지 확인을 해줍니다.\r\n권한이 부여되어있지 않다면 LB 생성이 불가능 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHklEQVQoz41SXXOEIBDj///F62N75weggAIimk52ivWe2p1ZI7KbbED1fL7weHzAWIvzPDFNE4wxgsuy4L9Ra0UIAWrbNqSUUeshhDklQQaRue+7NLQ8jkMwpYQYo7yXUmQAxQcbGkFYAtZ1Rc4ZFGNQhHVsJgn3iPM8v31nvfLhl/A4T/i0YK/1zQ73W81foWIulzXJsqFsm6jRRlNm3uvucV+L5fxjjRGChzYGa0yX7Tbh/Rx5LJO1chGss9aKdTU7hzXGS8l7j77vr5tuyfNiM/eJXI/jCK211A7DIKhkilIuQqq8Xh0+nwMGPaEbLebZwTsnZCTqug7OOSFugk1IcbpyEQIpRYza4KszGPUkZM55aWjJqUh8/9b+lm8u3rx1d0qG0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IAM_CHECK.png\"\n        title=\"IAM_CHECK.png\"\n        src=\"/static/626693ed98bc89abc070896108b5b20a/37523/IAM_CHECK.png\"\n        srcset=\"/static/626693ed98bc89abc070896108b5b20a/e9ff0/IAM_CHECK.png 180w,\n/static/626693ed98bc89abc070896108b5b20a/f21e7/IAM_CHECK.png 360w,\n/static/626693ed98bc89abc070896108b5b20a/37523/IAM_CHECK.png 720w,\n/static/626693ed98bc89abc070896108b5b20a/302a4/IAM_CHECK.png 1080w,\n/static/626693ed98bc89abc070896108b5b20a/07a9c/IAM_CHECK.png 1440w,\n/static/626693ed98bc89abc070896108b5b20a/d61c2/IAM_CHECK.png 1800w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음으로 kops cluster를 업데이트 해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kops edit cluster --name <span class=\"token variable\">${KOPS_CLUSTER_NAME}</span></code></pre></div>\n<p>다음 아래 그림에 표시된 내용을 입력해주도록 합니다.</p>\n<p>Cert-manager는 K8S Cluster 내 에서 TLS 인증서를 자동으로 프로비저닝 및 관리하는 오픈 소스 입니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAABNUlEQVQoz42SyW7DMAxEdYwkypYtVYvlVYbjLfXW5tBr//+jigTNIUnR+IEgBgSGnAMR5kcc9Tg+Yd7gqMPRcOANiUfgFeUVufSC8vKqPYkaCB2EhnIHgUDSeKGyWCbizcXSCZVJndFAUQAAeqsH/Qta5mk6jXVdWWu0lIkUmXqLgXJgATC4g8H9BJXer9vWtG3pfcy5ICAJaGAaGH849ASafT17P+Z5KYQBSAAkY/g54t9mpT+XZRvHtqpSrQspfRhioAxeg2Zjv4ZxKcvv7eM9z1shiyDEALvMxtq+77M0ZYzhw4FSSmEvyFq7LEvXdXVdc87ZjV3mJEnWde26Lr/inEvT1DlnjHm5Agkh5nmepinLMiklIeTyEHRXfEQpPR6P5/N5GIaiKLz3+opSKoqi/1f8AKvQM5ZMTpFwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Edit_Kops.png\"\n        title=\"Edit_Kops.png\"\n        src=\"/static/ae30b4022f40e4ff07c7441623e21121/37523/Edit_Kops.png\"\n        srcset=\"/static/ae30b4022f40e4ff07c7441623e21121/e9ff0/Edit_Kops.png 180w,\n/static/ae30b4022f40e4ff07c7441623e21121/f21e7/Edit_Kops.png 360w,\n/static/ae30b4022f40e4ff07c7441623e21121/37523/Edit_Kops.png 720w,\n/static/ae30b4022f40e4ff07c7441623e21121/302a4/Edit_Kops.png 1080w,\n/static/ae30b4022f40e4ff07c7441623e21121/78415/Edit_Kops.png 1207w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음 Rolling update를 통하여 업데이트를 적용해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kops update cluster --yes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">5</span> <span class=\"token operator\">&amp;&amp;</span> kops rolling-update cluster</code></pre></div>\n<p>성공적으로 업데이트 되었습니다!!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQoz12S2bKCQAxEfVVQBDcUVBAUVxa1yv//stw6sTIl96FrBk063ekZHI9HSdPUYblcynw+lyiKFNPpVDzPk9Fo5P6L41hms5me4/FYf/N9X+sG1+tVTqeTknEyYL/fK7Isk6Io3KDNZiPr9Vput5sjhYieIAi+hI/HQ+73uzY3TSNd18lqtdICMBwOtQlAAtq2deogKctSJpPJl5Bpl8tFttutEtd1reBeVZXkea6qfgkRYUNZBS5ZD/cBjZBikckGSLGKTdujEeKEE1UM6ik0QixzAlMJUE4hsB3+JzwcDv1QzuezKmS59o0dlh6GodsVZBAhAstGiBircaGwKxQxHVLSZQB2aCYcI7RQTBW1jtAUMQViAsI2gwiFYp4Min9D4WQQYfQUoogCGp/PpxK+32/5fD7yer1UFU0Qcgc8LU4eNIH1FCZJIgAVpGrfrGC328lisVC7FEPMTgmKu4WFUgvlD9VDIlwEt2aQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kops_check.png\"\n        title=\"kops_check.png\"\n        src=\"/static/cf49637587da42417c0eaa7870908515/37523/kops_check.png\"\n        srcset=\"/static/cf49637587da42417c0eaa7870908515/e9ff0/kops_check.png 180w,\n/static/cf49637587da42417c0eaa7870908515/f21e7/kops_check.png 360w,\n/static/cf49637587da42417c0eaa7870908515/37523/kops_check.png 720w,\n/static/cf49637587da42417c0eaa7870908515/302a4/kops_check.png 1080w,\n/static/cf49637587da42417c0eaa7870908515/d318f/kops_check.png 1421w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아래 명령어를 입력하여 Deployment &#x26; Service 를 생성해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f ~/pkos/2/echo-service-nlb.yaml</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVQoz4WS3W6DMAyFc9lfWgpNCC2BAqUqiPd/PE+fJ0+TtmkXR06s+JxjO86XUfK6ldQ00nWdtG0rj8dDz33fK4ZhkKIoJM9z2e/3cjgc/oQLVZDKXyWEoEWXy0Xqupbr9TNHjDEqmqaR7Xb7VfwbuRuGUVLXy/v9lnVd1RGEVVXJ6/VSx5CCaZr+demCj1LERh2klGQcR233drvJsixKiMA8zyoGMYS73e4HyDsKmV9ZlpqAAGcUPp9PFTqfzxqPx6MClwZGBDhnWSaOueCARSh5SkpIzgAhgszUe6/R5stoAHfeufv9LkaKAhuFEGIemgsib0+nk2w2G22RCFiU5RxFqKNMIQVEW8R3QpszeVq37fM7iLxzDJpWSUCOU7vTBnc6IIew3e2bsVkTZMsf7jfhhi5IF18AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Service_Check.png\"\n        title=\"Service_Check.png\"\n        src=\"/static/67a7c218e9b1e2e50ba78a8db95ca152/37523/Service_Check.png\"\n        srcset=\"/static/67a7c218e9b1e2e50ba78a8db95ca152/e9ff0/Service_Check.png 180w,\n/static/67a7c218e9b1e2e50ba78a8db95ca152/f21e7/Service_Check.png 360w,\n/static/67a7c218e9b1e2e50ba78a8db95ca152/37523/Service_Check.png 720w,\n/static/67a7c218e9b1e2e50ba78a8db95ca152/302a4/Service_Check.png 1080w,\n/static/67a7c218e9b1e2e50ba78a8db95ca152/07a9c/Service_Check.png 1440w,\n/static/67a7c218e9b1e2e50ba78a8db95ca152/16068/Service_Check.png 1451w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>AWS Management Console에서 LoadBalancer을 들어가보면 POD의 IP가 LB의 백엔드풀에 등록되어 있는것을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABS0lEQVQoz41R2U4DMQzc76eoQNWKFtSqQJH4M849mmzuZAeN2a1QHxCRLMexPR5Pqs3+BZvtAYvVBpfXK8yulriY32A2X2Cx3mJ1/4jl3cMftsft9gnr3TPWuwMqjCfnDKU1dN9Da43ueESIAf8/A0rJqKy1SCnhq67RNA2sNeAbTQZoLd4YvjsY62Cdg/d+rHNw3o+xQ2WMRcpZGLE4poxUBpkZQkAp5cSBORczUv7Js49kpsPaiivGGHFUCtZ5hJSRy4CYAoZhbPQeJeeTNNOQ83uIkQwNcilouw7tUUEpJWybthU/aUrfG3PSmXfJnd0rBkQnwOvbOz4+vyRBKZgz1Mk58TTnnGg3xRNg23ZCShhy5d9TYkqiH/VhjpZHvQg2xayZ+mkcXHFFAvCXCMaV2Nj3Rn6PAJweQoQPAbWqpZZ6MWYNgeMYfwMsaqepPBxM9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"LoadBalancer_2.png\"\n        title=\"LoadBalancer_2.png\"\n        src=\"/static/de5d9b190aab6fb275d2e145c71eb719/37523/LoadBalancer_2.png\"\n        srcset=\"/static/de5d9b190aab6fb275d2e145c71eb719/e9ff0/LoadBalancer_2.png 180w,\n/static/de5d9b190aab6fb275d2e145c71eb719/f21e7/LoadBalancer_2.png 360w,\n/static/de5d9b190aab6fb275d2e145c71eb719/37523/LoadBalancer_2.png 720w,\n/static/de5d9b190aab6fb275d2e145c71eb719/302a4/LoadBalancer_2.png 1080w,\n/static/de5d9b190aab6fb275d2e145c71eb719/07a9c/LoadBalancer_2.png 1440w,\n/static/de5d9b190aab6fb275d2e145c71eb719/09262/LoadBalancer_2.png 1896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"7-external-dns\" style=\"position:relative;\"><a href=\"#7-external-dns\" aria-label=\"7 external dns permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. External DNS</h2>\n<p>dns 관련 파드 갯수를 줄여보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl delete deploy -n kube-system coredns-autoscaler\r\nkubectl scale deploy -n kube-system coredns --replicas <span class=\"token number\">1</span></code></pre></div>\n<p>아래 명령어를 입력하여 컨트롤플레인, 워커노드에 ExternalDNSUpdate 관련 정책을 업에이트 해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s -O https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/AKOS/externaldns/externaldns-aws-r53-policy.json\r\naws iam create-policy --policy-name AllowExternalDNSUpdates --policy-document file://externaldns-aws-r53-policy.json\r\naws iam list-policies --query <span class=\"token string\">'Policies[?PolicyName==`AllowExternalDNSUpdates`].Arn'</span> --output text\r\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">POLICY_ARN</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws iam list-policies --query <span class=\"token string\">'Policies[?PolicyName==`AllowExternalDNSUpdates`].Arn'</span> --output text<span class=\"token variable\">)</span></span>\r\naws iam attach-role-policy --policy-arn <span class=\"token variable\">$POLICY_ARN</span> --role-name masters.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\naws iam attach-role-policy --policy-arn <span class=\"token variable\">$POLICY_ARN</span> --role-name nodes.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span></code></pre></div>\n<p>위에서 LB에 대한 권한을 확인했듯이 똑같이 IAM 에서 AllowExternalDNSIPdates를 확인해주도록 합니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY012Q266FIAxE+f/vNFELggp4Izon02w5xIeVlrZML2bfMraccZWCUgqu61JL7vuuPM+jvH6ba2vMuq5wziHGhJQS9n3HeZ5KaZocx1FhLucMP03w3uu/6eebZVnQ9z1ERjhnYa2FiGgTFr0wTsZxrD4ZhgHS5Ay7TWGG+Ag3J+Ttf8I61e/NSbkRoc9YuxFRwTCvKhiWhJQ3LSIU+1qKcas31sImJoSArusgYrU4xlin+MIc78X70X6h6B/Vks8j8Qs5hAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"External_IAM.png\"\n        title=\"External_IAM.png\"\n        src=\"/static/f5522e7f7244697f68bf030165a33f8c/37523/External_IAM.png\"\n        srcset=\"/static/f5522e7f7244697f68bf030165a33f8c/e9ff0/External_IAM.png 180w,\n/static/f5522e7f7244697f68bf030165a33f8c/f21e7/External_IAM.png 360w,\n/static/f5522e7f7244697f68bf030165a33f8c/37523/External_IAM.png 720w,\n/static/f5522e7f7244697f68bf030165a33f8c/302a4/External_IAM.png 1080w,\n/static/f5522e7f7244697f68bf030165a33f8c/07a9c/External_IAM.png 1440w,\n/static/f5522e7f7244697f68bf030165a33f8c/91b67/External_IAM.png 1527w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음 kops edit cluster 명령어를 통해 아래 표시된 부분을 수정 후 업데이트 해주도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABJ0AAASdAHeZh94AAABWklEQVQoz43QyW7CMBAGYIsLyXicxSGOnYWSJjhgcINAolIPfY8KDsCFM7z/oUpoeyvwaWRZsv/xQhy+dnjrcOsEc5evukk4h8gCNxBqyhvghgYvEE6BaxpqiFoaTKifoa8IjydBNObxeCS6MRKTUTLBIEPmI7rYoYgMf9C+EJmHyIiZ6UbXeZ4KMYrjKJGxSiUi0Numf3WrpF2t6qou8kIqFSNLARXQFL2ceQLZ/QbEGDOdTquqklIyih5Qhuj35eED5L2qt6/VW5brKKpCbqWqw5BSik8gH81s+1otEtnmxUKln3OziAUAPBXWWhdFIYRwe47jwHPHdmFr7XK5LMtSKSWlTJIEn0batt1sNnVdp2k66rFfj8Pr9dpaa4xRSrmu+/dVjDHP8/y7SNM0ZVlmWXa7MADcHj8cDgeDAbnvcrlcr9fz+bzf74/H4+l0OvYOh8Nut/u66xvxKkb2iwQddQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kops_edit_2.png\"\n        title=\"kops_edit_2.png\"\n        src=\"/static/518428931357f86b32d3aae38868918d/37523/kops_edit_2.png\"\n        srcset=\"/static/518428931357f86b32d3aae38868918d/e9ff0/kops_edit_2.png 180w,\n/static/518428931357f86b32d3aae38868918d/f21e7/kops_edit_2.png 360w,\n/static/518428931357f86b32d3aae38868918d/37523/kops_edit_2.png 720w,\n/static/518428931357f86b32d3aae38868918d/302a4/kops_edit_2.png 1080w,\n/static/518428931357f86b32d3aae38868918d/db3a5/kops_edit_2.png 1087w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>업데이트가 정상적으루 수행되었습니다!!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.777777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmUlEQVQI12WOzQ6EIBCDvfoHWVCRhYCsIGji+z9eDXPYw+7hSydN02kjtMdLe7yNQUoRIQSs64qUEo7jQIwR931j2zaUUnBdF3lV53mGtRbeezjn6G6MC7D+g1wKzrNQ2BhDxTlnKKWw7zuEEFiWBYwxcM6htUbbtn80XCowqSClpGU1OE0TFdSv4zii6zoMw0Da9/2X6v3yAJ2RTKbQSPaxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kops_edit_3.png\"\n        title=\"kops_edit_3.png\"\n        src=\"/static/b587e17428b8672ec0918260fc099fb5/37523/kops_edit_3.png\"\n        srcset=\"/static/b587e17428b8672ec0918260fc099fb5/e9ff0/kops_edit_3.png 180w,\n/static/b587e17428b8672ec0918260fc099fb5/f21e7/kops_edit_3.png 360w,\n/static/b587e17428b8672ec0918260fc099fb5/37523/kops_edit_3.png 720w,\n/static/b587e17428b8672ec0918260fc099fb5/302a4/kops_edit_3.png 1080w,\n/static/b587e17428b8672ec0918260fc099fb5/4d383/kops_edit_3.png 1195w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아래 명렁어를 통해 테스트용 서비스/파드를 배포해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f ~/pkos/2/echo-service-nlb.yaml</code></pre></div>\n<p>다음 자신의 도메인 정보를 입력하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">MyDOMAIN1</span><span class=\"token operator\">=</span>nginx.korwoo.net\r\nkubectl annotate <span class=\"token function\">service</span> svc-nlb-ip-type <span class=\"token string\">\"external-dns.alpha.kubernetes.io/hostname=<span class=\"token variable\">$MyDOMAIN1</span>.\"</span></code></pre></div>\n<p>그럼 정상적으로 됬는지 확인해보도록 하겠습니다. 아래 명령어를 입력하면 IP주소가 출력될것입니다.(약 5분정도 시간이 필요합니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">dig</span> +short <span class=\"token variable\">$MyDOMAIN1</span></code></pre></div>\n<p>이후 Route53에 접속하시면 등록한 도메인이 A레코드로 등록된것을 확인하실 수 있습니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiUlEQVQoz41RW24UMRCc+/8gkIKCSFixEbCAuATiDIgLAJmXx++xx/YWqk4ygvATSy17xtVVXeXu+P4z3p2+4NXVAS8vX+PZ8wu8uLjE9eGIw80HXB8/PqFOuHp7wpubT+jw1wopI6aMUgvO5zNaa3jqaq2gtYpOG4tSK4wx+PnrN/pxwqI11LJg0QbKeizGQVuPEIKUDwFaG1jnBTtrC/PjG/T3r+ic86LgvBdS7iFErOuKlDNCXPfiP+Ktc1hTQkoJOWfkvCEHB28WdFQTQucQY8S2bbtV2i6loJQNtVbUUjEMI6Zp3iOprQmmtTNKbehCjDuh9x5aaznT2rom8J5nErJxGAb0wwClFJRaxDr7OAhLCLdSxCqL6ta6HUCbJCQZv6dpwjzfkXGneN42sc4Y/ptQzQrjOEo+nOoxIe/6fhDrfd/LhMQSF9f13ww54TzN0sA8SSgPQ8J7y9M8wxgr4ux5EG73WXYP48oLO4eRlpSS7DgRdwoRx2ZmeHvb7zWOd3jJMgT8ARHE8mts6XBxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Route53.png\"\n        title=\"Route53.png\"\n        src=\"/static/3923e87e3c667f93a8111d8d0aa46f5c/37523/Route53.png\"\n        srcset=\"/static/3923e87e3c667f93a8111d8d0aa46f5c/e9ff0/Route53.png 180w,\n/static/3923e87e3c667f93a8111d8d0aa46f5c/f21e7/Route53.png 360w,\n/static/3923e87e3c667f93a8111d8d0aa46f5c/37523/Route53.png 720w,\n/static/3923e87e3c667f93a8111d8d0aa46f5c/302a4/Route53.png 1080w,\n/static/3923e87e3c667f93a8111d8d0aa46f5c/07a9c/Route53.png 1440w,\n/static/3923e87e3c667f93a8111d8d0aa46f5c/e1250/Route53.png 1786w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>과제3. 서비스(NLB)/파드 배포 시 External DNS 설정해서 각자 자신의 도메인으로 NLB 통해 애플리케이션으로 접속해보기</p>\n<p>다음은 voteing-app 서비스를 배포해보도록 하겠습니다.</p>\n<p>아래의 명렁어를 입력해 git clone을 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://github.com/dockersamples/example-voting-app</code></pre></div>\n<p>다음 vote 라는 namespace를 만들겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create ns vote\r\nkubectl ns vote</code></pre></div>\n<p>다음 아래 명령어를 입력하여 서비스파일을 변경하도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf vote-service.yaml result-service.yaml\r\n<span class=\"token function\">cp</span> ~/pkos/2/vote-service.yaml <span class=\"token builtin class-name\">.</span>\r\n<span class=\"token function\">cp</span> ~/pkos/2/result-service.yaml <span class=\"token builtin class-name\">.</span>\r\n<span class=\"token function\">cat</span> vote-service.yaml <span class=\"token operator\">|</span> yh\r\n<span class=\"token function\">cat</span> result-service.yaml <span class=\"token operator\">|</span> yh</code></pre></div>\n<p>아래 명령어를 통해 서비스를 배포하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>다음 아래 명령어를 입력하여 자신의 도메인에 ExternalDNS를 추가하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">MyDOMAIN1</span><span class=\"token operator\">=</span>vote.korwoo.net\r\n<span class=\"token assign-left variable\">MyDOMAIN2</span><span class=\"token operator\">=</span>result.korwoo.net</code></pre></div>\n<p>이후 입력한 도메인으로 접속하여 확인해봅시다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVQoz52T3UrDQBBG84Z6UfARvPABBVFRkIIg+BLthWljfja7M7MtHMlqMKZpwFwcFnZnznwMbFY3joRr8UFOCCIQhWNwxLaGGDAV2onajkwt0iFqfwhiHMzY1sbNOrK681zcOlb3xsvW4GB4sZO+LIgyhRdNwk0jXL8XXL3tE5evOc8fLURLNeO+bDzhN6GialRBWFd7nsqcxzLnocrZ+Bb7qTlJeE4oYgTVdJoYsVuBRI4a06Ap2aywbxiuoGf4tlg45t/CpczsUGdTLk7YN+mZ+0UJnQ80ztO03yxLOBB233JXlOw+S4qqnhV+AXvdnlWwsjzgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vote.png\"\n        title=\"vote.png\"\n        src=\"/static/3c7cf000bbfd88062f370e9c115f6ea2/37523/vote.png\"\n        srcset=\"/static/3c7cf000bbfd88062f370e9c115f6ea2/e9ff0/vote.png 180w,\n/static/3c7cf000bbfd88062f370e9c115f6ea2/f21e7/vote.png 360w,\n/static/3c7cf000bbfd88062f370e9c115f6ea2/37523/vote.png 720w,\n/static/3c7cf000bbfd88062f370e9c115f6ea2/302a4/vote.png 1080w,\n/static/3c7cf000bbfd88062f370e9c115f6ea2/07a9c/vote.png 1440w,\n/static/3c7cf000bbfd88062f370e9c115f6ea2/a8a6f/vote.png 1516w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVQoz6WRS0oDQRCG5wrGx0LjKwpuXfk4gPfwAJ7AA6iISQYmmegikKy8gBtxYUTITkXEpa4NkojVzSSTh5/0DDEhjOCYho+qprp+/uqyDisNDq7rHN18kK5q0lUVm5Mgao5vP7EmbUWfRFbGRGGtFoQBakwEa9lVRLGUF1JudONKIaxH9Vm/iZmYdISJTDhOPyYywrQtP+9GhSMFjbNZR9g51xQffQr3PmcPPu6dH9z3K00WcjEcmpGmssLeZRNz6l4viAqfDi2e37vMOeGX/FlwxhZ2Lzwa3hdPtS411eNF2ry12ly9duIJGhbzwtqpYqus2S5rNkqazVKYrxf/uRQjahZj3CSdQT6fi7mUYdFUBMP1UYffNQhm16EULE0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result.png\"\n        title=\"result.png\"\n        src=\"/static/ffc10ddbcf4df4afc9fed957e3608cd2/37523/result.png\"\n        srcset=\"/static/ffc10ddbcf4df4afc9fed957e3608cd2/e9ff0/result.png 180w,\n/static/ffc10ddbcf4df4afc9fed957e3608cd2/f21e7/result.png 360w,\n/static/ffc10ddbcf4df4afc9fed957e3608cd2/37523/result.png 720w,\n/static/ffc10ddbcf4df4afc9fed957e3608cd2/302a4/result.png 1080w,\n/static/ffc10ddbcf4df4afc9fed957e3608cd2/07a9c/result.png 1440w,\n/static/ffc10ddbcf4df4afc9fed957e3608cd2/5df5d/result.png 1572w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>과제4. NLB에 TLS 적용하기</p>\n<p>아래 명령어를 입력하여 CERT_ARN을 저장해주도록 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">CERT_ARN</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span>aws acm list-certificates --query <span class=\"token string\">'CertificateSummaryList[].CertificateArn[]'</span> --output text<span class=\"token variable\">`</span></span></code></pre></div>\n<p>다음 아래 명령어를 입력해 Deployment를 생성해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl create -f -</span>\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: deploy-echo\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app: deploy-websrv\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: deploy-websrv\r\n    spec:\r\n      terminationGracePeriodSeconds: 0\r\n      containers:\r\n      - name: akos-websrv\r\n        image: k8s.gcr.io/echoserver:1.5\r\n        ports:\r\n        - containerPort: 8080\r\n---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: svc-nlb-ip-type\r\n  annotations:\r\n    external-dns.alpha.kubernetes.io/hostname: \"<span class=\"token variable\">${MyDomain}</span>\"\r\n    service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip\r\n    service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing\r\n    service.beta.kubernetes.io/aws-load-balancer-healthcheck-port: \"8080\"\r\n    service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: \"true\"\r\n    service.beta.kubernetes.io/aws-load-balancer-ssl-ports: \"https\"\r\n    service.beta.kubernetes.io/aws-load-balancer-ssl-cert: <span class=\"token variable\">${CERT_ARN}</span>\r\n    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: \"http\"\r\nspec:\r\n  ports:\r\n    - port: 80\r\n      targetPort: 8080\r\n      protocol: TCP\r\n      name: http\r\n    - port: 443\r\n      targetPort: 8080\r\n      protocol: TCP\r\n      name: https\r\n  type: LoadBalancer\r\n  loadBalancerClass: service.k8s.aws/nlb\r\n  selector:\r\n    app: deploy-websrv\r\nEOF</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuklEQVQoz52R2wqDMBBE8/+/qK+KIEhUNLdNpkzaiC1qawMDubAns7NqXVeM44hpmmCdg7EWIQSIRIjILYUgUMMwZKBzDt57LMuClBL+XYrOmqbJIDqLKeGKl/L7uRTddV0HrXUWI6Bbylq77YtijBv40CEBVVWhbdsMK0C2X4rK74Tt706BdV2j7/tcwLYJo55Bh9eQ5K3t0wyZ3TzPMMZsxQVYznvgPq9D4J0J/jJ99W1qn46u3BH4AJg5xhoXo+poAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TLS.png\"\n        title=\"TLS.png\"\n        src=\"/static/bf5ab6d75ec99a8420d9413af25c88a2/37523/TLS.png\"\n        srcset=\"/static/bf5ab6d75ec99a8420d9413af25c88a2/e9ff0/TLS.png 180w,\n/static/bf5ab6d75ec99a8420d9413af25c88a2/f21e7/TLS.png 360w,\n/static/bf5ab6d75ec99a8420d9413af25c88a2/37523/TLS.png 720w,\n/static/bf5ab6d75ec99a8420d9413af25c88a2/302a4/TLS.png 1080w,\n/static/bf5ab6d75ec99a8420d9413af25c88a2/07a9c/TLS.png 1440w,\n/static/bf5ab6d75ec99a8420d9413af25c88a2/d76ab/TLS.png 1731w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-kops-%EC%9B%90%ED%81%B4%EB%A6%AD-%EB%B0%B0%ED%8F%AC\">1. KOPS 원클릭 배포</a></li>\n<li><a href=\"#2-aws-vpc-cni\">2. AWS VPC CNI</a></li>\n<li><a href=\"#4-pod%EC%97%90%EC%84%9C-%EC%99%B8%EB%B6%80-%ED%86%B5%EC%8B%A0\">4. Pod에서 외부 통신</a></li>\n<li><a href=\"#5-%EB%85%B8%EB%93%9C%EC%97%90%EC%84%9C-pod-%EC%83%9D%EC%84%B1%EA%B0%AF%EC%88%98-%EC%A0%9C%ED%95%9C\">5. 노드에서 POD 생성갯수 제한</a></li>\n<li><a href=\"#6-k8s-service\">6. K8S Service</a></li>\n<li><a href=\"#7-external-dns\">7. External DNS</a></li>\n</ul>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","frontmatter":{"date":"August 29, 2022","title":"Gasida Kubernetes Study 2주차","categories":"Kubernetes","author":"KORWOO","emoji":"🔮"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_2/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/DevOps/AKS&DevOps1/","nextSlug":"/DevOps/AKS&DevOps2/","prevSlug":"/Kubernetes/Gasida_Study_homework_2/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}