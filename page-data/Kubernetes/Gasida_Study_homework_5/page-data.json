{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Kubernetes/Gasida_Study_homework_5/",
    "result": {"data":{"cur":{"id":"deaf4043-a4ad-5d1e-aec1-ef7ac8e23de7","html":"<p>가시다님 스터디 : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p>5주차 Prometheus &#x26; Grafana</p>\n<h2 id=\"과제1-prometheus-stack-설치-후-공식-or-여러가지-대시보드-추가-해보기\" style=\"position:relative;\"><a href=\"#%EA%B3%BC%EC%A0%9C1-prometheus-stack-%EC%84%A4%EC%B9%98-%ED%9B%84-%EA%B3%B5%EC%8B%9D-or-%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%B6%94%EA%B0%80-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"과제1 prometheus stack 설치 후 공식 or 여러가지 대시보드 추가 해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>과제1. Prometheus-stack 설치 후 공식 or 여러가지 대시보드 추가 해보기</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQoz3VS23LaQAz1QzChXCYQm72v1zZgh0uapp1pf6oJ5WKYpP9+OisbZ9qhD2e0OjqSLMnBoXpDdXrH6fwbx+oN219HvLzu8LLd43W7J/vT+w2321fYH06E6vxOOBzP2B2OhOBuojAYRRiOYvT6d+iEA9yE/RZhOMBtb4ROd1hznU8tPN/rjxF2h+jeDnHT6SOQxkFqB7csUayW0DaDNGkLk89RPG0wmxctpxpN+lCi3KxhG58Jg2AqDJiwEHMHkztwYUGcrC23CXSZQpsEMa/5S0zkDnqWQjZcNJUItM2x2nzFlBtIneHp+Qfy+RKTWGBRPmK2WGM84UiyAp+fv9eFtMP68Ru4THAfSzysvsBlBcb3HIHUKYRyiJluiqbgTTef4KFMRrxfTcwUaSmHa0RM0ZvJBJNI+B2m4Cqhrh5M2db3Vic5gWLStrq/cqQFtzNETCO4iK/hcoRLsn9f0/k4TRVLBP4gjA7zAT/6h2+bNST1sXz8Hw2tgZt6ZP+F1OEaZF0sSRf0q9Bo/9PaHNFU4Q+ITBqYdwHbzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/a95f5361b709af302b4826e73c4139b5/37523/img.png\"\n        srcset=\"/static/a95f5361b709af302b4826e73c4139b5/e9ff0/img.png 180w,\n/static/a95f5361b709af302b4826e73c4139b5/f21e7/img.png 360w,\n/static/a95f5361b709af302b4826e73c4139b5/37523/img.png 720w,\n/static/a95f5361b709af302b4826e73c4139b5/302a4/img.png 1080w,\n/static/a95f5361b709af302b4826e73c4139b5/07a9c/img.png 1440w,\n/static/a95f5361b709af302b4826e73c4139b5/1f6b7/img.png 1909w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"과제2-nginx-pod-배포-후-prometheus-웹에서-관련-metric-확인-및-grafana-nginx-웹서버-대시보드-추가\" style=\"position:relative;\"><a href=\"#%EA%B3%BC%EC%A0%9C2-nginx-pod-%EB%B0%B0%ED%8F%AC-%ED%9B%84-prometheus-%EC%9B%B9%EC%97%90%EC%84%9C-%EA%B4%80%EB%A0%A8-metric-%ED%99%95%EC%9D%B8-%EB%B0%8F-grafana-nginx-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%B6%94%EA%B0%80\" aria-label=\"과제2 nginx pod 배포 후 prometheus 웹에서 관련 metric 확인 및 grafana nginx 웹서버 대시보드 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>과제2. Nginx Pod 배포 후 Prometheus 웹에서 관련 Metric 확인 및 Grafana nginx 웹서버 대시보드 추가</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABx0lEQVQoz3WP3U8TQRTF90FaFMSgtLszszN3Prptgd1CGmziu4+GaIw+CYkGH3wpoYUuUOu/fsydttqY+PDLvefck5l7k8XiF+7qOWb1HJPbGuPrCcbXU0ymM0xv6wj3a6Je+fX9HPcPC9QPP3E3e8T45gbJ/iuBF/sCu3sHeLrzEluNnciTLeZZpLn9HI0Va4/njeZu9Nbz5vYeEjcsIc9PIN9VUOcD5O8HUB8q5B8H0J8G0J8rFJevMfrxFv7iFPSlgr2oQJfMMezXEvZbCXdVwn0vkQjjIIJHi3QkdQTd6yLzFi2r0XYGB6QhvEPLLTXXrEPQhwXSYNAOGu1VTTJpIJWDkBSRyiLPfays04xAxHMDISyEIGSCsxZK+ehxpp0apCkh0bYDqR1SZZApiqz7VBFC4XE26oN8B6k0G3MTNROCR3VcoNsNSDiQU4AyHsq4WEVukfGm5DA86+N02IfUdpnRLi4gY56zDmXZx5tRiZNBHwn/oG0B3nRJEbcQfHLOUHyAfBfGdaEpbOSLqNnnDOcTbUNs1udk8u/pm8jcLc+Vy3P/5HKKmj/mPiEXILVfbfN/4tb/eK5XIBz14A97sZpOB78B+70jZIpjwIsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/eedb042ba560e846a9bdeb28478e4df0/37523/img_1.png\"\n        srcset=\"/static/eedb042ba560e846a9bdeb28478e4df0/e9ff0/img_1.png 180w,\n/static/eedb042ba560e846a9bdeb28478e4df0/f21e7/img_1.png 360w,\n/static/eedb042ba560e846a9bdeb28478e4df0/37523/img_1.png 720w,\n/static/eedb042ba560e846a9bdeb28478e4df0/302a4/img_1.png 1080w,\n/static/eedb042ba560e846a9bdeb28478e4df0/07a9c/img_1.png 1440w,\n/static/eedb042ba560e846a9bdeb28478e4df0/f33fc/img_1.png 1905w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVQoz62OwUrDUBBF3/9/gCtREEEUkWpoa2MiFnHpRtzUBkWwlCZNU9u+N29SmyOpG7UbhV44zGW4zB2zu3/A0ckZe6cRO8fXHDYi2p2QdhjR6tT+G2HEZc1V/DXDehcTNAOaFwGtKMbcPyb0XjPiZ2j04W4Ayn+lIA5ZLTGD4Yi5VcQ5qtIxnb2TFjnD3HL+YOkmSjfx3CQl/beCaTEhTTOybIx1Dmst1glWBBHB5JMC7xUnHvGKeE+pQj5Xbl8+eEpLkrSkN1oyninqZZ333m+gqpi6YZsyi8Vibaqq2mD1i+oP/Di4jQ8/AX0cEs3V3+vMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/dd27938c4d9af6580ed0a1c9f15b30b8/37523/img_2.png\"\n        srcset=\"/static/dd27938c4d9af6580ed0a1c9f15b30b8/e9ff0/img_2.png 180w,\n/static/dd27938c4d9af6580ed0a1c9f15b30b8/f21e7/img_2.png 360w,\n/static/dd27938c4d9af6580ed0a1c9f15b30b8/37523/img_2.png 720w,\n/static/dd27938c4d9af6580ed0a1c9f15b30b8/302a4/img_2.png 1080w,\n/static/dd27938c4d9af6580ed0a1c9f15b30b8/07a9c/img_2.png 1440w,\n/static/dd27938c4d9af6580ed0a1c9f15b30b8/9e0ed/img_2.png 1923w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EA%B3%BC%EC%A0%9C1-prometheus-stack-%EC%84%A4%EC%B9%98-%ED%9B%84-%EA%B3%B5%EC%8B%9D-or-%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%B6%94%EA%B0%80-%ED%95%B4%EB%B3%B4%EA%B8%B0\">과제1. Prometheus-stack 설치 후 공식 or 여러가지 대시보드 추가 해보기</a></li>\n<li><a href=\"#%EA%B3%BC%EC%A0%9C2-nginx-pod-%EB%B0%B0%ED%8F%AC-%ED%9B%84-prometheus-%EC%9B%B9%EC%97%90%EC%84%9C-%EA%B4%80%EB%A0%A8-metric-%ED%99%95%EC%9D%B8-%EB%B0%8F-grafana-nginx-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%B6%94%EA%B0%80\">과제2. Nginx Pod 배포 후 Prometheus 웹에서 관련 Metric 확인 및 Grafana nginx 웹서버 대시보드 추가</a></li>\n</ul>\n</div>","excerpt":"가시다님 스터디 : https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e 5주차 Prometheus & Grafana 과제1. Prometheus-stack 설치 후 공식 or 여러가지 대시보드 추가 해보기  과제2. Nginx Pod 배포 후 Prometheus 웹에서 관련 Metric 확인 및 Grafana nginx 웹서버 대시보드 추가 \r\n 과제1. Prometheus-stack 설치 후 공식 or 여러가지 대시보드 추가 해보기 과제2. Nginx Pod 배포 후 Prometheus 웹에서 관련 Metric 확인 및 Grafana nginx 웹서버 대시보드 추가","frontmatter":{"date":"February 18, 2023","title":"Gasida Kubernetes Study 5주차","categories":"Kubernetes","author":"KORWOO","emoji":"🔮"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_5/"}},"next":{"id":"c31314fe-66ed-534b-ac06-f1d987c34bf1","html":"<p>가시다님 스터디 : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p>4주차 Harbor를 이용한 이미지 저장소 구축 및 ArgoCD</p>\n<h2 id=\"1argocd\" style=\"position:relative;\"><a href=\"#1argocd\" aria-label=\"1argocd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.ArgoCD??</h2>\n<p>어느덧 가시다님의 쿠버네티스 스터디도 4주차에 접어들었습니다.\r\n이번주의 주제는 Harbor 구축 및 ArgoCD 입니다.\r\nHarbor의 경우 제가 근무하고 있는 회사에서 한때 사용하였던 경험이 있어 나름 익숙한 Container Registry 였지만\r\nArgoCD같은 경우 여기저기서 많이 들어는봤지만 생소한 개념이었습니다..ㅜㅜ\r\n그래서 ArgoCD가 무엇인지에 대해 설명하고 넘어가겠습니다.</p>\n<p>ArgoCD에 대해 설명하기 위해서는 먼저 GitOps에 대해 알아야합니다.\r\nGitOps는 어렵게 생각할것 없이 Git에서 사용하는 Devops의 실천 방법 중 하나입니다.\r\n그중에서도 CD(Continous Deployment)에 초점을 두고 있습니다.</p>\n<p>GitOps의 핵심 아이디어는</p>\n<ol>\n<li>배포에 관련된 모든 것을 선언형 기술서(Declarative Descriptions)형태로 작성하여 Config Repostiry에서 관리</li>\n<li>Config Repositry의 선언형 기술서와 운영 환경 간 상태차이가 없도록 유지시키는 자동화 시스템 구성</li>\n</ol>\n<p>즉 GitOps는 K8S Manifest 파일을 Git에서 관리하고 배포할때에도 Git에 저장된 Manifest로 Cluster에 배포하는 과정입니다.\r\nManifest 파일에 배포된 상태가 어떤 모양을 가져아 할지 선언되어 있는 방식으로 정의하여 단일 진실의 원천(SSOT) 를 지킵니다.\r\nGitOps를 사용하면 배포상태의 모습을 항상 Manifest에 정의된 대로 원천가 동일하게 맞추며 현재 배포환경의 상태를 쉽게 파악할 수 있습니다.</p>\n<p>GitOps에 대해서 설명드릴 내용이 좀 더 많이 있으나 GitOps가 메인이 아닌지라 기회가 된다면 다음 포스팅에서 GitOps에 대해 다뤄볼수 있도록 하겠습니다.\r\n이 GitOps를 구현체가 바로 ArgoCD 입니다!!</p>\n<p>서론이 길었습니다.</p>\n<p>바로 실습으로 넘어가도록 하겠습니다.</p>\n<h2 id=\"2-harbor-container-registry-구축\" style=\"position:relative;\"><a href=\"#2-harbor-container-registry-%EA%B5%AC%EC%B6%95\" aria-label=\"2 harbor container registry 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Harbor Container Registry 구축</h2>\n<p>Cluster 구성 과정은 지난번 포스팅을 참고하여 주시고 바로 진행하겠습니다.</p>\n<p>먼저 지나번과 같이 Control Plane, Worker Node에 AWS LoadBalancer, ExternalDNS 에 대한 권한을 부여하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AWSLoadBalancerControllerIAMPolicy --role-name masters.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\naws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AWSLoadBalancerControllerIAMPolicy --role-name nodes.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\naws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AllowExternalDNSUpdates --role-name masters.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\naws iam attach-role-policy --policy-arn arn:aws:iam::<span class=\"token variable\">$ACCOUNT_ID</span>:policy/AllowExternalDNSUpdates --role-name nodes.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span></code></pre></div>\n<p>다음 kops cluster 를 업데이트 해주도록하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kops edit cluster\r\n-----\r\nspec:\r\n  certManager:\r\n    enabled: <span class=\"token boolean\">true</span>\r\n  awsLoadBalancerController:\r\n    enabled: <span class=\"token boolean\">true</span>\r\n  externalDns:\r\n    provider: external-dns\r\n-----\r\n\r\nkops update cluster --yes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">3</span> <span class=\"token operator\">&amp;&amp;</span> kops rolling-update cluster</code></pre></div>\n<p>다음은 이미지 저장소인 Harbor를 설치해주도록 하겠습니다.\r\nHarbor 설치는 Helm Chart를 통해 설치를 진행하도록하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">helm repo <span class=\"token function\">add</span> harbor https://helm.goharbor.io\r\nhelm fetch harbor/harbor --untar</code></pre></div>\n<p>다음 value.yaml에 대한 수정이 필요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> ~/harbor/values.yaml\r\n\r\nexpose.tls.certSource<span class=\"token operator\">=</span>none  <span class=\"token comment\"># 19줄</span>\r\nexpose.ingress.hosts.core<span class=\"token operator\">=</span>harbor.<span class=\"token operator\">&lt;</span>각자자신의도메인<span class=\"token operator\">></span>    <span class=\"token comment\"># 36줄</span>\r\nexpose.ingress.hosts.notary<span class=\"token operator\">=</span>notary.<span class=\"token operator\">&lt;</span>각자자신의도메인<span class=\"token operator\">></span>  <span class=\"token comment\"># 37줄</span>\r\nexpose.ingress.hosts.core<span class=\"token operator\">=</span>harbor.korwoo.link    \r\nexpose.ingress.hosts.notary<span class=\"token operator\">=</span>notary.korwoo.link  \r\nexpose.ingress.controller<span class=\"token operator\">=</span>alb                      <span class=\"token comment\"># 44줄</span>\r\nexpose.ingress.className<span class=\"token operator\">=</span>alb                       <span class=\"token comment\"># 47줄</span>\r\nexpose.ingress.annotations<span class=\"token operator\">=</span>alb.ingress.kubernetes.io/scheme: internet-facing\r\nexpose.ingress.annotations<span class=\"token operator\">=</span>alb.ingress.kubernetes.io/target-type: <span class=\"token function\">ip</span>\r\nexpose.ingress.annotations<span class=\"token operator\">=</span>alb.ingress.kubernetes.io/listen-ports: <span class=\"token string\">'[{\"HTTPS\":443}, {\"HTTP\":80}]'</span>\r\nexpose.ingress.annotations<span class=\"token operator\">=</span>alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">${CERT_ARN}</span>\r\n<span class=\"token assign-left variable\">externalURL</span><span class=\"token operator\">=</span>https://harbor.<span class=\"token operator\">&lt;</span>각자자신의도메인<span class=\"token operator\">></span>\r\n<span class=\"token assign-left variable\">externalURL</span><span class=\"token operator\">=</span>https://harbor.korwoo.link             <span class=\"token comment\"># 131줄</span></code></pre></div>\n<p>위의 yaml 파일 내용수정 중\r\n51~54번째줄에 해당하는 내용은 주석처리를 해주시면 됩니다.\r\n추가적으로 expore.ingress.annotations=alb.ingress.kubernetes.io/certificate-arn: ${CERT_ARN} 부분은\r\n문자 그대로 넣어주시는것이 아니라\r\n터미널에서 echo “alb.ingress.kubernetes.io/certificate-arn: $CERT_ARN” 명령어를 입력하여 나온 값을\r\n${CERT_ARN} 값 대신에 넣어줄수 있도록 합니다.\r\n단순히 ${CERN_ARN} 값을 넣으면 인증키 값이 꼬일수도 있기 떄문입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVQoz41S2W6DQBDjdXf2ZEO4Q5BCUxKiJm2l/v+Xudojl6pWfbA8gOTxGGdMluD5HtzuwK3nCTyfwfNDek7fdA9SNbgZ4iwkSIgAQRRZCGRMVuB2BjMTmNmBuROYewNz58SXwKTKCOlAsgDJHIL4k2gQ5KaGrI7Q6wl6PYP8djOCm210c2W9CRwF8zuS4BWZLHq4ly+U4wLX7CD9ZmFBQoOkCSz8edI+IL8Je5d3EDLSBXR3gipnCN1EF6YH2RFCtRC6j5npLrrXTZrb9L5NSxxIKGRcaNjNAjtckI/vMJsz7PYDdvyEq19RqQpKrlOGRcxPre+Z+jk4LsI1GZkV3LjAdBN0NyEfDrDdDrbfw/q57NAQQRID3U5jD/hxsoOqZxTDGXV7BFctSNfxrOBI3SpB/0BGegXTLTB2gLI9uGpAqgqdCz/E1+HaM8+pHr8hOPQZ6nKCUg1EyGSVciqeOkZ/CF0FvwHfxu+W7OF8xAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harbor_yaml.png\"\n        title=\"harbor_yaml.png\"\n        src=\"/static/27bd7c3179f7b59fbe00ce751b5300a8/37523/harbor_yaml.png\"\n        srcset=\"/static/27bd7c3179f7b59fbe00ce751b5300a8/e9ff0/harbor_yaml.png 180w,\n/static/27bd7c3179f7b59fbe00ce751b5300a8/f21e7/harbor_yaml.png 360w,\n/static/27bd7c3179f7b59fbe00ce751b5300a8/37523/harbor_yaml.png 720w,\n/static/27bd7c3179f7b59fbe00ce751b5300a8/302a4/harbor_yaml.png 1080w,\n/static/27bd7c3179f7b59fbe00ce751b5300a8/d4e7f/harbor_yaml.png 1416w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>수정이 완료 되었다면\r\n아래의 명령어를 입력하여 helm install을 진행해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create ns harbor\r\nhelm <span class=\"token function\">install</span> harbor harbor/harbor -f ~/harbor/values.yaml --namespace harbor --version <span class=\"token number\">1.11</span>.0</code></pre></div>\n<p>헬름 인스톨 이후\r\nharbor.자신의도메인 에 접속하시면 Harbor에 접속하실 수 있습니다.\r\n이 작업또한 시간이 조금 필요하기에 느긋하게 5분정도 후에 접속해보시면 되겠습니다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQoz5VSXW/UMBDMz4eHE4Veq9JW4lqQgH/BD+H1rrETu/FnnM9Bs3cH10csTSw7u7Mzu66+fP2B3befuL17wPvNR7zbfMLm6hqbqy0+bO9w8/CMm/snwfZ+h63sb3H9eYfbx2c8Pn1HhYuVckYZR/zvWvhxe+D3L1SdD5imGTFGtMagc07gQ0AIET5EOO4xwfsg/2JKCDEipYScM3LfI0ePYDUq5xzWdUXf90IyjiPmZQbWFdM0YeJ5nrHMM9q2Fch5WQSMkfO6YlmBisrOhM57hBBESSlF7qiACYTWDZTS6LpO4JwXF8MwCDljKkrnOhNaY2GtFaW8SzFhHCdRclRoTmhBd4wjYV+K7FXOvSTkEyErN00rBFTJPon1E+FLXaOuFRShNGqlYIwV0F3FBMqltUtCsUuF6Z9CYwx008j/pmnw+tpJHmMJUchBXFomYV3XUo0BTDg33lgrg+NdjAllGI7P5jQgomJSKYMMgsGmNdBa/63KobFPJFVK4XB4wX5PHMQy+xnkiR0L/QEMWfA7L5YhTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"route53.png\"\n        title=\"route53.png\"\n        src=\"/static/903faa47dacc1ac1e0aff55bf6ec17dd/37523/route53.png\"\n        srcset=\"/static/903faa47dacc1ac1e0aff55bf6ec17dd/e9ff0/route53.png 180w,\n/static/903faa47dacc1ac1e0aff55bf6ec17dd/f21e7/route53.png 360w,\n/static/903faa47dacc1ac1e0aff55bf6ec17dd/37523/route53.png 720w,\n/static/903faa47dacc1ac1e0aff55bf6ec17dd/302a4/route53.png 1080w,\n/static/903faa47dacc1ac1e0aff55bf6ec17dd/07a9c/route53.png 1440w,\n/static/903faa47dacc1ac1e0aff55bf6ec17dd/764d7/route53.png 1782w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFklEQVQoz62Q3U7DMAyF8/YgNNaJjo2/Ale8By/CHXewJLbTtEvXg+IWVrRdTYtkJfZxP5/aPL6+oVw94HK2wMXVHLOixHVRoihXuFlXWKyf97GqNIrx/n3Pb5+wvH/B8q6CwXiatgURoe97nHT8J/DxDpNBMUZYa2GtAzHDOQfvPUREc08E7wkSgtacGzSRACLWqIMgkBscZjHUAV8UIXGrA1gEdV0jthFxG9E0DZhZtTysHY3E2Ghvhm9TB5NS0oJ1DhsvoDyVWXPnPUgYJDQ4z3nWrAOz6Ir2f+CVo8Ds8HuzAcsojo1/zZPa9D6mmdR1upsMJJaDDwbwIewYPL9NSt3Eofxzd0qYXZd0oecD7rqzAn8AxlTtPgY+RLwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"LB.png\"\n        title=\"LB.png\"\n        src=\"/static/ab3be415cc7f015673ff282fb6f997a6/37523/LB.png\"\n        srcset=\"/static/ab3be415cc7f015673ff282fb6f997a6/e9ff0/LB.png 180w,\n/static/ab3be415cc7f015673ff282fb6f997a6/f21e7/LB.png 360w,\n/static/ab3be415cc7f015673ff282fb6f997a6/37523/LB.png 720w,\n/static/ab3be415cc7f015673ff282fb6f997a6/302a4/LB.png 1080w,\n/static/ab3be415cc7f015673ff282fb6f997a6/07a9c/LB.png 1440w,\n/static/ab3be415cc7f015673ff282fb6f997a6/a2498/LB.png 1764w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>만약 접속이 잘 안되실 경우 IAM에서 역할 할당이 잘 되어있는지,\r\nRoute53에 harbor.도메인이 잘 등록되어 있는지,\r\nLB는 잘 생성되어 있는지를 확인해주시면 되겠습니다.</p>\n<p>정상적으로 접속이 되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB50lEQVQ4y42S3W/SUBjGe6Exw5h458Y2oDBpCy2nn4etBToQs6ZsIRtxTG+UqCTGSGRRFnUfipnJEo165Z/7mJ7ahgE6L355T29+5+n7HO7FxS88Ov2GrcEZ/OEntN+eozUcw3v9Ed7gDFuvTuEfjtE6/PxfcLcLFDfzBq5nCW7kVCTu6mxeyyhYKDq4ZTSxkDeRkNaREMtXwq1KKlIFDemizmBn2UBKJFizm9CfHkFyfeSNCoTyJgTq/hNuuaAjKWlISjqShQgDSwJBitZR6p9A6Y2Qq3jIaA540wVv1MCb8+FWZROK3UBOt7EkqgguYJcIBOlyA6Vn70D6Jyj1RlireOA1G1kmrSJr1mKib5YwkK4UDZZ0VvieQfrHf5VOypmQV9eZNCKlWFgWVaRpKCTPP1yZNJgBXJAspztMEu5SY3ucFUZJp6SWG8vk+na4w+JGnSHSKgRahUhrYdO0DjIhjOeUNChDaezA2j4AlyEUjfYD3N89wL32Ppq7XXjdx5A3NrFiukxyKeGEVPkjlV0f1s5DGP4+uOAXFwWCOxMsSuGziUqZSRhLj2G9HIN2ejC8DsxWNyxlHkmhNCOcPtPBOSpHP2EPL2DtPWHSS8K4kKlnMy8hHXyBM/oO+81XOKMfobTTw2+Rr8KoBCCugwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harbor_conn.png\"\n        title=\"harbor_conn.png\"\n        src=\"/static/c18d41a9c1522c3738af3222150cd9bb/37523/harbor_conn.png\"\n        srcset=\"/static/c18d41a9c1522c3738af3222150cd9bb/e9ff0/harbor_conn.png 180w,\n/static/c18d41a9c1522c3738af3222150cd9bb/f21e7/harbor_conn.png 360w,\n/static/c18d41a9c1522c3738af3222150cd9bb/37523/harbor_conn.png 720w,\n/static/c18d41a9c1522c3738af3222150cd9bb/302a4/harbor_conn.png 1080w,\n/static/c18d41a9c1522c3738af3222150cd9bb/c9c3a/harbor_conn.png 1289w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ID PW 는 기본\r\nID : admin\r\nPW : Harbor12345로 설정이 되어있습니다.</p>\n<p>접속이 되었다면 신규 프로젝트를 생성해주도록하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVQ4y5WT23LaMBCG3QR8kGRbtgGbhHAICYUQUiAk4RQITZOm05tOL/oCfZW+SR/07+zKENKZXvRi55fW0qd/tbIV1Foolo5xEGewdIp3UYbDpIqDuMrzv4Py9N2sO4IVmX00PoxSWI6vUZABCsLnKKoQtgpZ/ydspSF1DMtPKghLKYQuQUZliDCGpwLIQEMEmseuClhpTnnPDzkn/JBzIp8rAkqdMNn1NRwVwpE+HKH4o4oS3uwQ1A/hxyXOe4HmdQTjXJTAzQ+y+HTaJBRs6cMjh2EMlVRA7lVShopNBOXMjJMKZFyGiBKuyBgyLi06iYC2J6GzGgarZ4w2L7haP6M1nqMxmqIxmrE2RzMOHo/nqF1e79y6+dVYW+sEDLMazu7WOLu5x/ntCq3rxb9jskT96tZcy7ZK6b8CSYP0GN35Iy5Xz2hPluyst3hEd/4Rp5MlH0RBY4KeDCamidvmBHpbsnFIQAL0758Y0hzP0Fl/RWe24RL3gxwSkJrKwDCCDKNXIDWFSu4tP2Gw/sxgusN27oiUXHVnG7yfPhjw8A5H9SaOTxpI0ipcFe4BpQGSs/7yCZ3pA+rDKeZfvqG/eERzvGDwtlzj8AYiiPKmvOmyhi0kdPWEF1MnWcdzvjMaN/ION6nrwymaH25R64/edHnXlG3J0VEd7bsHnFKZHCu0JkZp3p5ucL56QfflB+5//cbF959wPLF7MuzQpgctFIqe5MeatnuotLu59lh3ubMLZJ0Bsu4Q9dkT0t4ILv1Zcg9IIAqGugIFx4XtCdiuMLofrkDR9VB0XBQOC6z8WzLUlP0HtOOGBpT0uh8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harbor_project.png\"\n        title=\"harbor_project.png\"\n        src=\"/static/a447318a43d2f000d1a332574afbcfce/37523/harbor_project.png\"\n        srcset=\"/static/a447318a43d2f000d1a332574afbcfce/e9ff0/harbor_project.png 180w,\n/static/a447318a43d2f000d1a332574afbcfce/f21e7/harbor_project.png 360w,\n/static/a447318a43d2f000d1a332574afbcfce/37523/harbor_project.png 720w,\n/static/a447318a43d2f000d1a332574afbcfce/eafa0/harbor_project.png 939w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이미지 레지스트리가 잘 생성 되었으므로 한번 이미지저장소에 이미지를 Push해보도록 하겠습니다.\r\n아래 명령어를 통해 임의의 이미지를 내려받고 태그를 달아주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker pull nginx\r\ndocker pull busybox\r\ndocker tag busybox harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/pkos/busybox:0.1</code></pre></div>\n<p>아래 명령어는 insecure 설정 명령어입니다. 진행해주도록 하겠습니다. 진행 후 daemor reload 및 docker 재시작을 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span>EOT<span class=\"token operator\">></span> /etc/docker/daemon.json\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">\"insecure-registries\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span>\r\nEOT\r\n\r\nsystemctl daemon-reload <span class=\"token operator\">&amp;&amp;</span> systemctl restart docker</code></pre></div>\n<p>다음 아래 명령어를 통하여 Harbor에 로그인하고 이미지를 Push하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker login harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span> -u admin -p Harbor12345\r\ndocker push harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/pkos/busybox:0.1</code></pre></div>\n<p>명령어 수행 후 Harbor에서 Image가 정상적으로 Push 된것을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVQoz0WRS2sTURiGB+3CksnkPulcM5nJZTJJJpPLaI2lIMVNF7oSNxVScaG2Gatxlb/jVqgo7tyLqAtBEKkbBX/HI+dQ2sXLdzbn4Xm/T3n/4y9vPp9x+uUXp1/PePvtNx++/+Hdz3+8/viJ42VGlmW8enHCavWS9XpNdnTEMss4WR7z6PCQg4OHLBYLGaV+f8WVO4+5tv8M7e6Szf2nbO4/Qbv3nMrtB9iGSX3LQK/pVMpVqpUqer1OuVwmn89zdWMDRVEu05/v0Zzs4A6v04hTjG6M1Uvwp3PMdo9yzaVYt9H0ImpFRdVU1JwqYaqqymiaRqFQkFE66S7uIMWOprRnO/jjOcFkTu/WHl5/jKFvUbdcLNfGsAxMy8SyLAzDQNd1qtUqxWKRXC4n4YoTjbHCEUYnppls4462cQYz7EFKIxrT9Vs0Wx3iOKYf9YmiiHa7jeM4EiiqC6AwFlDFG6bYvURWDdJdGslNvNENOZuDiQTWDBvPa+AHAWEYyriuK01N06RUKl1YSkO3P8UME5xhiiPqnxu6YUzUCfH8FkEQ4Ps+3W6XJEkkVJh6nieBou654QxhKYBmb3yZaIoR9HBNi4bfptn05Gexu1qtdrE/8RZTHEYA/wOFg/XaGzCSwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image_push.png\"\n        title=\"image_push.png\"\n        src=\"/static/f68d04d474061bc02b46c775f3ec70ed/37523/image_push.png\"\n        srcset=\"/static/f68d04d474061bc02b46c775f3ec70ed/e9ff0/image_push.png 180w,\n/static/f68d04d474061bc02b46c775f3ec70ed/f21e7/image_push.png 360w,\n/static/f68d04d474061bc02b46c775f3ec70ed/37523/image_push.png 720w,\n/static/f68d04d474061bc02b46c775f3ec70ed/302a4/image_push.png 1080w,\n/static/f68d04d474061bc02b46c775f3ec70ed/07a9c/image_push.png 1440w,\n/static/f68d04d474061bc02b46c775f3ec70ed/e67dd/image_push.png 1801w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음은 YAML 파일의 컨테이너 이미지 저장소 주소를 Local Harbor로 변경해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s -O https://raw.githubusercontent.com/junghoon2/kube-books/main/ch13/busybox-deploy.yml\r\n<span class=\"token function\">sed</span> -i <span class=\"token string\">\"s|harbor.myweb.io/erp|harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/pkos|g\"</span> busybox-deploy.yml</code></pre></div>\n<p>위의 명령어의 yaml 파일을 조회하시면 image가 저희가 방금 저장하였던 local Harbor의 이미지로 지정이 되어있습니다.\r\nkubectl apply -f busybox-deply.yml 을 입력하시면\r\n해당 이미지가 Pulling 되어 Pod가 기동될것입니다.</p>\n<h2 id=\"3-gitlab-을-이용한-local-git-소스-저장소-구축\" style=\"position:relative;\"><a href=\"#3-gitlab-%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-local-git-%EC%86%8C%EC%8A%A4-%EC%A0%80%EC%9E%A5%EC%86%8C-%EA%B5%AC%EC%B6%95\" aria-label=\"3 gitlab 을 이용한 local git 소스 저장소 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. GitLab 을 이용한 Local Git 소스 저장소 구축</h2>\n<p>Gitops 실습에 앞서 소스 저장소 구축을 위해 GitLab 이용해 Local Git 저장소를 구축해보겠습니다.\r\n참고로 GitLab은 최소 요구사항이 제법 높은편입니다.(<a href=\"https://docs.gitlab.com/ee/install/requirements.html\">https://docs.gitlab.com/ee/install/requirements.html</a>)\r\n그래서 실습할때 높은 사양의 EC2를 생성해주는것을 권장드립니다.\r\n아래의 명령어를 순차적으로 입력해주겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create ns gitlab\r\nhelm repo <span class=\"token function\">add</span> gitlab https://charts.gitlab.io/\r\nhelm repo update\r\nhelm fetch gitlab/gitlab --untar</code></pre></div>\n<p>다음 yaml 파일을 아래와 같이 수정해주시면 되겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> ~/gitlab/values.yaml\r\n----------------------\r\nglobal:\r\n  hosts:\r\n    domain: <span class=\"token operator\">&lt;</span>각자자신의도메인<span class=\"token operator\">></span>             <span class=\"token comment\"># 52줄</span>\r\n    https: <span class=\"token boolean\">true</span>\r\n\r\n  ingress:                  <span class=\"token comment\"># 66줄</span>\r\n    configureCertmanager: <span class=\"token boolean\">false</span>\r\n    provider: aws\r\n    class: alb\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: <span class=\"token function\">ip</span>\r\n      alb.ingress.kubernetes.io/listen-ports: <span class=\"token string\">'[{\"HTTPS\":443}, {\"HTTP\":80}]'</span>\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">${CERT_ARN}</span>\r\n      alb.ingress.kubernetes.io/success-codes: <span class=\"token number\">200</span>-399\r\n    tls:\r\n      enabled: <span class=\"token boolean\">false</span>\r\n\r\ncertmanager:           <span class=\"token comment\"># 834줄</span>\r\n  installCRDs: <span class=\"token boolean\">false</span>\r\n  install: <span class=\"token boolean\">false</span>\r\n  rbac:\r\n    create: <span class=\"token boolean\">false</span>\r\n\r\nnginx-ingress:\r\n  enabled: <span class=\"token boolean\">false</span>\r\n\r\nprometheus:    <span class=\"token comment\">#904줄</span>\r\n  install: <span class=\"token boolean\">false</span>\r\n\r\ngitlab-runner:       <span class=\"token comment\">#1129줄</span>\r\n  install: <span class=\"token boolean\">false</span>\r\n----------------------\r\n\r\nhelm <span class=\"token function\">install</span> gitlab gitlab/gitlab -f ~/gitlab/values.yaml --namespace gitlab --version <span class=\"token number\">6.8</span>.1</code></pre></div>\n<p>수정 참고용 이미지 첨부하겠습니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAAA1ElEQVQoz5WQy27CQAxFs65f87CJM5RJB5GWiKpSUf//21CgbBBUxbLuwtbRtW+nGnOd63rDzPhkdWYpbw45KCA8DatGfZ0jJ7yF4R/OqpRHpAxsyHbVFSyqyIb48J1uZTnvjlaaBI1AAAhAgIx07T+cc+TcPq3uxAZRD1ZULaVIhIRIdB+j86LLAWPd2/Rt7z+6/dLpWN7mjzr2Ekb3uW0HH9w9hICI7t73fSmltcbMnSaRYdLgzIFYLi0iv6HB/dgu8wVm3ydtvJz5cg4ZHjE3P58AQTgg6MQkVukAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitLab.png\"\n        title=\"GitLab.png\"\n        src=\"/static/ee0ddc74d7ccd7670a9e531830300551/37523/GitLab.png\"\n        srcset=\"/static/ee0ddc74d7ccd7670a9e531830300551/e9ff0/GitLab.png 180w,\n/static/ee0ddc74d7ccd7670a9e531830300551/f21e7/GitLab.png 360w,\n/static/ee0ddc74d7ccd7670a9e531830300551/37523/GitLab.png 720w,\n/static/ee0ddc74d7ccd7670a9e531830300551/302a4/GitLab.png 1080w,\n/static/ee0ddc74d7ccd7670a9e531830300551/07a9c/GitLab.png 1440w,\n/static/ee0ddc74d7ccd7670a9e531830300551/d2782/GitLab.png 1864w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>헬름 인스톨이 완료되었다면 아래 명령어를 통해 Gitlab 접속 비밀번호를 출력하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get secrets -n gitlab gitlab-gitlab-initial-root-password --template<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>.data.password<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> base64 -d <span class=\"token punctuation\">;</span><span class=\"token builtin class-name\">echo</span></code></pre></div>\n<p>다음 gitlab.자신의 도메인으로 접속하시고\r\nID : root\r\nPW : 위의 명령어의 출력값\r\n을 입력하셔서 접속테스트를 해보시면 되겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVQ4y5WR30tUQRTH7/8ZZSZKSfQWUi9lCha99dgvzRVKi0AwJFRQeoqoNsva1cBs9+6yqbOz996Z+3s+ce9uuyoqduDDmTv3nO9854y18HKZ2bk1nk2/5dGTBZ5OLTJdWKIws3wiL+bW8jw5tUhhZonZ2VUeFuZ5Nb+CNTJwg/6+MfovjHLx/G36zt1ioO8OQ5fGGewfO5arl+9xZXCC4aG7DA9NcG34PtdHHjA++hgrbW0S/SkSNIq07CLN6if07gahKBGJMlGz3M6ddbYfNzdJW1skcqubcX6CqmA1qiXm331m9cMXZL3Mvl1G1jZo2eu49W84tXWc2tdD+Ls/CPdLBHslwr0SsShj5Cax3May6xUm137x5uNvIiXQriBRDdA2qBroDqrW/TbKJvVsTIayUc0Kcm8H1bSx7GqVRnWbNFS0w2C6KzDmBDr/snj+fpebr3dY+S6wlFI4rofvB0RRTBRFOb7vE8cxaZrmGGNOJIwT/CghCCMsISRCtNBa5yL/8DyPJEnyhjQ1pwrSuVNWbykV4HltN8fFaUI9QXqCLRmglUYr1XbmernbIAgOOEwPcFgsqwmCkDAM8x5LewnSUYimxHVcxL5ASonjuKjOIRlat7PyQ6Kkd81s9lmt63p5vZVbNWD4v2i/9uGu/MrdoZ5hVsc9xME55oJHN4+eeja3PcG/nF4OX3QmuVcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_login.png\"\n        title=\"gitlab_login.png\"\n        src=\"/static/0c1d74dca9fe89ca1edbd38f1ec9d007/37523/gitlab_login.png\"\n        srcset=\"/static/0c1d74dca9fe89ca1edbd38f1ec9d007/e9ff0/gitlab_login.png 180w,\n/static/0c1d74dca9fe89ca1edbd38f1ec9d007/f21e7/gitlab_login.png 360w,\n/static/0c1d74dca9fe89ca1edbd38f1ec9d007/37523/gitlab_login.png 720w,\n/static/0c1d74dca9fe89ca1edbd38f1ec9d007/98b29/gitlab_login.png 937w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Gitlab에 접속하신 후 신규 유저를 생성하겠습니다.\r\n권한은 Admin으로 설정해주시면 되겠습니다.</p>\n<p>계정 생성 후 상단의 Edit 버튼을 눌러 비밀번호를 설정 해주도록 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVQ4y5VTy27bMBDUH/dc9FPyC+k3FAVyy7GnBo3dQxvHVkyFT5HLJadYSnKclxsvMCDFJZfDmVVHRBDkzIgxIhGh1opS6jwWMDOYS5s/x7RnTAwdMnxkdNv7LX7drtGvbsE/f4BWN6hEWEKK7XY9jLFwzkNrA2stUiJo7RBDwNfrHT5frnHxfYNODuScwTkjC1OimRE3FpJ7esU0n3IT+1oLQmIMnuCEoXMB+35ACGNjYK1rT/fOYxxjW0spwXsPZx2cc63oIocAtQKY0IWRYCNAuSInRqYCaiO3sc1zQYwEo90hf4wUcwOljC7qR/y9+obkPUoFykvx529h1XS0DsPwCKUG7PfqFdvO/F7h+ssnjLv7ZoJo8jLkgGDRdoFoWufnLns6WTSDas5prQ+Jt/BeHKc6oRzG2AyIYwLnqec4H4HLyYuO0YnYzgRwrg0kZiyGzKMYtDA8xfTAUFpBhJ766vWty/rHCiZxz0Ap1QpLlFrAhd/U8L8FpWnFjL5/wN3dBmqvsNUPWKs/TwzPKhgjYkzPeumUyx948sTQaHNo0vpO0bNMERhr4Y0BbTcocZz+zjML/gP81+cFQXYUWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_passwd.png\"\n        title=\"gitlab_passwd.png\"\n        src=\"/static/7ad2e554468c8cdef4752e9f94ce80f7/37523/gitlab_passwd.png\"\n        srcset=\"/static/7ad2e554468c8cdef4752e9f94ce80f7/e9ff0/gitlab_passwd.png 180w,\n/static/7ad2e554468c8cdef4752e9f94ce80f7/f21e7/gitlab_passwd.png 360w,\n/static/7ad2e554468c8cdef4752e9f94ce80f7/37523/gitlab_passwd.png 720w,\n/static/7ad2e554468c8cdef4752e9f94ce80f7/1b1d5/gitlab_passwd.png 876w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>비밀번호 설정후 Impersonation Token 을 클릭하고 표시된 모든 scopes를 선택하여 Token을 생성해주도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.55555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACP0lEQVQ4y51Uu47bQAzUfwdImS6/kCptkBRpUl+RKh9wTXDx3dmyVqvVat+SVhOQstfyPYDDLUCQprWj4ZBUNQwGbdviYX+A299j+nuLWTbgsyzsUkoIIbL33sM5j5RGOBcwhoCbW4XPvx7w/Y9ApbVZ7+aMKS+IZON0BZJiQowR1jo45zj32qkGbWGMgZQdpJRohYCzDvM8YxxHTNPE3piAvrfQ2sHagGVZiuW8YM4Zc15Q9Wo4AUpQ+RSTeR+YDXnvPMdUaggr2KrIxZ+t0tri8SixP0oMPsH4EYNLxbSLUCbAx+nZ5ZesUmpALRQe65ZBd/uG44eDYN/IHkep0Q8WMURmSI25WCg5kqfSvYG1lkumUkduRuAmkPg552csXsoVhsNgoVSPuq75bZTsOsWNeM/hsdE9AR6ZITEjhivLdVx8yghjfhtgpwwavZZHGtDAErutJZrLceZRem65xFxyiBP20kA0ojALLHRkdszQe87xCHlfntvG9DwDxpSxa9b125ZZLviwkSBeAZ1nleJzo6qUMurO4nCoIVsJ3Wtordn3J6Pf1Ki+7zlPICv7dKU5yVWFOGMnDIQQEKIt27Bl8XTmigwnIGJXmkKA98IyILEoQO7it4O81Y9eTs3YbtAK2Fo0xwZKqasLW2bsnwBszxXg3XGA6rp1Dmm9WOyVwZkpfbpohF7bkDNoNY4ZyqzfOl80u+7sVvgL+9P/p3EpgDGM+HJT4+OPf/j0c4cP3+7w9ff6xc7L21fuDPof2iXEAeqTLcIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_token.png\"\n        title=\"gitlab_token.png\"\n        src=\"/static/849ef182b38e758389f28c3163a874c8/37523/gitlab_token.png\"\n        srcset=\"/static/849ef182b38e758389f28c3163a874c8/e9ff0/gitlab_token.png 180w,\n/static/849ef182b38e758389f28c3163a874c8/f21e7/gitlab_token.png 360w,\n/static/849ef182b38e758389f28c3163a874c8/37523/gitlab_token.png 720w,\n/static/849ef182b38e758389f28c3163a874c8/59000/gitlab_token.png 917w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>계정 생성 및 토큰 발급이 끝났다면 기존에 로그인 되어있던 root 계정을 로그아웃 하고 생성한 계정으로 로그인 해주도록하겠습니다.\r\n로그인 후 blank project를 신규 생성해주도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACAUlEQVQ4y61TzY7TMBjME+5Kq7bSHjjwABy5AdoFHoKX4MCVE1eQEBI3hDhs2e1PEie24784SWf1uTjbNml7IdLIcWKPv5n5nLy4fonp5BZXVze4uHiFy8vXJ0FrZrN3mE7fYjK5DZjO3uP59Q2ezd4gUaKDNR7/60nKrIaSDsDm7OLDFZvNZoAkTdeYz+e4v3/A3d0cec7QtR28b9A0W3jvB3MaRwmddTDaQCkFpTWM1rDWBjjnAowx/Tz+IxDBQLLWGlob0CilDJtH5cYqzkkuSw7GCtR1jbZte1kEmtOiruv2SGhOGCWUQkIIETbHhYRIFh/yzRq7Rz6acsFKrJYpeMHBuUQlFZTSg2rLssRytYZ1bieofZDKRHARJLNCBC+JjHyMIPMpNEvh1S2UbY7Kpe8JtcniYQEudWiN7Ul+pG2eqojjIUhVMk8l8ixDVVUh6dA+SqOqVKiQvtE7/ae2OUsohcByudpKMwaqUtAqEqtgQ6x8rO8GochKh5Q558GnKJFOi+PZK7nbNr/+MqzXKRaLFYqiBIUkhNxL2Pcyo78eztUB8cCeEPCoVYlay5B2zli4z1mWgTG2lW0slKlR/7vDjX8KakD47Q/H558pvv4uICsVjD/sr6bp4NvNScm9hx+/5/jwZYlPP3IY607fhJHei2Q7kk+bfGzzsZQfAbjFrQrMJDAsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_project.png\"\n        title=\"gitlab_project.png\"\n        src=\"/static/ab00de6120124ff017293aaac09edb16/37523/gitlab_project.png\"\n        srcset=\"/static/ab00de6120124ff017293aaac09edb16/e9ff0/gitlab_project.png 180w,\n/static/ab00de6120124ff017293aaac09edb16/f21e7/gitlab_project.png 360w,\n/static/ab00de6120124ff017293aaac09edb16/37523/gitlab_project.png 720w,\n/static/ab00de6120124ff017293aaac09edb16/e4374/gitlab_project.png 927w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>프로젝트 생성이 되었다면 쿠버네티스에서 사용하는 YAML 파일을 GitLab에 업로드 해보도록 하겠습니다.\r\n아래의 명령어를 차근차근 입력해주시면 되겠습니다.\r\n이떄 git clone 이후 Password 입력 부분은 붙여넣기 해도 입력이 안된것처럼 보이는데 정상적인 현상이므로 붙여넣기 해주시면 되겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> ~/gitlab-test <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> ~/gitlab-test\r\n<span class=\"token comment\"># git 계정 초기화 : 토큰 및 로그인 실패 시 매번 실행해주자</span>\r\n<span class=\"token function\">git</span> config --system --unset credential.helper\r\n<span class=\"token function\">git</span> config --global --unset credential.helper\r\n\r\n<span class=\"token comment\"># git 계정 정보 확인 및 global 계정 정보 입력</span>\r\n<span class=\"token function\">git</span> config --list\r\n<span class=\"token function\">git</span> config --global user.name <span class=\"token string\">\"&lt;각자 자신의 Gitlab 계정>\"</span>\r\n<span class=\"token function\">git</span> config --global user.email <span class=\"token string\">\"&lt;각자 자신의 Gitlab 계정의 이메일>\"</span>\r\n\r\n<span class=\"token comment\"># git clone</span>\r\n<span class=\"token function\">git</span> clone https://gitlab.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/<span class=\"token operator\">&lt;</span>각자 자신의 Gialba 계정<span class=\"token operator\">></span>/test-stg.git\r\n<span class=\"token function\">git</span> clone https://gitlab.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/korwoo/test-stg.git\r\nCloning into <span class=\"token string\">'test-stg'</span><span class=\"token punctuation\">..</span>.\r\nUsername <span class=\"token keyword\">for</span> <span class=\"token string\">'https://gitlab.korwoo.net'</span><span class=\"token builtin class-name\">:</span> korwoo\r\nPassword <span class=\"token keyword\">for</span> <span class=\"token string\">'https://korwoo@gitlab.korwoo.net'</span><span class=\"token builtin class-name\">:</span> <span class=\"token operator\">&lt;</span>토큰 입력<span class=\"token operator\">></span>\r\n\r\n<span class=\"token comment\"># 이동</span>\r\n<span class=\"token function\">ls</span> -al test-stg <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> test-stg\r\n\r\n<span class=\"token comment\"># 파일 생성 및 깃 업로드(push) : 웹에서 확인</span>\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"gitlab test memo\"</span> <span class=\"token operator\">>></span> test.txt\r\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"initial commit - add test.txt\"</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVQ4y4WTy27VMBBA84HcigVQiTVbhMSCTQEJhMQH8Cd8Ad+AEILSwi29r7wdx85NYjsHjXtT0YIg0tGMxzPOPOzk8fEz7t17xd27L7lz54Sjo+cHXrA4es5iccJiMcuTaDs+fhNjhPv3X/Pw4VsePTjh6ZN3JGfnGZtNzmqVsl7nlGVLlinStCbL/oY6UJPn6tqe5w3bbU5ijcU56DqPUhWNUvzvm6YQpfcOCITgom2/tySq1nTdRKMdZVVT1Qrn/FVgDL51GOB8IEwwOo8PU1z7AMZYEt1Yyjzj5/kpu8sl6+U5qx9nXJx9ZfntK6efPrI8/RKR/WKzIt9cRkSPbNeU2xVFuiNRjcGUJflySbpLSTcb6qLENDpidXutt6r5g6aqKfOCKi+pypKktT1dmlKcf6dqLFWpaHXHOAa8B+8mpFURf0UIEDxIK4feY7Rlco7gHEldNQyjY/SBoe8ZxxEnm2FiEqYDB937gDGGrtvTtgb8yNnO8vr9Tz58Lq+GIg6qVlhraaS0to22vu+xtouB+/0+Nl1rHTGtQUnJSpFVmk8ry67ek7Taxr8ppWiaJiKHVVUddQnquo4QpAX+kH24RtZXsydeoUQ3hrqWS5milI66SKEoKi4uVqRpTttK9i1amyhnZJ1mBcvlZdRjhlJWUZRRDsNI3w9RSuaSaR3b0UX73xA/8RGZuDEwuoBuTezh75+UKOUOw/DPlyOl94eBJn70dEOgtXu8c3GS4iBS+iODkD/PB8/7M7OfJCP7idwzYzrW6y15VjIODjd6xpnB3UD2bjP7SZsSMXh3QN5omG4w/Ub4B3OmvwDnPLJ4WEm7rAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_push.png\"\n        title=\"gitlab_push.png\"\n        src=\"/static/c993d4d0e687571044ffa5bf93ad1f0f/37523/gitlab_push.png\"\n        srcset=\"/static/c993d4d0e687571044ffa5bf93ad1f0f/e9ff0/gitlab_push.png 180w,\n/static/c993d4d0e687571044ffa5bf93ad1f0f/f21e7/gitlab_push.png 360w,\n/static/c993d4d0e687571044ffa5bf93ad1f0f/37523/gitlab_push.png 720w,\n/static/c993d4d0e687571044ffa5bf93ad1f0f/a8417/gitlab_push.png 941w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVQoz41RSY6DMBDkmJ0QRIiAhM0GsxhDNP//Wo2qJ855DiXbLaiuJbB1A6UM6m6EtTOGYYDWGlVVCcqyxOv1knue54I0TZEkCe73O7Isk9PPgzUvUNUG5eCwrQ7TNAnpPM8wxsi973u0bSvE/JEEj8cDURRht9vhcDhgv9/LGbgwQpZrJMri573C2gXjOGLbNiHnves6Iafauq5RFIUoi+NYSI7Ho+B0OiGwUYy80EiVxXt1MB/LVEgiDxKSnKBigjGQmPaplqTBuizoewOlu29+SilRQ9xuN1wuly/CMJSTc+J6vQoZ5+fzGcFs7d/2wchWKrPWil2fI7Pz5TRNg+fzKVnyTft8+xKDRWtobaCHGfM0QX0Uequ880NmRzKWQ3JaJdgsC2KeotBJVj1apb8FEH47LTFsgj94eOsenEmGzjkhcMsiFmmbdqmEm32D/wFb/gV8pPDrN/4PYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"yaml_upload.png\"\n        title=\"yaml_upload.png\"\n        src=\"/static/e650a332b413265822e7fd637242acfc/37523/yaml_upload.png\"\n        srcset=\"/static/e650a332b413265822e7fd637242acfc/e9ff0/yaml_upload.png 180w,\n/static/e650a332b413265822e7fd637242acfc/f21e7/yaml_upload.png 360w,\n/static/e650a332b413265822e7fd637242acfc/37523/yaml_upload.png 720w,\n/static/e650a332b413265822e7fd637242acfc/302a4/yaml_upload.png 1080w,\n/static/e650a332b413265822e7fd637242acfc/07a9c/yaml_upload.png 1440w,\n/static/e650a332b413265822e7fd637242acfc/71c1d/yaml_upload.png 1536w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>정상적으로 업로드 되었습니다!!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADMUlEQVQ4y4VUbYscRRCen2yExHDhol4ul5h70QRDICJEgxeUw89+EFGJgh9ElIQYxMztzt3u7M5b97z09Os8UjV7l7sjag/PPtVd1VXV1dUbPXpwgN29A2xu7ePa+qd4b+MzbNx4jI3Nx7h5ax93tr/CBxew99HX2Lq9j5tbX+DW7SfY2T3A5sYD3Nl7hOje+w9x/epdbK59iK21Paxf3sWVS9t45+1t5stvnceVSztYv3qP8e7ax7hOfO0+dtbvYvvGQ0TWA+gn+OH3P/HlTy8QH8WAnWFQM6CfAvoVoGOgfzXKJgbU30BIgOFoBMk+AboYUVWUKPM5vv1tgidPY/z6MkGVL5CmKcrsGHU+hcynzKdykUBkE4bMJmirY3TiGFU2RVTLFpPC4PsXOX75K8c8F4jnJZKlxOGyQbzscEjIVljJ8aJdrSnMpMO8DphmHWUosKwtPvlxgc9/XkC0PUSjIDqNUg0oVfhfFJ1nZLUeM3TWAnBAIB7HMIw/Awln8R9jCIEcNugoQqExm82RzlNYa/91k/cefa/hnGM2xkJrzTLti0Ql0bYWlVCo6xpCCCilYIxhQ5KJaU4jhMAbyTGtkWMCrRFHUjSs6PseWhuORKxUD9UpNE3LTPoQhnOgchB7H+B8gHUeUdNptPM5Fs+eYVlI5MsCizRDVdbwbmA4SwiwxjNIdiawTikDUQrA9EBwdOQautecRdt26DibsTYUORAoIz9gYA6cvVmdwjuHXGp880eB50mDqFeG60RHo1p1XXdaw5Pa0PrIhvVS1hy8qgS6pkacCtz/boanLytElDZlRUoyJKbLKcsSUkq+pKZu2KHRY635AmhOtdcawbvTLoi8C5xdWVZo6hZSNqiZ6cYlsixnpjKMMGfk8QLbVqEoJTrVjxnWTYvkaIY8L9kZBSAjIWokyTEWi4znpDuPMXiaLnF4mPA8ctbD+AGt0qsX83qEIfAR6Wgnvfem4ZxlO+5DaoFeWwjRrF6Afw0Kpu3qNRjmc/oVrHVsR8wOdW+QZznKouJFqqtzgZla5xRn192FuadedeORyTjPc37LJ0+MXgF/wwW86Vv9aVBJ/gFvjNgEVH0QBwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"yaml_update_2.png\"\n        title=\"yaml_update_2.png\"\n        src=\"/static/8c1a8402f8e3e6c80440a6981c756246/37523/yaml_update_2.png\"\n        srcset=\"/static/8c1a8402f8e3e6c80440a6981c756246/e9ff0/yaml_update_2.png 180w,\n/static/8c1a8402f8e3e6c80440a6981c756246/f21e7/yaml_update_2.png 360w,\n/static/8c1a8402f8e3e6c80440a6981c756246/37523/yaml_update_2.png 720w,\n/static/8c1a8402f8e3e6c80440a6981c756246/a8417/yaml_update_2.png 941w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"4-argocd-구축\" style=\"position:relative;\"><a href=\"#4-argocd-%EA%B5%AC%EC%B6%95\" aria-label=\"4 argocd 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ArgoCD 구축</h2>\n<p>모든 준비가 완료되었습니다. 이제 ArgoCD를 설치해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span>\r\nhelm repo <span class=\"token function\">add</span> argo https://argoproj.github.io/argo-helm\r\nhelm repo update\r\nhelm <span class=\"token function\">install</span> argocd argo/argo-cd --set server.service.type<span class=\"token operator\">=</span>LoadBalancer --namespace argocd --version <span class=\"token number\">5.19</span>.14\r\n\r\n<span class=\"token comment\"># admin 계정의 암호 확인</span>\r\n<span class=\"token assign-left variable\">ARGOPW</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl -n argocd get secret argocd-initial-admin-secret -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">\"{.data.password}\"</span> <span class=\"token operator\">|</span> base64 -d<span class=\"token variable\">)</span></span>\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$ARGOPW</span>\r\n</code></pre></div>\n<p>설치가 완료되었다면 AWS Management Console에 접속하셔서 LB에 접속하시고 ArgoCD의 LB에 해당하는 DNS name으로 접속해봅시다.\r\nID : root\r\nPW : 위에서 출력한 $ARGOPW</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJUlEQVQ4y5VU/WsVRxTd/7Yt1ippioqp9Euh0L+grdhWydMYIS0NoqgIEaE/iwgVXp55L0mz3/M9O/N2T7l3Xp5pFKQDh5llh7PnnHvvZg8ePcX2gye4u7WN39Y3cGt0F7dGG7i5fof39TubS4w27i3Ptze3cO+P+9jc2sbvfz7EL6Pb+HF0A9mlK99ide07XPrqe1xY+wbnPr+Ijz9dSThzHh+dOY9Pzq78B5+tXMDKxStYvXwVX3x5DatrV/l8+esfkAFACAEnlwuRYZ2Dthb9MAAYgMU+DD2GIe19nzCfzxFiQCalRF4UiDHyJWMtmrbFdDrF369fYzzexVFeQLqI1kYIG9NZSLRtCyEEhJRw3kNpjcw5B6kUE7I65/jCbLaPyeQNdncnmE330LzaQfPiEZoXj9G+fArZlJBKQynFRKHrYIxBprVmRQPbAbz3TEgKhFSoWwHR1tDPf4XZ+Qnm2XWYZz8jqAqxHziuECPv5C6TUqE7kaFkMsFKKUNjHYxz8ADIQ1igixFd18H7jkVoY1hIRjLJ//HK8xx10/AXvXMIocM8BgTv4KxB5yyfiSwR+kSoNUeXETMRUA60yrLkZ6paWbcoWwVhPLT1nNF48gZaG0SqagjsjoiJxybLEta6ZesURcGZ0mp0h1llMK0MbOhZyc7zv3B4lDORNpbd9UOPeT/niDJipTDjPL5DWCuP/cqgUp5bkAj5vtGQVDQh2SqR1bqAMgoZWW1bwTZOE+bCYVpqVkrNTYTUe2SdQC1DxSNC6Vpoo5NCIqVufx/h+EglhVTZruNK0n0SQDAmuVsS0leoTY7XScJSOuyVGsJ0yx5tFtNB2ZNlyp8UtqZOlr13nGGI72ZIyqgo0obFFHnuABJA1pum4QxJYWOqREiVookg64mwTITDgFxYTHKFWnvOkO5UVc1klHvKM1leFsWrBrb+Z2mZ+rCsahzlOXb3ZhjvzTDbP8DB4SEODg7fKlyAMpWKpqtlZNT9SoplUYiwqmu+KKRgnCY4jTT3CZlS9HMQPBlc2aJAVafJoVH6v8ioclQxGp3jnwNlSC/fp+ZD+BdrPdWeorzBhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"argo_domain.png\"\n        title=\"argo_domain.png\"\n        src=\"/static/b22b87931af50f05938326eb78c7e982/37523/argo_domain.png\"\n        srcset=\"/static/b22b87931af50f05938326eb78c7e982/e9ff0/argo_domain.png 180w,\n/static/b22b87931af50f05938326eb78c7e982/f21e7/argo_domain.png 360w,\n/static/b22b87931af50f05938326eb78c7e982/37523/argo_domain.png 720w,\n/static/b22b87931af50f05938326eb78c7e982/906b5/argo_domain.png 950w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC2klEQVQ4y5WSbWvbVhiG/WvWrFDabIsDTZOVdKNxWQqDOKPLGGRQ2Lf9pH3Ih40x6EabErowxry+0K1u4yaxI9vRix1Z8otkWbIsK4RrnGOrZFm8F8HNOZJuXed+nkepX3NP+CX3lO2Hj9j6cZNnuce0bBuzYdFsd+g4Do7j4rpdHLdL1/Oker5PEAS4nofr+aimTr1VIzX77gIryx+TWb7D3NwSn67dZRjHxHGMuKJhjOf38YM+PSF/vAZ9PD+gFw5w+yHdMCIIB6TemZ7nw/cz3FxaYTZ9g7W1uxIUDiLi42N+LxTZuPeQBz//xrf3H/Hd5jb3t3N8I/YPfqLr9aT/5OSEcDAgJVItZbLcymS5eDHN5+tf4UVDLKeL0/XkqSJlFB8zGMZSYj8cxjhhRFukFwmDENfrkVpcXOb69Y+Ynf2AC2+9x9pnX9IJh7SDkDAa4ofRWAO5BmFErz+QFRjdAK0jDvZpeT5WxyV1+/Ydrs1nmJlZZOrCDNnVdTSrQ6VuU67bchWqHjXlqhjWeN9EPWqimS15f2i2qBgNUgJ2de4m8wu3uHTpKiur6+i2MzaNjKrZ4kBv8OpAk9op6/J9NYElwFqD1OXL15ieXiCdvsHU1AzZT75AszujDxJj3eblgcqOBKpShYoh3/3FJ4BXrsyTQM8Dqo0WJd1kR9FQdJNCWedAN2XSBPS/gEnCfPGQ3YpBSTuSCUXZ5yYUMAGdBEzMoof5ksrLksorRZOHiB6fW3ICfHsqTXZ1BFQbbSkx8RHQpKjW2a2KlCblmoU29iT6G/BNQqvDXtV4o4Kiki+W+WNP4cWeQn6/TL5YYf+wxr5aY7eiyz5Xa9ZkoOiVkEilGA1yL17z9febbNzbYuOHrdGQjIYECZ9Ss6hMBNqjMk+XvXdY41mhxPPXipTooSj5tG9yyWeGMvp92hhNB8Me6fSEJw7ln6Z89oCzz/8zUBj/TaeBfwKtL4KfmfS8hQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"argo_connect.png\"\n        title=\"argo_connect.png\"\n        src=\"/static/45f179d326788062d64e9d3555c47ff5/37523/argo_connect.png\"\n        srcset=\"/static/45f179d326788062d64e9d3555c47ff5/e9ff0/argo_connect.png 180w,\n/static/45f179d326788062d64e9d3555c47ff5/f21e7/argo_connect.png 360w,\n/static/45f179d326788062d64e9d3555c47ff5/37523/argo_connect.png 720w,\n/static/45f179d326788062d64e9d3555c47ff5/40601/argo_connect.png 945w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>정상적으로 접속 가능합니다!!</p>\n<p>이제 ArgoCD로 애플리케이션 배포에 사용할 깃 저장소와 쿠버네티스 클러스터 정보 등록을 위하여 ArgoCD CLI 도구를 설치해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64\r\n<span class=\"token function\">install</span> -m <span class=\"token number\">555</span> argocd-linux-amd64 /usr/local/bin/argocd\r\n<span class=\"token function\">chmod</span> +x /usr/local/bin/argocd\r\n\r\n\r\n<span class=\"token comment\"># 버전 확인</span>\r\nargocd version --short</code></pre></div>\n<p>CLI를 설치했으면 ArgoCD에 로그인 해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">CLB</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>각자 자신의 argocd 서비스의 CLB 도메인 주소<span class=\"token operator\">></span>\r\n\r\n<span class=\"token comment\"># argocd 서버 로그인</span>\r\nargocd login <span class=\"token variable\">$CLB</span> --username admin --password <span class=\"token variable\">$ARGOPW</span>\r\n<span class=\"token comment\"># 기 설치한 깃랩의 프로젝트 URL 을 argocd 깃 리포지토리(argocd repo)로 등록. 깃랩은 프로젝트 단위로 소스 코드를 보관.</span>\r\nargocd repo <span class=\"token function\">add</span> https://gitlab.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/korwoo/test-stg.git --username korwoo --password hello1234\r\n \r\n<span class=\"token comment\"># 등록 확인 : 기본적으로 아르고시디가 설치된 쿠버네티스 클러스터는 타깃 클러스터로 등록됨</span>\r\nargocd repo list\r\n\r\n<span class=\"token comment\"># 기본적으로 아르고시디가 설치된 쿠버네티스 클러스터는 타깃 클러스터로 등록됨</span>\r\nargocd cluster list</code></pre></div>\n<p>로그인이 완료되었다면 ArgoCD를 이용해서 RabbiMQ Helm 애플리케이션을 배포해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RabbitMQ 헬름 차트 설치</span>\r\nhelm repo <span class=\"token function\">add</span> bitnami https://charts.bitnami.com/bitnami\r\nhelm repo update\r\nhelm fetch bitnami/rabbitmq --untar\r\n<span class=\"token builtin class-name\">cd</span> rabbitmq/\r\n<span class=\"token function\">cp</span> values.yaml my-values.yaml\r\n\r\n<span class=\"token comment\"># 헬름 차트를 깃랩 저장소에 업로드</span>\r\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"add rabbitmq helm\"</span>\r\n<span class=\"token function\">git</span> push</code></pre></div>\n<p>다음으로 ArgoCD에서 직접 동작하는것 확인하기 위한 작업을 진행해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/\r\n<span class=\"token function\">curl</span> -s -O https://raw.githubusercontent.com/wikibook/kubepractice/main/ch15/rabbitmq-helm-argo-application.yml\r\n<span class=\"token function\">vim</span> rabbitmq-helm-argo-application.yml\r\n\r\n--------------------------------------\r\napiVersion: argoproj.io/v1alpha1\r\nkind: Application\r\nmetadata:\r\n  name: rabbitmq-helm\r\n  namespace: argocd\r\n  finalizers:\r\n  - resources-finalizer.argocd.argoproj.io\r\nspec:\r\n  destination:\r\n    namespace: rabbitmq\r\n    server: https://kubernetes.default.svc\r\n  project: default\r\n  source:\r\n    repoURL: https://gitlab.korwoo.net/korwoo/test-stg.git\r\n    path: rabbitmq\r\n    targetRevision: HEAD\r\n    helm:\r\n      valueFiles:\r\n      - my-values.yaml\r\n  syncPolicy:\r\n    syncOptions:\r\n    - <span class=\"token assign-left variable\">CreateNamespace</span><span class=\"token operator\">=</span>true\r\n--------------------------------------\r\n\r\nkubectl apply -f rabbitmq-helm-argo-application.yml\r\n\r\n\r\n\r\n</code></pre></div>\n<p>정상 작동하는것을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEDElEQVQ4y3WU3W8UVRjG50q5MN5ImgAmhpK0tmoBd5eWUsq2QFvaBRRCw3+jJFCg0oBeee2NiV6QKMQEMSRyA0YTY0yI0o/d7c7O95z52tmd/ejPzNltQQ2TvDmTmcnvvM/zvGeU+/cfcO+Hh3z37V2++eprfv/lV4TjUtF0qrqObpg4joMQHo7rynKFIAhC/CDEER6eH7KublDSiyiZzCSLC+c5NXORgwcnuHHzDulVb7ZIkgTDsjEdFy8ICaIarXaHuJEg/IANVcf0Q9woxosbRHGC8uHhSaYn55iZvcDIyDGWl7vAdrst17VShQePn/D9w5959OQ3NlSDP/9e58fHT7n302NqtZjtq9lMUI5NzHFmfpHCwiKD745y6/aX3ZetFltbW2yBXB1X4Ec1RBBhhDWanY78Ln3f6XS/SxUpJ0+eJ58vcPToafb3H2Jl5Qs69SrFcoVGkhDaf7FZqaJqBq7wpNQ1yyVptSUu3exFh02UwtnLnMgXGB+f5cCBw3zWk9xoJLRabYJAEMd1anFdAlNwHNW6tnTS6kh70rXeaKCknY2Nneb45DyDgzmuLa0QNloYrocTRJgiQHMEquVSMV3KhoNqCaqmgy90gjCk2eoCPT9AyWWnyOWmyeWm6O8/xNWlFewwpqxb6K4nQUXN5Pmmzppqslox2NBsSpqFYaqYjsAWAV4US5+V/NQ5JibOkMlMMTCQZen6bXQvkoDViikh61Vrp9JnRc2WGwpXxQ9DvCCi0WpTUaso7+wf4q3de9i9ew+vv/YGn1xZwvBjCXwZ9AKYdmihmg6Oq+P6AWGtTpy02CiWUEYOjjM0lGV4OMu+fYNcvXYL3avJzqTE7ap01+cpsGqh2QLb0bGFhx/F1JImxVIZpf/A+/T1vU1f3z527XqTT69cR/dr/LFaoqTbbBoOm4ZLJQ3C9uQmKVB3BEIYCN/Hdj3qSYvy5ibKByPjvDcyJjvcu3dAplyxfe4+eoqul/A9k7jRpN5IcNIzq1kSmEpOQzHSYxnWiOoJ66nkzNgpps9dYjp/Vo7NzeXP0UTIsw2VombJLkuGw1rF4FlRld6moVjCxxcaQRgRxQ0ZSqlcRslmj3NmZo7TMxcZHMzKn0OacgrY9rDrpyXHZbXnYdVycV0dx/MJ4zr1ZrvrYXb0FKPHZslmu3O4dOPF2KxXXx4Zc2dstoG2Y2C5njzfYdzopZzJM7lwicL8JYaHR7mxfAdNAo1/zeD2/fYc6rZAuJoMxfUCgijuSs5k8sxOf8zCwqIEXu9JfiVQNXseBlh2VZ4U0/Vw/agXSuYEhbkLzKfAoSM7Hr4KuLYD9PFcFS8IdiRLD3NH8nx07gKTJwoMDGR6Kf8f+F+orKojw9oOr1w1+AeJKSTjBUqkwwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"argo_check.png\"\n        title=\"argo_check.png\"\n        src=\"/static/545fd8a628f9eb4428100aaa8fb4c6d7/37523/argo_check.png\"\n        srcset=\"/static/545fd8a628f9eb4428100aaa8fb4c6d7/e9ff0/argo_check.png 180w,\n/static/545fd8a628f9eb4428100aaa8fb4c6d7/f21e7/argo_check.png 360w,\n/static/545fd8a628f9eb4428100aaa8fb4c6d7/37523/argo_check.png 720w,\n/static/545fd8a628f9eb4428100aaa8fb4c6d7/ecf19/argo_check.png 948w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"5과제-1--harbor에-자신만의-아무-이미지나-태그해서-업로드하고-다운로드해서-스크린샷\" style=\"position:relative;\"><a href=\"#5%EA%B3%BC%EC%A0%9C-1--harbor%EC%97%90-%EC%9E%90%EC%8B%A0%EB%A7%8C%EC%9D%98-%EC%95%84%EB%AC%B4-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%82%98-%ED%83%9C%EA%B7%B8%ED%95%B4%EC%84%9C-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EA%B3%A0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%B4%EC%84%9C-%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7\" aria-label=\"5과제 1  harbor에 자신만의 아무 이미지나 태그해서 업로드하고 다운로드해서 스크린샷 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.과제 1.  Harbor에 자신만의 아무 이미지나 태그해서 업로드하고 다운로드해서 스크린샷</h2>\n<p>저는 Azure에 이미지 저장소를 하나 만들어서 컨테이너를 하나 Push해둔 상태입니다.\r\nAzure Container Registry에 저장되어 있는 이미지를 Harbor에 Push &#x26; Pull 해보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQ4y42USYvbQBCF9ZsDITkkBELyB+aWP5FAtgkYnFsg5yELuRkvanVrbW3dlqU3vLZb1nhkSMOjZLvq61dVwsGTLwIvFxIvFgqvlzE+/db4+CvH+7sMH+5y3P4t8fmPxuJfibdLiWe3Am+WEs+/CTz9GuLVIsK7nwlufqS4+b5GoFMFKULIKMJms8E2FGjtHo3dwzAai9p2GIYB/3OC1hhIpaDLEk3ToG0aWGNgrXHRmBb94eCS+wHofZyId9W2h+16BKY1iOMYh1PRtVOWJYQQKIrCPXtVVeWiLiv0w4DAODf2QTHbm8oBtUaapk4+fy4vaNsWSkpIKd1NXdfNJuoTkJ149X0//u5zA1pOkgRKSSip3BznjjXWQWlgKkIfLKXQFZKsQLffu1aYQKdZlk2UIs9z1HXtZvZYx1kyJ6AjPkzfCkK4ALrmwih2wYVQzL8Uv4+iCMHlMvy8VquVg0aRHGfMAooXus1qPYoOwzBEcG0B6/XaAeUJJkfo2TWXxFy6I3C3280Dy1JDhMIVKaUQK3URjzC2OgVut9tzy1Mgh8/bKLYRCeHcerHty7kSzM+zQN7GQsJ824RIeZwhXfqX3MN8nAfW9Qg8gqT78zjO8TFwCr3qkLApkMs4O5XjUoqJOwLvAcS5x00jp4SCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"azure_cr.png\"\n        title=\"azure_cr.png\"\n        src=\"/static/33ec562b62a58a6d8d87980292e7a45a/37523/azure_cr.png\"\n        srcset=\"/static/33ec562b62a58a6d8d87980292e7a45a/e9ff0/azure_cr.png 180w,\n/static/33ec562b62a58a6d8d87980292e7a45a/f21e7/azure_cr.png 360w,\n/static/33ec562b62a58a6d8d87980292e7a45a/37523/azure_cr.png 720w,\n/static/33ec562b62a58a6d8d87980292e7a45a/98b29/azure_cr.png 937w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아래의 명령어를 입력하여 Azrue CLI를 설치하고 Azure에 로그인을 해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -L https://aka.ms/InstallAzureCli <span class=\"token operator\">|</span> <span class=\"token function\">bash</span>\r\n\r\n설치완료 후\r\naz login\r\naz acr login -n <span class=\"token operator\">&lt;</span>컨테이너 저장소 이름<span class=\"token operator\">></span>\r\naz acr loign -n korwoo\r\ndocker pull korwoo.azurecr.io/korwoo_project:47\r\ndocker tag 이미지id harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/pkos/stayfocus:0.1\r\ndocker login harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span> -u admin -p Harbor12345\r\ndocker push harbor.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>/pkos/stayfocus:0.1\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQY0z2Py26FMBBD2UJALIqgPC8kAXIvFeIp4P8/zJVHahdezMTxGXu7sfgxPb7NB19ZgdergTEWTdMgyzKM44i6rtG2LZZlQZqmCMMQeZ7LLo5jKKXES3nzusB93pjeDkZrOOfQ9z2maUJZliIGJEmCfd9xnuc/gDP9nAnetg3euq6oqgpBEECpUD7/iWRrLYZhkMvoPY4DxhgBzfMsb77vQ2stDTymMp0G1mA4iVQURei6Tvasc10XnueREPoYwAsJL4oC933jF7XNbdDOciO1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"azure_images.png\"\n        title=\"azure_images.png\"\n        src=\"/static/3d73184df37d8009add6ab312e35d9c4/37523/azure_images.png\"\n        srcset=\"/static/3d73184df37d8009add6ab312e35d9c4/e9ff0/azure_images.png 180w,\n/static/3d73184df37d8009add6ab312e35d9c4/f21e7/azure_images.png 360w,\n/static/3d73184df37d8009add6ab312e35d9c4/37523/azure_images.png 720w,\n/static/3d73184df37d8009add6ab312e35d9c4/302a4/azure_images.png 1080w,\n/static/3d73184df37d8009add6ab312e35d9c4/71ee9/azure_images.png 1081w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACN0lEQVQ4y92RWVMTQRRGx43CMlgUyDKZJIQskGQmmT2TmQlhEQwEZClKUANilSgP/hjZfPLHHqs7BkHJi48+nLpf39v99e3bSuLrDx58ukb5cN7j4wVDp1cMf76SscclT04vZRTrkbNrRs6uUE7OUY6/kfgi9n9HOblAMbe7ZJZ3SbgrPNRjhq0lRhvrjAZthqxlHlUXeVxbkgj9zFtjLOzw1FllLNwg4a3J2vNgHS1qoySNgJQZotUapGohaTNCNeqoVhPVjNCsiKTukTR8iap7qBVP5kQUa83wmZy3MeJVFL/zlniny/zCJqXFbQpRm6wZyGIpWJQ6WbbQKjZa2e7F21pGB7VkMuc3UXJmQNGNmdFdJnNlpooGOTukEi7jrnTIWQ3UkiUP3Tb4k6SgbKOoc1U0caBkMpmvMF00SOku6WqdfLDEjBmQqfqkDQ9N90iJKE3c34Ziv8y7KMJkIleWZoKpgk5adyk4EdmqT7ZWlzpnBcw4TTJ23OuobJMSF+iuRIxG5BVh0OfG0PCYdWK0asB0xWO6ZJMS5maDVMUhZ0dkanXm/RZzfousFZJ3mzJ3x1Awka9QcGNaO4c0d9+zsNcl7uwRbe0TbuzSeLVFMVhk1o3JOyFZJ5K6FL2kWG8NMHQiNg+O2HzT7SH0wRGvD49p77+Tnya6KXgLFLxYzjnnxH93KJ9cNOR8xvM643njF/oNLwq9uphXf3497Q2aoXFn8330P+U+Bhr+KwMN+zf+f4Y/ATiI58cTq6FZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harbor_azure.png\"\n        title=\"harbor_azure.png\"\n        src=\"/static/2e20baa3bd98fb52a8808c14c7d84ff9/37523/harbor_azure.png\"\n        srcset=\"/static/2e20baa3bd98fb52a8808c14c7d84ff9/e9ff0/harbor_azure.png 180w,\n/static/2e20baa3bd98fb52a8808c14c7d84ff9/f21e7/harbor_azure.png 360w,\n/static/2e20baa3bd98fb52a8808c14c7d84ff9/37523/harbor_azure.png 720w,\n/static/2e20baa3bd98fb52a8808c14c7d84ff9/98b29/harbor_azure.png 937w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이미지가 정상적으로 Push 되었습니다.\r\n이제 해당 이미지를 Pull 해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker rmi -f <span class=\"token operator\">&lt;</span>이미지id<span class=\"token operator\">></span> \r\ndocker pull harbor.korwoo.net/pkos/stayfocus:0.1</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQoz52RSY6DQAxFaxkIYUyQCKAWYQqjQrMI97/Yb31LhQILpPTiyWCbV3ah8vQHSdUjywv0fY+u65DnOZIkQZqmiONYuN/vQhRFa449zF2vV7iuC8dxoH7nGc+qRNu2qOtaIoWe5wlBEMC2bZxOJ8EwjJXz+Sw9lPOg2+0GtbzfqJ9PvF4vDMOAeZ5RVZWcqKXE932RM29Z1grfOSFrRC3LImtO0yRSLdSSPVyLk2kh+8IwFChWFJRlKVKuTClX1iuZprlByxg1n3WlJ9LCcRzxeDw2U+w5qqmmaVAUBRg5Kf90lmWHHx2huBofLpfLhn8L9/eh+cx/Lfz2no6Efy4v9fKiyyV6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harbor_pull.png\"\n        title=\"harbor_pull.png\"\n        src=\"/static/07732dc799b0a9849dce299b5738ac12/37523/harbor_pull.png\"\n        srcset=\"/static/07732dc799b0a9849dce299b5738ac12/e9ff0/harbor_pull.png 180w,\n/static/07732dc799b0a9849dce299b5738ac12/f21e7/harbor_pull.png 360w,\n/static/07732dc799b0a9849dce299b5738ac12/37523/harbor_pull.png 720w,\n/static/07732dc799b0a9849dce299b5738ac12/302a4/harbor_pull.png 1080w,\n/static/07732dc799b0a9849dce299b5738ac12/62da8/harbor_pull.png 1262w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"6과제-2---자신만의-텍스트-파일을-kops-ec2-로컬에서-gitlab에-올려보기\" style=\"position:relative;\"><a href=\"#6%EA%B3%BC%EC%A0%9C-2---%EC%9E%90%EC%8B%A0%EB%A7%8C%EC%9D%98-%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC%EC%9D%84-kops-ec2-%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-gitlab%EC%97%90-%EC%98%AC%EB%A0%A4%EB%B3%B4%EA%B8%B0\" aria-label=\"6과제 2   자신만의 텍스트 파일을 kops ec2 로컬에서 gitlab에 올려보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.과제 2.   자신만의 텍스트 파일을 kops-ec2 로컬에서 GitLab에 올려보기</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> korwoo-gitlab <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> korwoo-gitlab\r\n\r\n<span class=\"token function\">git</span> config --list\r\n\r\n<span class=\"token function\">git</span> config 설정이 제대로 안되어 있다면\r\n<span class=\"token function\">git</span> config --global user.name <span class=\"token string\">\"korwoo\"</span>\r\n<span class=\"token function\">git</span> config --global user.email <span class=\"token string\">\"korwoo93@gmail.com\"</span>\r\n</code></pre></div>\n<p>이후 위의 과정을 참고하여 다시 신규 프로젝트를 생성해주자</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://gitlab.korwoo.net/korwoo/korwoo-stg.git\r\n<span class=\"token builtin class-name\">cd</span> korwoo-stg\r\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"stay focus korwoo!!\"</span> <span class=\"token operator\">>></span> korwoo.txt\r\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"This Is Persornal Commit\"</span>\r\n<span class=\"token function\">git</span> push\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeUlEQVQ4y42Q7UsUURSH57/szTJNij72oW+lqEUQ9Qf0KQgpa02zDCMsMiqpCPoQlqXrapm7s7uzM3fuvNw7c+eJuW7rJggNPJxzfudlzrnO4twSCwsrVB6+5s7Uc6buLnFv+gXT918y/eAl9+6/sJRx5eEys4/e8PjJCnPzb6nMLPOg8oq5+XfMVJ5xe2oW58LpMUZOTXD29DjnBscYHhhl4OglBo5dZuDoZU5YRq09fmQvHh6cZOjkBCNDVzkzOMnImWtcPDfJ+eErOO1QYUSN9Y1VPn5ZZXvrG8r7QdT6Qdr+Tt5Z28dfw/hr6PZXkBsQVyHqIqtWc7yWR9zZYf79BjeerrP0eQsVefidFnHQIBPb6OAAXU0FW6iu1aXvb+F4bZ9fXsrnms+n9SY7TZ/N3x7bjYDNekC1HrDZED2qdUGtEVLdLfXQar99TV3k7HTU3sB2qLm1XOf64i+afkTLE7R8SVNmuGFGsw8by7xru7rMezjtVockVZiiII0jUpVRALkp/hvT5zt+IIk7Pu7qKnXXo7HrUt91CQNJrg1a5WT96H4MKtX4HUHgh2ilcTwvIJERodskjhVxnFrKwiwz/w7oxlplPVSakcQpSaLQOts7OU5SEqVJ03JYTJIkFmMMRVFYKAFMniNDiZSRJYoiWytEaPudwBekaU6jJWg124hAIsPYnlqiVA7GMPPBZWyuxvijGjcXf9L0BJGUCCEJw4ggEPsb2vO671H+UUpJKEJMbuyDlxuKOMMNFK5QeFKTG2MvKMnzktxap9yodHqn9X1/tYN6N7mfp+jVO2mi9xuKw4f063v8m+sNTGJFYYpDmv6fvwP/AKeyVQU/HB1tAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gitlab_push_2.png\"\n        title=\"gitlab_push_2.png\"\n        src=\"/static/875742fba5eecc6924f443a37171a9fc/37523/gitlab_push_2.png\"\n        srcset=\"/static/875742fba5eecc6924f443a37171a9fc/e9ff0/gitlab_push_2.png 180w,\n/static/875742fba5eecc6924f443a37171a9fc/f21e7/gitlab_push_2.png 360w,\n/static/875742fba5eecc6924f443a37171a9fc/37523/gitlab_push_2.png 720w,\n/static/875742fba5eecc6924f443a37171a9fc/146da/gitlab_push_2.png 943w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"7-과제3--교제의-책-273p-gitops-실습-해보기클러스터-설정-내역-변경과-깃-저장소-자동-반영\" style=\"position:relative;\"><a href=\"#7-%EA%B3%BC%EC%A0%9C3--%EA%B5%90%EC%A0%9C%EC%9D%98-%EC%B1%85-273p-gitops-%EC%8B%A4%EC%8A%B5-%ED%95%B4%EB%B3%B4%EA%B8%B0%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%84%A4%EC%A0%95-%EB%82%B4%EC%97%AD-%EB%B3%80%EA%B2%BD%EA%B3%BC-%EA%B9%83-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%9E%90%EB%8F%99-%EB%B0%98%EC%98%81\" aria-label=\"7 과제3  교제의 책 273p gitops 실습 해보기클러스터 설정 내역 변경과 깃 저장소 자동 반영 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7 과제3 . 교제의 책 273P GitOPS 실습 해보기(클러스터 설정 내역 변경과 깃 저장소 자동 반영)</h2>\n<p>클러스터 설정 변경 검증을 위한 2개의 애플리케이션 배포를 위한 yml파일을 준비해주겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">httpd-deploy.yml\r\n\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: httpd\r\n  namespace: httpd\r\n  labels:\r\n    app: httpd  <span class=\"token comment\">#service가 바라보는 label이 아님. 주의.</span>\r\nspec:\r\n  replicas: <span class=\"token number\">3</span>\r\n  selector:\r\n    matchLabels:\r\n      app: httpd  \r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: httpd  <span class=\"token comment\"># Service가 바라보는 label 지정 </span>\r\n    spec:\r\n      containers:\r\n      - name: httpd\r\n        image: httpd</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">httpd-svc.yml\r\n\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: httpd-svc\r\n  namespace: httpd\r\nspec:\r\n  ports:\r\n  - name: http\r\n    port: <span class=\"token number\">80</span>\r\n    protocol: TCP\r\n    targetPort: <span class=\"token number\">80</span>\r\n    nodePort: <span class=\"token number\">30180</span>\r\n  selector:\r\n    app: httpd\r\n  type: NodePort</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/gitlab-test/test-stg/\r\n<span class=\"token function\">mkdir</span> 03.httpd\r\n<span class=\"token builtin class-name\">cd</span> 03.httpd</code></pre></div>\n<p>이후 03.httpd 디렉터리에 위2개의 yaml 파일을 저장후 Push 시켜줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQoz42PTUsCURSG5/9XmoJEi2jTwiEoqGWrWkSGGWGCaYWmGWTqjHPv3K9z5425zqiFUAcezvfLOV5l7wyVygkO9k9RKfvY3jpCsVBFoVB13lH0M6pr+K5XLh1jt+ijVPSxs30Ir9sdYdjr4+KqhsvrOp4fG3hp1vDavHH0WrcYtOsYtO82Mnxq4L3TwKh7j49OAx4ZC2mA84cJmm8BAi7wxSSmfMGECUyYRCgNQkUIZUYWBy43zs+EgTcPGaQkTLmBUARNCbjQCEIOLglCJ45YWYdQq1zrxbw0K7xozmE0Yd0055h9jjEPI2ilQYZgybo5JRSkUFBCotVPP9LZVuLwtCKkbydJ4khNSgXGY8SxWPowjMAYd0QRB+cxWr0xAqYWctn+UjAvpkbagDEGrTWstY44jiGldDN5zRoFJD93Nwom1joxIlq+k8Z5nl9DZFc7mwVXjdz+yn/XNl+YXfBf1i/8Bui68m5lBTo5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"push_check.png\"\n        title=\"push_check.png\"\n        src=\"/static/8eecf76f421734418a96d4e0d1a3b3ea/37523/push_check.png\"\n        srcset=\"/static/8eecf76f421734418a96d4e0d1a3b3ea/e9ff0/push_check.png 180w,\n/static/8eecf76f421734418a96d4e0d1a3b3ea/f21e7/push_check.png 360w,\n/static/8eecf76f421734418a96d4e0d1a3b3ea/37523/push_check.png 720w,\n/static/8eecf76f421734418a96d4e0d1a3b3ea/302a4/push_check.png 1080w,\n/static/8eecf76f421734418a96d4e0d1a3b3ea/07a9c/push_check.png 1440w,\n/static/8eecf76f421734418a96d4e0d1a3b3ea/5f7fb/push_check.png 1889w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아래의 yaml파일은 아파치 웹서버를 설치하는 ArgoCD application CRD yaml 파일 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">httpd-directory-argo-application.yml\r\n\r\napiVersion: argoproj.io/v1alpha1\r\nkind: Application\r\nmetadata:\r\n  name: httpd\r\n  namespace: argocd  \r\n  finalizers:\r\n  - resources-finalizer.argocd.argoproj.io\r\nspec:\r\n  destination:\r\n    namespace: httpd\r\n    server: https://kubernetes.default.svc\r\n  project: default\r\n  source:\r\n    repoURL: https://gitlab.korwoo.net/korwoo/test-stg.git\r\n    path: 03.httpd\r\n    targetRevision: HEAD\r\n    directory:\r\n      recurse: <span class=\"token boolean\">true</span>\r\n  syncPolicy:\r\n    syncOptions:\r\n    - <span class=\"token assign-left variable\">CreateNamespace</span><span class=\"token operator\">=</span>true\r\n    automated:\r\n      prune: <span class=\"token boolean\">true</span>\r\n      \r\nkubectl apply -f httpd-directory-argo-application.yml</code></pre></div>\n<p>이후\r\nk get applications -n argocd 명령어를 통해 httpd가 Healthy 상태로 바뀐것을 확인할 수 있습니다.\r\nyaml 파일 마지막 부분에 automated.prune: true이 설정하여 ArgoCD 에서 SYNC 하지 않아도 자동을 동기화 작업을 진행하게 됩니다.\r\n동기화 작업이 완료되어있다면 POD와 Object를 정상적으로 조회할 수 있습니다.</p>\n<p>설치가 정상적으로 되었습니다!!\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVQY02VR2W6EQAzjmQXKOZxDuW9WC/z/t7lyKlClPkRxRrHjZIx30yKzv2ArjSDVGPoe+76jaRrUdY2u6zAMg9RFUSBJEkRRBK01XNfF6/WCZVlPGMfng7qqEKkYkVI4jgPTNMHzPBGieBAED5lh2zZM03zE/ooa5zihjVOo7x5hpkWcQlmWYZ5n9H0vLsuyRFVVgpmVUv/c/QqeJ7Ztw7quuK5LMus0TYXo+z7YQ2G+0Tkdcyhd3kK3e4ONvA/JN2aEYSi3ogDrPM8Fk8z1ucG9OoNYHC7LgjiOJTiZpHEcBdMRb9i2rQzgUG7AQfyc+/PYy+w4Dn4ANRicYAtB0EsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"http_healthy.png\"\n        title=\"http_healthy.png\"\n        src=\"/static/9f3a331f11c15bcc4aded806e80d7843/37523/http_healthy.png\"\n        srcset=\"/static/9f3a331f11c15bcc4aded806e80d7843/e9ff0/http_healthy.png 180w,\n/static/9f3a331f11c15bcc4aded806e80d7843/f21e7/http_healthy.png 360w,\n/static/9f3a331f11c15bcc4aded806e80d7843/37523/http_healthy.png 720w,\n/static/9f3a331f11c15bcc4aded806e80d7843/302a4/http_healthy.png 1080w,\n/static/9f3a331f11c15bcc4aded806e80d7843/96e86/http_healthy.png 1089w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제 깃 저장소에서 소스변경 하지 않고 클러스터에서 임의로 리소스를 변경하고 오브젝트를 삭제하여 ARgoCD GitOps의 동작 과정을 확인해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">k ns httpd\r\nk edit deployments.apps httpd\r\n\r\ncontainers.image: httpd:alpine\r\n</code></pre></div>\n<p>ArgoCD 페이지에서 APPDIFF 메뉴를 통해 차이점을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVQoz2VS3U4TQRjde73pDb2xQChgmm79oVW88JlIaSXV+BomalBEUe4Mr6GJCoot0WdQ29352dn5O2a+dhcKs5nsZs985zvnmxO1Nx6g2Wyj1x/g2ctdfDn+jrC01vg7nkBkGbz39K94W+dgjME4ScCEgHOuxKNW3MHKShO9nSd4tb+P0+EZgVwIpIwTcXG4JLQWQmZIGEOe67mGUbvzELXaTewMnuLj0RFGv37DeU9kQkrkWpOiiwqNtYTzAre2bBjF8T0sLTXQ7Q2w9/4QP4ZnCGVJyiCzDMbYK5YDYVAXVGpjSjIiXF1tYmFhEd3+AM/33uLT1xMqmqQpza9Yc5adQ8o5zW8Oh0dUrdZw/VoFW9uP8OLNAT5/m15KUMCFPFc32wUh44J2cSHFgejG4hoqlSoRvj44xMnPEeFCCCiVw1kX2gPOwbvpt7EGPJOQSsF6BwcPN3ui23c3Ua/HZHn33Qccn46CBCghkUwS6EzBaQ2nDbwx4YqR6QxCS4x5AmkUcqeRew3tDaJG3MHycuMC4ZAUqjzHn/EETEgafGmNYuOgtcG/STKLlpk5AaJWaxPra7fQ7T8+VwiAcU5zzJS6GmxrKafTJCiKWZnDjTv3Ua83sX2JMGWMhh6iEYouB5vNgh+iFdJQOPgPnd8IZ3/BFG4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"argo_appdiff.png\"\n        title=\"argo_appdiff.png\"\n        src=\"/static/b379fa93d5582bf7b42f131669bfaa56/37523/argo_appdiff.png\"\n        srcset=\"/static/b379fa93d5582bf7b42f131669bfaa56/e9ff0/argo_appdiff.png 180w,\n/static/b379fa93d5582bf7b42f131669bfaa56/f21e7/argo_appdiff.png 360w,\n/static/b379fa93d5582bf7b42f131669bfaa56/37523/argo_appdiff.png 720w,\n/static/b379fa93d5582bf7b42f131669bfaa56/302a4/argo_appdiff.png 1080w,\n/static/b379fa93d5582bf7b42f131669bfaa56/07a9c/argo_appdiff.png 1440w,\n/static/b379fa93d5582bf7b42f131669bfaa56/966c1/argo_appdiff.png 1694w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그렇다면 이번에는 오브젝트를 삭제해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">k get svc\r\nk delete svc httpd-svc</code></pre></div>\n<p>ArgoCD 페이지에서 변경 내역을 확인하실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVQoz5WQW2sTQRiG9yfolXfmoiAIjfHQCzVtLd6kxTv9AYIgeuFPEmxtK3gC9cZ/4U1saZo9JZs9zOzOZg/ZVEzqI7tJsVURHHh4v3mZeb9vRnvy+BmPHj7lw6fPWK7PoWFj9gYYPQezP0C3naq2HQ/d7qOGCT+AyWTKdPqLch8NU7TlZot6vcnL7V1cITjodugYNgNfcGDYtA2bL7qOOXCx+y6OCJkcH/O39X0yQWu1HrC4eIt37z9WZjYakRZj8vE3VJITpSNEkhHnBUk+xpMKGacM84I4G81IZ5rkBVqzuU7jyjKbO28JkgLTFVheiOlJdFfiBBI/GuKrFMMLK687EBV6Semd4Eq0xtXb1GqX2dp5g+4rOpZFNioI4hTTCxFRSHF0RDIaY/sRfaGqBoFKsPyIfaHYC2P2opiujNEu1i5x/twFnm++QmRjuk6A4cqqe6mWL6uQauKBwJGKYZajkgzLD2mLiK9qSDuMORQKrXFjhYWFOi+2XxOkRRVoVk+eYbizpxhVLTH9kF6gMEvPlXSEohPG7PshXT9EW7t7j6WlNbZ2Z394EmjML5STnW0g58y9Ustzc7SbKxtcv7b6R+DvIaf1THipp9DWW/e5s7rxz8D/4SePh7ejpBW95wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete_svc.png\"\n        title=\"delete_svc.png\"\n        src=\"/static/ddd31a715ea784b9c93899aba2f59447/37523/delete_svc.png\"\n        srcset=\"/static/ddd31a715ea784b9c93899aba2f59447/e9ff0/delete_svc.png 180w,\n/static/ddd31a715ea784b9c93899aba2f59447/f21e7/delete_svc.png 360w,\n/static/ddd31a715ea784b9c93899aba2f59447/37523/delete_svc.png 720w,\n/static/ddd31a715ea784b9c93899aba2f59447/302a4/delete_svc.png 1080w,\n/static/ddd31a715ea784b9c93899aba2f59447/07a9c/delete_svc.png 1440w,\n/static/ddd31a715ea784b9c93899aba2f59447/7792f/delete_svc.png 1761w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 화면에서 보시면 APP Health 가 Missiong 상태임을 확인하실 수 있습니다.</p>\n<p>k get applications -n argocd 명령어로도 확인이 가능합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.333333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQI122OyQqDQBBEvZiIKyohCuIyo6MyIm74/3/2gn3OoSkKqqqf8/2UpK3lW7X0WmGXBWstfd9TVRVd16GUQmvNNE2M40jTNOKLoqAsS4ZhoK5rwjDEeb9e+EHI2/OY55n7vtm2TUJ5nnMcB+u6ijfGyMBTjONYNIoikiQRDYIA5/k0GkOWZSitua6Lfd9J01RCD+15nkLrui6+70vx3z2EPxRBTs2G14MEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/e32ade39fab6a65251414876dfec1b7f/37523/img.png\"\n        srcset=\"/static/e32ade39fab6a65251414876dfec1b7f/e9ff0/img.png 180w,\n/static/e32ade39fab6a65251414876dfec1b7f/f21e7/img.png 360w,\n/static/e32ade39fab6a65251414876dfec1b7f/37523/img.png 720w,\n/static/e32ade39fab6a65251414876dfec1b7f/136a2/img.png 884w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>여기서 위의 메뉴중에 SYNC 라는 메뉴가 있는데 이 메뉴를 클릭하면 깃 저장소에 애플리케이션 상태를 일치화 시킬 수 있습니다.</p>\n<p>SYNC를 시켜보니 깃 저장소와 애플리케이션 상태가 일치된거 같습니다! 명령어를 통해서도 확인해보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVQoz22QzW4TMRRG8wKwKkskWLYKqLsKxHuxYMEGVQotBQRkxTsgxEOwgAWQpk3STP4m8Yzt8fxlMklmoAfFkyAWtXR0pWv7XPurPXv6nM+fvhBEMb7SmCjGkxpfBUgdoLRBByG+DtAmoihKirKsalGyLkrK8jfZIkeaiNrDB4958fIt7cGYzmhCb+TS7jn8urziW7vL11ab7xcdzrt9Os6IbF1w09oMmedLavv7R7xrfrTNcD4nXSz4c31Nli8JkzlmkZHkuX1JlMzxdEi+WrNYrm3dsVwXrIqS2sHBEadnTeJlgSsDhkLRn0qcmaqYVvRnioHQjP2AiTSMfWP3B1vsuZmidv9encbpe2SS05t41SGhLZuLIowJ06ySeJokW5DlK7wgoi80fWlwVIgjQxyhqd2+dYfjxmtck/LjakiU5QTxnKGnGW6lk+1rnJm0wZs4xZWGjtC0gpCfvuIiiCrh3t5djhtvkGlOZywY+YEVbQQbmRcl6Ci1Xx0IhY5Tm6XQIZczxbmJaClDeyc8PHzCyVkTlS65cv1/2W2+7AjFwNNVRtueq0KmKqyyFpqeNHSFtlhhvf6Ik1cfUGluhbv8qsCr6vzX29DfDbiBv6lSg8Ma8/kRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/2ba5c1e97eecc082917c9b7b4864b3c8/37523/img_1.png\"\n        srcset=\"/static/2ba5c1e97eecc082917c9b7b4864b3c8/e9ff0/img_1.png 180w,\n/static/2ba5c1e97eecc082917c9b7b4864b3c8/f21e7/img_1.png 360w,\n/static/2ba5c1e97eecc082917c9b7b4864b3c8/37523/img_1.png 720w,\n/static/2ba5c1e97eecc082917c9b7b4864b3c8/302a4/img_1.png 1080w,\n/static/2ba5c1e97eecc082917c9b7b4864b3c8/07a9c/img_1.png 1440w,\n/static/2ba5c1e97eecc082917c9b7b4864b3c8/e1b78/img_1.png 1809w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">k get svc\r\nk describe pod httpd-676d9bc46d-94d2z</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVQoz5VS2WrEQAybx9zZQO57cx+w+f+vU5HBpdDdlD4Y25NIljxj8rTEdLwwTyP2fce2bWiaBuu6oq5rZFmGaZqQpimKokAQBHBdF57nvQ2TJBmyssY8z0JGonEc0fc9yrJEVVVC2Lat1ATdEj6fT0SPB5jzPBcFURQJyHEc2LYNy7IkM5TsE6mhpTAMRdV1XViWRdQOwyBnvu//At0qpC0WtEXLHMBd0Z4q/QR+S0gFBPECuDdaVov/JRNCEsVxLDfbdZ0o5C55pnu7C+6ZgzUMbSZJ8k1KuyTmrXIYz5i1ZnAd7PkPcXTJe2A253lKw10exyHkrJVEwcxKxu86iD0dUQixRvfGhk9Hn4vmv+KnXVr+Ar3t9NUzh16ZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/39dd046cad0534bb2d5adad34d2f4072/37523/img_2.png\"\n        srcset=\"/static/39dd046cad0534bb2d5adad34d2f4072/e9ff0/img_2.png 180w,\n/static/39dd046cad0534bb2d5adad34d2f4072/f21e7/img_2.png 360w,\n/static/39dd046cad0534bb2d5adad34d2f4072/37523/img_2.png 720w,\n/static/39dd046cad0534bb2d5adad34d2f4072/302a4/img_2.png 1080w,\n/static/39dd046cad0534bb2d5adad34d2f4072/07a9c/img_2.png 1440w,\n/static/39dd046cad0534bb2d5adad34d2f4072/f663d/img_2.png 1511w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1argocd\">1.ArgoCD??</a></li>\n<li><a href=\"#2-harbor-container-registry-%EA%B5%AC%EC%B6%95\">2. Harbor Container Registry 구축</a></li>\n<li><a href=\"#3-gitlab-%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-local-git-%EC%86%8C%EC%8A%A4-%EC%A0%80%EC%9E%A5%EC%86%8C-%EA%B5%AC%EC%B6%95\">3. GitLab 을 이용한 Local Git 소스 저장소 구축</a></li>\n<li><a href=\"#4-argocd-%EA%B5%AC%EC%B6%95\">4. ArgoCD 구축</a></li>\n<li><a href=\"#5%EA%B3%BC%EC%A0%9C-1--harbor%EC%97%90-%EC%9E%90%EC%8B%A0%EB%A7%8C%EC%9D%98-%EC%95%84%EB%AC%B4-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%82%98-%ED%83%9C%EA%B7%B8%ED%95%B4%EC%84%9C-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EA%B3%A0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%B4%EC%84%9C-%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7\">5.과제 1.  Harbor에 자신만의 아무 이미지나 태그해서 업로드하고 다운로드해서 스크린샷</a></li>\n<li><a href=\"#6%EA%B3%BC%EC%A0%9C-2---%EC%9E%90%EC%8B%A0%EB%A7%8C%EC%9D%98-%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC%EC%9D%84-kops-ec2-%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-gitlab%EC%97%90-%EC%98%AC%EB%A0%A4%EB%B3%B4%EA%B8%B0\">6.과제 2.   자신만의 텍스트 파일을 kops-ec2 로컬에서 GitLab에 올려보기</a></li>\n<li><a href=\"#7-%EA%B3%BC%EC%A0%9C3--%EA%B5%90%EC%A0%9C%EC%9D%98-%EC%B1%85-273p-gitops-%EC%8B%A4%EC%8A%B5-%ED%95%B4%EB%B3%B4%EA%B8%B0%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%84%A4%EC%A0%95-%EB%82%B4%EC%97%AD-%EB%B3%80%EA%B2%BD%EA%B3%BC-%EA%B9%83-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%9E%90%EB%8F%99-%EB%B0%98%EC%98%81\">7 과제3 . 교제의 책 273P GitOPS 실습 해보기(클러스터 설정 내역 변경과 깃 저장소 자동 반영)</a></li>\n</ul>\n</div>\n<p>D:\\Git_Blog\\korwoo93.github.io</p>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","frontmatter":{"date":"February 08, 2023","title":"Gasida Kubernetes Study 4주차","categories":"Kubernetes","author":"KORWOO","emoji":"🔮"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_4/"}},"prev":{"id":"0968b639-e024-57b2-b6d3-e882f78b7245","html":"<p>가시다님 스터디 : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG5S0peaL//xAAaEAACAgMAAAAAAAAAAAAAAAABAgARAxIT/9oACAEBAAEFAmvVOlzMxDB2uf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABECIxIf/aAAgBAQAGPwKulkko4zY//8QAGRABAQEAAwAAAAAAAAAAAAAAAREAECFB/9oACAEBAAE/IZKL4NR5KYcQ6znw/9oADAMBAAIAAwAAABD87//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EKf/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QcH//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhgRBR/9oACAEBAAE/EKsTlGXHSkUBFHmbMTEN53AhcAmj55//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"book.jpg\"\n        title=\"book.jpg\"\n        src=\"/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg\"\n        srcset=\"/static/ffca88658c8e7539216186bdb5832d9c/4ec73/book.jpg 180w,\n/static/ffca88658c8e7539216186bdb5832d9c/158ba/book.jpg 360w,\n/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg 720w,\n/static/ffca88658c8e7539216186bdb5832d9c/47311/book.jpg 1080w,\n/static/ffca88658c8e7539216186bdb5832d9c/644c5/book.jpg 1440w,\n/static/ffca88658c8e7539216186bdb5832d9c/93719/book.jpg 4000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>본 포스팅은 가시다님의 쿠버네티스 스터디 내용과 이정훈님의 <code class=\"language-text\">24단계 실습으로 정복하는 쿠버네티스</code>\r\n책을 참고하여 포스팅하였습니다.</p>\n<h1 id=\"6주차-alert-manager-logging-system\" style=\"position:relative;\"><a href=\"#6%EC%A3%BC%EC%B0%A8-alert-manager-logging-system\" aria-label=\"6주차 alert manager logging system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6주차 Alert Manager Logging System</h1>\n<h2 id=\"1-alert-manager\" style=\"position:relative;\"><a href=\"#1-alert-manager\" aria-label=\"1 alert manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Alert Manager??</h2>\n<p>쿠버네티스를 학습하며 Prometheus, Grafana 등에대해서는 한번쯤은 들어봤지만\r\n솔직히 AlertManager는 처음들어봤습니다..</p>\n<p>AlertManager는 Prometheus의 특정 임계값을 넘거나 메트릭의 변화에 대한 알림을 slack, email 등으로 전송해주는 역할을 하는 친구입니다.</p>\n<p>쉽게생각해 <code class=\"language-text\">Prometheus 에서의 알림 시스템 기능을 AlertManager로 분리시켰다</code> 라고 생각해주시면 되겠습니다.</p>\n<p>개인적으로 왜 분리를 시켜두었는지 잘 이해가 되지 않네요..</p>\n<p>참고로 Grafana v4.0 에서 Alert 기능이 추가되었다고 하는데 Alert Manager 의 미래가 어떻게 될지는 한번 지켜봐야 되지 않을까 싶습니다..</p>\n<h2 id=\"2-실습환경-배포-중-이슈-발생\" style=\"position:relative;\"><a href=\"#2-%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD-%EB%B0%B0%ED%8F%AC-%EC%A4%91-%EC%9D%B4%EC%8A%88-%EB%B0%9C%EC%83%9D\" aria-label=\"2 실습환경 배포 중 이슈 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 실습환경 배포 중 이슈 발생</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVQ4y52U147DMAwE/Zree0MSpDi9Acn//xgPQ2AN2efkgnsQSMnkaClKjkajkQ2HQxuPxzYYDNyfTCbu9/t9t9Vq1crlslUqFR/4eaNUKlnUbret1Wr5wGfU63XTeqPRsG636+BOp+N+rVazQqFgxWLRIfiCRovFwpMJBEDidDr1j6zPZjO3zWYzgbIJPjn4VJUAn8+n7fd7u16vbpfLpb1eLwdJNSUDYrAGXOpRiy+10fl8tt1u57Db7Wbz+dxOp5Pd73e7XC52OBz8O5bYOI59zoYoYxPU9no9txEBx+PRIdjtduvJKGYeApnjr1YrPxYGjVMTaWxEADB2FxD7eDx8jW/EsCbFxKCQISBquTGRgkkmYbPZ+JzygYUKBV+v14lCSpXCBBgqBEjyJyAxeSWngIKq5BBIwwTEl0JAKNSjSJWspkhhXlPelZwCsqPOjwS6jg2bIpia8lXJJCv425I/NuXTGYbH8q5klKaASsgqxEeVrhb+u5JTF5uEv5qil5LX5V8KBdVT/PdLoQQB816KVGWvTRaYlMxuKAnVkMzfJtsUNlSXSUYRfxvU6W/zA2HdF9J3ODVSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_3.png\"\n        title=\"img_3.png\"\n        src=\"/static/74dc5a4635285d50343f3d30d16a0da4/37523/img_3.png\"\n        srcset=\"/static/74dc5a4635285d50343f3d30d16a0da4/e9ff0/img_3.png 180w,\n/static/74dc5a4635285d50343f3d30d16a0da4/f21e7/img_3.png 360w,\n/static/74dc5a4635285d50343f3d30d16a0da4/37523/img_3.png 720w,\n/static/74dc5a4635285d50343f3d30d16a0da4/00172/img_3.png 1044w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVQoz41S2W6DQAzkMRyBBBKuUJYryyEQ8P8fN9FYWtQmldqH0R5ej2fHtnTT4asboKoavdaoqgphGCKKItxuN8RxjPv9LmfHcWDbtoB713Xhed6xEpaqFCpVSsL1esXj8RCSuq6Rpil835cYcblcpGCWZQiC4INMCIdhwLwsWJYFSimM44g8z7GuK57PpyRSMUHyeZ6x7zumaZLYB2FZlkiSRKpTIb/HZKrj2Tw8n8+yMkYrqPhXhVRGlW3bCkHf92iaRr5+Op1+PCboncF77CDctk1IeUF/jAJj/l8wjSIsqimKQvyidyRiU6iWqgkWoBUEYwTvTOHvMYskTCZMNwl6xjsmmaaYcSLM+T3P4hhordF13TFvbAjHxqih8f/5OvECiAjdw9pfT9oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/03cdbd361e8b15ed1d961b415dca03ff/37523/img_2.png\"\n        srcset=\"/static/03cdbd361e8b15ed1d961b415dca03ff/e9ff0/img_2.png 180w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/f21e7/img_2.png 360w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/37523/img_2.png 720w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/22475/img_2.png 1039w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Rolling Update 수행 중\r\nI0222 22:24:12.336747    8250 instancegroups.go:533] Cluster did not pass validation, will retry in ”30s”: InstanceGroup “nodes-ap-northeast-2a” did not have enough nodes 0 vs 2.\r\n의 오류메세지가 반복적으로 출력 되면서 Rolling Update가 정상적으로 수행되지 않는 이슈가 있었습니다.</p>\n<p>롤링업데이트룰 중단하고 kops validate cluster 를 통해 확인해 보니 Validation Error가 발생한 상태이더군요..\r\n컨트롤 플레인에 해당하는 EC2는 재생이 정상적으로 되었으나 워커노드 재생성또한 진행되지 않았습니다.\r\n근데 또 노드의 상태는 정상적으로 표시가 되고\r\nPrometheus, Grafana 등에서 값들은 정상적으로 받아오더군요..</p>\n<p>요즘 핫한 ChatGPT에게 자문을 구해보았습니다.\r\n처음에는 이친구가 제 질문을 이해를 못하고 이상한 소리만 해서 고생좀 했습니다만…\r\n정리해가면서 질문을 계속 하니 제법 유용한 답변을 제공하였습니다.</p>\n<p>첫번째는 클러스터 버전 호환성 문제이고\r\n두번쨰는 AWS 리소스 제한 관련 이슈입니다.</p>\n<p>AWS 리소스 제한이 제일 테스트해보기 쉬우니 테스트를 진행해보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAESElEQVRIx61WSW/bRhTWP2+BHOzUSW25kSLHsBMYtS+5pj20x6LLsa1ju2ktrxIpiuRwhttw/4r3SO1y7AIl8PENB8OPb97yDVtHJ+/x7vg9uvtH2O2+wc6rHrZ3u2zbr3rY7ezNoYdObx+dvUPs9t4yXh98i97hMd68PcHe4TFau919dPaPsNM9wMt2B89ftrGxtY3NrW08e/41vtyc4YuNF3j2oo2tdhdf7fSw1d7DzutDxjd777DdOUAL//PViqIYvh/AdQXiOEZRFMjzfAE0J4SHn37+DWfnf/FcmqYNMqRZhjwvEIQhWlprHtiugB9EyGhxVi/KsnpMc0r5+PjxHGfnF7DHNjxPwnFdeMKDlBJlWbJDLZ0k8IMAhmVh5LgQUsJTagp6VkEA2olhWjBGFgbGiGEYJgzLxshy2NtYa7TolqQpirJERq4XBW9xhhwFgNS6hPxuA+qHbagf25DfbyL8/QPSCsiLElVVIWIPmy3HsQZ5uwJNNkUcBoice0TOALFzj9i+R6zcZo1m7+oYJgmEELgfDBBFUR1wjt8ieK6okJVgmxLyYi45CcJJUlSUYByksGSIkReyXYbtx7C8ACPhT58dP2YrohQqLRFEzZZp4s7T+Gdoo28KXI0E+qbLdjIeejGGMsZAhGxNlcBUmq0VZnB0BT9qskxpt8Y2sqLk4qzWFGy1hLJqAECnGYOzPCkbz/M4uEWeo6pKBtVW2WSfbM1crdBXzVxNqDXCKMJ4bHNdUQETAX2Igr1MSC+voNnF1ENKt/J9tkRORRxQMTetSO01T7iOeIGQyExrzF1BJGEcT20QRfDDkAt/nnAa2xVCXdeP7/tc3PRizgJR1LbBZ7c8T0g3iuOk5UgIiJQWlc3icu6lddcKIcVtoh6u8JAklIyKiSeZLh4BrYkmakMx9KTkFqQSIhmiNoyaWD4F9A4lsq5DIhQubNvhDPM257xbFtyHQE7UvRynuJUp96nhKgwdiSFZV8EQPqQuuFdVUkImxQw6Z6ikmPVyojXcMMEfZohPdyZO+wOc3xi4uDVwdj3Exa2Jy6GNS8PB39TrhoMr08WtJXBlSfQthRsnwjgqZuJAHqq0wo0Toj/20bckru2AcUUY+4xPpsSQ1EhpjFSMka8Zhp/AjstFQiuuYAYZRJzDDjOMwxR2lMEOUx7zczNvBTXGjITHC4RUNlIquEIi1Om0FEjaZyiWbLlY+NWcOFAPu0LAcgRMV/EHCJPeTpqjYN4SJk1Bc5RlPvV4MkkW2mq+ZKay9cg1PaTWEeIBAXgMK4Rre/QzPfyghwQ+2Sa/FmnKavNfvCuXz+UwiqfJ8IP6ee05vfbspsRQEoNaD6VSGNs2DNNkSx4mTyCiNSnZvAIFLdBZLQ6kNI4QsB0Hjiug/IAVqLbr4LMqKaVgCwl5/SfkryeQt6cz+aJt15iQPQH0M6UCyJtTyF+Ooe7O8C/9WWw/kALwLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_10.png\"\n        title=\"img_10.png\"\n        src=\"/static/d0ef78edab26a8cc9b1b7384540d5de3/37523/img_10.png\"\n        srcset=\"/static/d0ef78edab26a8cc9b1b7384540d5de3/e9ff0/img_10.png 180w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/f21e7/img_10.png 360w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/37523/img_10.png 720w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/00d43/img_10.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><a href=\"https://support.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase&#x26;limitType=service-code-ec2-instances&#x26;serviceLimitIncreaseType=ec2-instances&#x26;type=service_limit_increase\">https://support.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase&#x26;limitType=service-code-ec2-instances&#x26;serviceLimitIncreaseType=ec2-instances&#x26;type=service_limit_increase</a></p>\n<p>증설 요청은 위의 링크에서 하실 수 있습니다.</p>\n<p>증설 요청을 하면 특별한 사유가 없다면 10분 이내로 빠르게 증설이 될것입니다.</p>\n<p>다행스럽게도 원인은 자원이 부족해서 발생한 이슈가 맞았습니다ㅎㅎ</p>\n<h2 id=\"3-prometheus-grafana-alert-manager-배포\" style=\"position:relative;\"><a href=\"#3-prometheus-grafana-alert-manager-%EB%B0%B0%ED%8F%AC\" aria-label=\"3 prometheus grafana alert manager 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Prometheus, Grafana, Alert Manager 배포</h2>\n<p>실습환경을 셋팅하는 과정은 앞의 포스팅에서 계속해서 다뤘으므로 생략하도록 하겠습니다.</p>\n<p>본 리소스들은 Helm을 이용하여 배포할것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create ns monitoring\r\nhelm repo <span class=\"token function\">add</span> prometheus-community https://prometheus-community.github.io/helm-charts</code></pre></div>\n<p>위 명령어를 이용하여 Namespace 변경 및 Helm Chart를 다운받도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/monitor-values.yaml</span>\r\n\r\nalertmanager:\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - alertmanager.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\n\r\ngrafana:\r\n  defaultDashboardsTimezone: Asia/Seoul\r\n  adminPassword: prom-operator\r\n\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - grafana.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\nprometheus:\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - prometheus.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\n  prometheusSpec:\r\n    serviceMonitorSelectorNilUsesHelmValues: false\r\n    retention: 5d\r\n    retentionSize: \"10GiB\"\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> kube-prometheus-stack prometheus-community/kube-prometheus-stack --version <span class=\"token number\">45.0</span>.0 -f monitor-values.yaml --namespace monitoring\r\n</code></pre></div>\n<p>다음 위의 명령어를 이용하여 YAML 파일을 생성하고 Helm Install 을 진행해주도록 하겠습니다.</p>\n<p>각각의 접속 주소는\r\nGrafana : grafana.본인도메인\r\nPrometheus : Prometheus.본인도메인\r\nAlertManager : alertmanager.본인도메인</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADgElEQVQ4y42UWY/cRBSF/dMIKBnQJBCWCIkIEAghgeCB/8MryhviNS+AyEQkKJ2ZkDBr2+12t9t7ubxV2e7lQ+WeGSUhSLH06dx7yrbKVadsffPdD3z8yRfc/vRLbnx4m50bt3jn5i123vuIa7s32bn+AW+9/S5v7ty45Irh2nWu7Fznjau7XN19n8+//p7PvvoWa//0GXce/cydh3/y996PPLj/E3/98huTP+4xDyPOxg7PDo8Z286A6W3HZTqd4XlbTk/HHNk2x2Mba7lZI7Qk14pll6O1RJc1S6VYs0F3HbXStF0/oNuO5WrFerNhYwDWG9gsQsgLrELkRPMFSRASBRGhHxAuzvF9wrk/jCVhRLRYEAchtSyocrnF1LJAnYxpZz6WOrWJ7j8ge7RP+fQf1NEJ/ZlDd2bTDXqB/QrvOSYenTvDUmc20d4DxOiA6unh8FA/nrwGzgt1O57QOVOsuiiIg4A0isjimDSKSUNTJ4Nn+gs/i+Lh840vzseNJ9IMdfCU1p5gSSnxgwB/EZAJQd00VFVNWVaU1ZbKUNeDDl5ZUtfN5XjTKFayYFXVWNpxEaN9xOMDstE+2ejxsJbN8Qm947Kazli6Bu9cX9V7dNMZnTfHiudz5rMMbybxvBzHFUSBQERbylRQZ4LmOV7uG7FVledYc9/HjzKyUpEWDbJuyesWUWlkramUptEa9RKNVtTqRcx9VhAEOI5DksSkSUwhc2QuKAt5XucURYHIBLkQCEOWDV5TN9R1TVPXW20aLFkUw5Fypx4Td3p5vIzazgTbdvA8D3fiMp/NWSyCgdAEPYoGNZuklEKbGVZFjqokm1XLqtOsOsVm2bLuNate07YtsiwptB6OmZmZlAV937Ner1mZY7heUw+7X2E9dBrunvTsTWHPhXsu3J/C7xMYzRku5S9I7/5KP52RFSVRFA+faNbSvGS5XKGXS5q2xYqrNU7S4SQtbtoxSbbYSc8sa2n7JZ0saGwXlaRo85Mwm9KoAZNNrVuWccqqKLFUU5FlEblIkTJFZAl5lgwqREIUx0RpSpjnLJJtnwpBaPwkJTFjcUJzdErnB1jKniBGT8hGB4jHT6gPj1Enp0OoL7ENk61e9Jf+tr4MduR5OOOAs3GMbcfEfkISZBRJTpWeh/Z1uAj2IgyJMkmpOmSzDXNeaQqzPmad1H8D/H+YYP8Lne65pPri1SEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/073a7942fcbc372790fd916c5679db7f/37523/img.png\"\n        srcset=\"/static/073a7942fcbc372790fd916c5679db7f/e9ff0/img.png 180w,\n/static/073a7942fcbc372790fd916c5679db7f/f21e7/img.png 360w,\n/static/073a7942fcbc372790fd916c5679db7f/37523/img.png 720w,\n/static/073a7942fcbc372790fd916c5679db7f/d2c2a/img.png 929w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 화면은 Prometheus에서 오류가 발생하고 있는 항목들 입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVQ4y41UWa7bMAx89z9UL9AjtCgKFK8fzWJb+0JyClJ24iQOWgEMZcUacYYjf7TWUGuF8x6n8wXnyxWX64Tr9QofAlIuiCkj5my5lIyvPxf8OAVc5hnn2SGEhN9/PvF5+oUP7AYRofcOYkYlQWkMZgFEIGvo+PI94tu5ooogk+wh8LG9xMwotaKUYjlXQmlk67IDtANsyMO6hhb0AFhrMfoKStTHNnndyAdrG8YKKNDf1gnee9NOQRV8q+bdOATcFhRgWRYE7+GcQ4zRNGrEyJ3RWSwXUo1HbKA3wP2Cdty5UeHiHLJSZwYRo9PIGsz3+bb3EFA7HGJEUovEaPOYkkXSHBNKGRqnlMeBRDdA3X/XUIBGZEAKoPTvGr4f8sTwQUM9QQG1mpyzAXYBSMT02nJjMT37aqEHwP2CUpmmyRpznSbM84zZR/iYkGozPUsna9IW2BX0Aqh6eB+McgjRGqTdVitl0zCimxTFGJScjdU2DikP/xXL+twYRk2tQpr7sMutQsh7DVWzaZrvlNWTKZvhTUMeIH0XL4DPtlmcN3s4H2xuEsTRJJWhlrLaZljpkLKBsSB2RioVsVSkWm2uVEvraG+uocgBZX1JLaGddEG7GrH4YN2N61VTUP0oGOX/tU1r1boagjf9lKZVnAtCrkPDHVhjfgV8LnmaF9NOAW8xL3aQ2kgP4d11E/lHU/TDYB70oyGa9VmB7L/1Jm13+BnwL8UfIzge/kX9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/1c629872cc1247b23372c393e9d86cc3/37523/img_1.png\"\n        srcset=\"/static/1c629872cc1247b23372c393e9d86cc3/e9ff0/img_1.png 180w,\n/static/1c629872cc1247b23372c393e9d86cc3/f21e7/img_1.png 360w,\n/static/1c629872cc1247b23372c393e9d86cc3/37523/img_1.png 720w,\n/static/1c629872cc1247b23372c393e9d86cc3/f1901/img_1.png 942w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>오류가 발생하고 있는 항목들에 대해서 alertmanager 또한 동일하게 표시해주고 있는것을 확인하실 수 있습니다.</p>\n<p>##4. Slack으로 WebHook 날려보기</p>\n<p>이제 Slack 으로 WebHook을 날려보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">https://hooks.slack.com/services/blabla/blabla/blabla\r\n<span class=\"token assign-left variable\">WEBHOOK</span><span class=\"token operator\">=</span><span class=\"token string\">'https://hooks.slack.com/services/blabla/blabla/blabla'</span>\r\n\r\n<span class=\"token function\">curl</span> -X POST --data-urlencode <span class=\"token string\">\"payload={<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>channel<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>#webhook<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>username<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>pkosbot<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>text<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$KOPS_CLUSTER_NAME</span> 다음주 종강! - 봇 제공<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>}\"</span> <span class=\"token variable\">$WEBHOOK</span>\r\n<span class=\"token function\">curl</span> -X POST --data-urlencode <span class=\"token string\">\"payload={<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>channel<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>#webhook<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>username<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>pkosbot<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>text<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$KOPS_CLUSTER_NAME</span> 다음주 종강! - 봇 제공<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>icon_emoji<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>:ghost:<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>}\"</span> <span class=\"token variable\">$WEBHOOK</span>\r\n</code></pre></div>\n<p>가시다님의 스터디채널의 미리 구성된 WebHook 채널에 WebHook을 날려보는 과정입니다.\r\nWebHook URL은 본인의 Slack 채널의 WebHook URL을 입력해주시길 바랍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQY06WPW26CUBBAWVVX2K8uodvoZ38t1cTaaPGJKBIvIiCIolzgwmm4id1AJzmZx8eZGaNSitvkG5We8TyPXs9k0B/QN/vMF0u8nUsUhgRBQBzHRFFEXddIKVF1jVJK0/VFUWDIJCF+eaJ4e0b4CePJFGs6ZzZf4XoC/xDoRbZt/+Xj8cgtvyKEj9gLhBDcbnctNWR2JrNeke470enOZh+x9RO8Q8LKC9mKEGdtY5ofOM6GyXiMZVmkyUnLrR+L4fCLyzWn7IRN29KApiwrCllqpK4r7oUkz3PSNCXLMs0ly6irStdp0s0v1ErRNA0GQNuqLhGnOfYuZL2Pcf3uwggvOLHdOHz2TdzdTl+4WCz1y2vHYWbNGH2NKKtaO4y2bXnwn3g4fgFp1cJRcCNNxgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_4.png\"\n        title=\"img_4.png\"\n        src=\"/static/1b58b5b6000b0115371ffa00902a9924/e4a3f/img_4.png\"\n        srcset=\"/static/1b58b5b6000b0115371ffa00902a9924/e9ff0/img_4.png 180w,\n/static/1b58b5b6000b0115371ffa00902a9924/e4a3f/img_4.png 295w\"\n        sizes=\"(max-width: 295px) 100vw, 295px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>WebHook이 정상적으로 날라가는군요!!</p>\n<p>다음 Alert Manager에 WebHook URL 정보를 반영해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/alertmanager-slack.yaml</span>\r\nalertmanager:\r\n  config:\r\n    global:\r\n      resolve_timeout: 5m\r\n      slack_api_url: 'https://hooks.slack.com/services/blabla/blabla/blabla'\r\n    route:\r\n      group_by: ['job']  # namespace\r\n      group_wait: 10s\r\n      group_interval: 1m\r\n      repeat_interval: 5m\r\n      receiver: 'slack-notifications'\r\n      routes:\r\n      - receiver: 'slack-notifications'\r\n        matchers:\r\n          - alertname =~ \"InfoInhibitor|Watchdog\"\r\n    receivers:\r\n    - name: 'slack-notifications'\r\n      slack_configs:\r\n      - channel: '#webhook'\r\n        send_resolved: true\r\n        title: '[{{.Status | toUpper}}] {{ .CommonLabels.alertname }}'\r\n        text: |\r\n          *Description:* {{ .CommonAnnotations.description }}\r\nEOT</span>\r\n\r\nhelm upgrade kube-prometheus-stack prometheus-community/kube-prometheus-stack --version <span class=\"token number\">45.0</span>.0 --reuse-values -f alertmanager-slack.yaml --namespace monitoring\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 471px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVQ4y52UyY7bOBRF6///o7f9FUEWvWmgy1WeB1mcRVqyJVuT7dMgnbjSFWSRJvDAJ5G8vO/yki/d2xfa+V9MF2smkymTyRtv7+846zgeK8qy5HK5ENv9fufZfsxju924dT0v7fuf1F//QMx2/L1U/LMQTLeaWeZ4XWt81cTV3G63BPi9/55fr9eP/8BLBO9CSTGbstplrFZLNtsdUmqUNriiQCmFLRxaKXzhE3vvHNZZjDYUzqOlom7qb4DW4OdzslyyzzK22w35Psc5i5SKPMuQQtB1LeM4MgzDMyLDcRjp+z6NfQO0hOUS44oEVFibAIwxeOcxWuOtRSuNLwJlCFhjcbZAa80hHFLvnHsAtsZQrlco6xB7gRCC9XpNe2kfDK4frLque+Tjg1X8btsuachTw8RwjjIWkQu0lhhrWS1XZFlG4QuKwlF4T1VWFFHD4AmFRymJ1ZamOX8AtglwgTE2iSuVxCiFkBKR5wR/4Hy50DQNfRdZ9bRtm9il6PvENrJ8MvSLOUIppBRoYxNg3D3qdqoqQghJo8gwhAOHsuQQtbTukZeHJM9Tw2ibvRDssxwhJJvtht12gxQyLThHdn3P6XSirmvqpuGTtT9KHuuaNgRCWeFckUo8nY40dcP5XGOt5eA9p+MpWSky9SHQD0O6MfcfIgEOwWNXG2ayYiVLhDsx3wdm+4LcHfmd9tTQTd9ZbncsFjNW6zVK6RRaG6RWKC1T+UortFYIkaONRluNzHOUkMlKTw3DbEqudZr8OJiHUePNkVLivUdIlUwefWrjWJ6z3+dJknAIHwyHquIUJ1nD0Hc/vyy/W/IYnymp2RVntubIcL3/B/T+SfjPm/10KPFxUK+vTJZbJtNFem36fvgl2K/iyfA2joxtS3u5cDk3yWfRpP+n9H8BlVBeh68OXYcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_5.png\"\n        title=\"img_5.png\"\n        src=\"/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/1f09d/img_5.png\"\n        srcset=\"/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/e9ff0/img_5.png 180w,\n/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/f21e7/img_5.png 360w,\n/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/1f09d/img_5.png 471w\"\n        sizes=\"(max-width: 471px) 100vw, 471px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Slack 에서 위에 Prometheus에서 확인했던 오류에 관한 내용이 전송된것을 확인하실 수 있습니다.\r\nroute.repeat_interval 이 5m으로 설정되어 있으므로 이슈를 해결하지 않는다면 5분마다 같은 메세지를 계속 날려줄것입니다.\r\n5분마다 이슈 해결하라고 떠들어댄다고 생각하면 꽤나 씨끄러울거 같군요\r\nAlertManager에서 silence 처리가 가능합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB40lEQVQ4y5WUz47UMAzG5/1fgQsvwoUz4r4HVishjZDYmTbNf8fJhz6nXTosHMjIcpI2v/izPb3UWpFzhg8Bt/sdr7c7ltXhdl/gtg2pFKRckAut7n7OY8pYnLOzKWa8XJ9xwT7GGBBpZjFmiKjNaxUzHgghIqWMFBNKishp7uVcDwwuBPGnqiilmK2rg1SBiOzAhhiS7edcsLiIb9cFPibcF4cQEyNCH30CjwhbawYhXFpHFkXTjjE65sVzfF8EH79sWIvCSUdRPhlkPgKrCEqpKLWiSEcoCtFut4+T2Un8Xvc+L3yTfAC7qj2cL/QjuQ+wPga0E/K4/wdwhtssjxkxRpNO+59B1uWQQKw0RfAeG9slRYQQTDIjomdUL77g62vE81bQqOak0IDHgoNFIYytQM9IK4EDqH2q+PzD48PTT3y6bnaRnoAm+bxgdZ3bsHkPt3nzbHoa24l+SAWGAq3aHv8Y5zpczgllMfgCjfkru69y6knOm77tMYh3wKMooooYApxbUfIszhh/Sf4/CvJOMnPovTcQPYsSGZV2ZEalHdIHoqjlL7dZsAfgWTLDX52z3LEonNt680g52/PW1NpLd+P6QfKZzhzGlOxw2iWnlGyPFuL8ODB39pGwghU7dwB/ARPJmN7hBV+TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_6.png\"\n        title=\"img_6.png\"\n        src=\"/static/bce9e6da9cd67e530c54a0d8233cb743/37523/img_6.png\"\n        srcset=\"/static/bce9e6da9cd67e530c54a0d8233cb743/e9ff0/img_6.png 180w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/f21e7/img_6.png 360w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/37523/img_6.png 720w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/d9217/img_6.png 904w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\nAlertManager에 접속하셔서 오류를 보시면 옆에 Silence 메뉴가 있습니다. 접속해 줍시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeUlEQVQ4y5VVS27bMBD1vXqwrrrMqmfoFZorZFmkaNGlWyAwECdOU8cSKYmf4Qz5iqEkx0ldJ6HxxI+k0ZvPGy+stVgul7jdbLBeX2P58xeurq4wOAcdpRToD3otp6FjkXNGCAFEhESEECKC99DzJ6PgxaFGF847tKatLKQIcsnIKHWWLNBdiAE3mw1614/PZfkHe4YpJzS2Qdu1dd42D3VNQkiS0FGHkAI6141nmeo83te9PmOr0WpQGQ5uqBtlVSZ2h9Cvy7SWrPvH9Yw9Q08e22YLO1iY3mBnGpjegiRVhn3qEFjgU0FIBcQFzcAwXuo6cMFAanQyqIw4M4gTiAkxUZ01nspKXeOsc0GaEFKumPdqOM8MhRneOaSUoGtOCcwMSlzPXpPdJ1n2IeD67jf+tBY72+O+MTDWYmgbeDfsY/O8gspco2Vkt48hF8Ckgl0UNFGwjRk2MoLziOqeZAQe4TkjckYmQtFEHGNIMhpoI6MnQRcIxhNM5Hqu6IjRTeuBGOIcMnM1oh9YNQksM8NcHl8mQVKVhFEpZUI+wOyiVCUV3NmEjxc7mCBzlsd45INYaHKc83DOVSkOUWAcow9yVMP5uZbVwFuyeTLLqtP15gY+hlr9WpPHtMoTjt2LEuu7Yx0WQec7eApVl7NO3wLV+95gljy2Lk5Vxy/1vP/1wacu366xa3dVburyW6GeHbQvrv1ORKZel8EylYieTaVyCkMaHttXDWyRPbvDIRO065xiGDnuO/wiTx0lMmnfwffVA86/3WK1XMFffgH9uZ/ik18XQ/XfBIMH14Ax4OzzD7w7u8D5p3NsP7yH/Xo5Pvz8P+ZIDSrDv5THvHUyfkVXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_7.png\"\n        title=\"img_7.png\"\n        src=\"/static/d61f74d84f07a39ce318afeb2a826465/37523/img_7.png\"\n        srcset=\"/static/d61f74d84f07a39ce318afeb2a826465/e9ff0/img_7.png 180w,\n/static/d61f74d84f07a39ce318afeb2a826465/f21e7/img_7.png 360w,\n/static/d61f74d84f07a39ce318afeb2a826465/37523/img_7.png 720w,\n/static/d61f74d84f07a39ce318afeb2a826465/898f6/img_7.png 798w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Duration은 얼마나 silence를 지정할 것인지에 대한 것입니다. 시간과 Creator,  Comment 를 입력해주시고 Create 하면\r\n이 이슈에 대해서는 지정한 시간동안 조용히 하고 있을것입니다ㅎㅎ</p>\n<p>계속 이어서 Prometheus에서 감지되는 이슈중에 kube-controller-manager, kube-scheduler 에 대해서 자세히 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get svc,ep -n kube-system kube-prometheus-stack-kube-controller-manager\r\nkubectl describe svc -n kube-system kube-prometheus-stack-kube-controller-manager</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABp0lEQVQ4y5WTWY+iUBCFeepWXEBREFTwstgajeIS//8/q85XSRFm2vRkHk5u3VvUqVML3perJSmPkqaZVGUpeZ7Ler2W3W7X2WC73cpms1Gbd/PzbkiSRDxXOlkuIlkulzKfzxVRFHX2YrGQ2WymRNzjOJaiKCQIAiUlCf66rtXnwRoGgZLg6MNIwzDUO0mxJ5OJDIdDmU6nMhqNxPd99ZPEc9tC1q6RvCikLEvNiHxU2Glvl8tF703TqHIUcZKIk+ReU9WS5U7iOJGmqaWqKu2NEWL3e4lCqjFYFVaJl2WZfH5+SBTN5fl8yuv1ksPhoD3Z7/cKbIAyVA0Gg67UPnjzxuOx+P5Is7XtVdq2ldPpJLfbTXG/3+V4POoAAN8RTNw7eJaJDx+Phyo8n8+qDEWcq9WqC+B7O83+g5C6MegBTQcoRBVk9BQfEwRM+B1RR0jDjRCFlHy9XrVcbEBPIWfaCPiV0DmnJbGPqCPQ1NhE2bd+4/ul/yDUxQ5DJUUJwUZGeX2Sv/v4lpBd6/eQ/UNVmqa6/f9DpoRMlF0EENpvBf5V3jvCb6OnYBVc1S0uAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_8.png\"\n        title=\"img_8.png\"\n        src=\"/static/cca9114acd3db90304de63857d154182/37523/img_8.png\"\n        srcset=\"/static/cca9114acd3db90304de63857d154182/e9ff0/img_8.png 180w,\n/static/cca9114acd3db90304de63857d154182/f21e7/img_8.png 360w,\n/static/cca9114acd3db90304de63857d154182/37523/img_8.png 720w,\n/static/cca9114acd3db90304de63857d154182/2e694/img_8.png 1048w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Prometheus가 kube-controller-manager 에 접근을 할 때에는 Cluster IP로 접속을 하는데 위 화면에서 보시면\r\nEndPoint가 존재하지 않아서 발생하는 이슈 입니다.</p>\n<p>해결해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl label <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod -n kube-system -l k8s-app<span class=\"token operator\">=</span>kube-controller-manager -oname<span class=\"token variable\">)</span></span> -n kube-system <span class=\"token assign-left variable\">component</span><span class=\"token operator\">=</span>kube-controller-manager\r\n\r\nkubectl label <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod -n kube-system -l k8s-app<span class=\"token operator\">=</span>kube-scheduler -oname<span class=\"token variable\">)</span></span> -n kube-system <span class=\"token assign-left variable\">component</span><span class=\"token operator\">=</span>kube-scheduler\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPUlEQVQ4y63NWU8TURjG8fl+akIxFAFJ9EJvTEgMiRd+HI1BFodigahRMcY1bC5QaMHS0tLOdJZzZjqdrTB/01aw6gWa+CS/vM8755yM8vzlK54+e0F26QlTsypTMyrTc/NdM48yZLJLzD/+k7qwyMNZlVk1g5pZ5N70A+ayKsrE5B2Gxq8xev0Gw2PjpNIjDFweYXBojFR6jIGhUS6m0lxMDfdJd10avMKFVJrU8FUmJu9y89ZtFLMleFP/yEqpiFFcpn74Fn0tT1Kt0kkYRjiuRxTF3R4EIe32Mf0Jg5Cm7+P5PoofhpjSxnQcLGHRMA0sS2ALgS0lpi0wbBtL9LotZPeh67XwWj7NVosgjgm2doiqNRTfsjEOytiVKqKmIWsart7A0fQzzYaBZ5jd3jIs2m6TWDrE0iV23N5e12hbNoqf30dbeY31fhVn/VPvTzsFolyeKHc6fwpzeYKtXYLtH0575+7+AUp4VEN83cbdLdDaLxIfVn9V6Ztnjmj36ZxHpTLxUQ3F80MM4WAKF0s2Mexe102BbtoYlqRhCTTD6k7DlphCds87u25KXNdEfLtP6OygRG4JUV9Haps42iayvoHb+IJn5QhEnsjZI3L3CGWBQBZ6u7PX7b1vedpeEYIySXiE0pYb2AcqspxFlBawixncyjKBvsKxeAfeGjRXz5U4H8D7jHISmUTNQ2KvQtTR6a0qx0Gdk1AniRsk0TniBnTuxRYK5yTh36IkSUKSnPwmOUPf/BsK/znfAQAf+JyXuoRqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_9.png\"\n        title=\"img_9.png\"\n        src=\"/static/9aa0d1b9f719d2e3095ee9dcd1d76727/37523/img_9.png\"\n        srcset=\"/static/9aa0d1b9f719d2e3095ee9dcd1d76727/e9ff0/img_9.png 180w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/f21e7/img_9.png 360w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/37523/img_9.png 720w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/9b379/img_9.png 951w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Prometheus 에서 해당 이슈가 없어진 것을 확인하실 수 있습니다.</p>\n<p>이번에는 고의적으로 시스템에 이슈를 만들어보겠습니다.\r\n노드를 하나 추가해주고 그 노드를 다운시켜보겠습니다.\r\n아래 명령어를 입력해서 노드를 1개 추가해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> kops edit ig nodes-ap-northeast-2a --set spec.minSize<span class=\"token operator\">=</span><span class=\"token number\">2</span> --set spec.maxSize<span class=\"token operator\">=</span><span class=\"token number\">2</span>\r\n kops update cluster --yes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">3</span> <span class=\"token operator\">&amp;&amp;</span> kops rolling-update cluster</code></pre></div>\n<p>다음 AWS Console에 접속해보시면 지역이 ap-norrheast-2a에 해당하는 EC2가 2개로 증가되어있는것을 확인하실 수 있습니다.</p>\n<p>신규 생성된 Node에 접속하여 Kubelet을 Down시켜 보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">WNODE3</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>신규생성된 Worker Node의 Public IP<span class=\"token operator\">></span>\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">hostname</span>\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">sudo</span> systemctl stop kubelet\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">sudo</span> systemctl status kubelet</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVQ4y5WTW2vcRhiG9ccaSNI0SUkCuXCgaSGlEHLX/1L6E3pb4hyg9KYXTuy49tbe7Np7kHat3bXjPWikGWl11nr1FI2d1N1CWw88PK+++UagT4zRt23apsl+44CdWo3aXp0/9urs1xs0Dlp0zJ6m3bX+wf77pu5ptU3e7myyXd/GePrsex6tPeGrx0+49eAbbt9f49bDNW7ee8j1L+5x484Drn3+5QV3tT+7eVdzrfKNO1y/fZ+vv3vG42+fYrw5/J2fdp6zvv2O9taPvHn7C/Wff8XerzM6HdPpWjQP23RMS9PumPT6R9iD4Se6Vh/THtPtDTCCLOQ4GDPxfbKgj1IO0ViwiGLOlkviJCWKE/K8IMtyzXJZasqypATOiph8vEmZfMAIfB/lSnwlceUc1/MQ0sNxXRxnphHCQUqPmTNDKUmSxERRSByFJGlK5I6ZvfiBdHKIUag60XSD3Ntl4e9B1IS4BfEhJK2/8mWigxWqXhOSHsa81WSytYF6v0fYalLYFoXd0yxWKFZycWSdU+XBiOKk+mQhcU4meBOBmrqomYeaetpy6mrUR+ua0A6EYu4qAuETuR5B7zXx6W41wwnCGeCKY1wxQsyGeO4JnjhByTHSO9X4akIQTHWtynnmU+SBZlH4FEGTRWxjLIIGibNFKrZJnHeaapZl2ITchNy68ApZF9LuuZMOZEeQjTCCMMaTAcoPNZ6q/rSPK32EK3GExPWUdvWs9zyFcJXOlcMwYD5aJ3Z2MCI1RM46+I6JLywCt08obSI1IPKH2rE/ouoL5d/zRxfxKYuwx1l8jJE6G6jBOmr4En/0inT2G2dyE6IahLUL7557NV+u6d4mRh5YhE6d2DsgEg1S1aaYW5Tp8AqMKNMBZfYBg39ZJVdfhr6P5fIS5Se45P+LwRUP/NcL/wQL7tog9BUKkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_11.png\"\n        title=\"img_11.png\"\n        src=\"/static/bea63bcc1edbef420fb754915a1924f2/37523/img_11.png\"\n        srcset=\"/static/bea63bcc1edbef420fb754915a1924f2/e9ff0/img_11.png 180w,\n/static/bea63bcc1edbef420fb754915a1924f2/f21e7/img_11.png 360w,\n/static/bea63bcc1edbef420fb754915a1924f2/37523/img_11.png 720w,\n/static/bea63bcc1edbef420fb754915a1924f2/f79fa/img_11.png 940w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>kubelet을 Down시키면 처음 Prometheus 에서는 Pending 상태로 표시가 됩니다.\r\n이후 10분이 지나면 Firing 상태로 변하게 됩니다.</p>\n<p>kubectl get prometheusrules -n monitoring -o json | grep TargetDown -B1 -A11 명령어를 입력하시면 아래에 해당해당 내용이 나오는데\r\n아래에 정의되어있는 규칙으로 인하여 10분 뒤 Firing 상태로 변하게되는 원리 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token string\">\"alert\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"TargetDown\"</span>,\r\n                                <span class=\"token string\">\"annotations\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\r\n                                    <span class=\"token string\">\"description\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"{{ printf <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>%.4g<span class=\"token entity\" title=\"\\&quot;\">\\\"</span> <span class=\"token variable\">$value</span> }}% of the {{ <span class=\"token variable\">$labels</span>.job }}/{{ <span class=\"token variable\">$labels</span>.service }} targets in {{ <span class=\"token variable\">$labels</span>.namespace }} namespace are down.\"</span>,\r\n                                    <span class=\"token string\">\"runbook_url\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"https://runbooks.prometheus-operator.dev/runbooks/general/targetdown\"</span>,\r\n                                    <span class=\"token string\">\"summary\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"One or more targets are unreachable.\"</span>\r\n                                <span class=\"token punctuation\">}</span>,\r\n                                <span class=\"token string\">\"expr\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"100 * (count(up == 0) BY (job, namespace, service) / count(up) BY (job, namespace, service)) <span class=\"token entity\" title=\"\\u003e\">\\u003e</span> 10\"</span>,\r\n                                <span class=\"token string\">\"for\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"10m\"</span>,\r\n                                <span class=\"token string\">\"labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\r\n                                    <span class=\"token string\">\"severity\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"warning\"</span>\r\n                                <span class=\"token punctuation\">}</span>\r\n                            <span class=\"token punctuation\">}</span>,</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 475px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrElEQVQ4y12T6W4bOwyF/f7/+h59iAL90V6gTRw3cRxvs0qafdPsXr5CshP0RgBBUjM6OiIPF0PgMLlv7LYHNqtnDpsN2/WaKAip0pQ8jqmynLHtGNrO+rbRZFlG0zSUZYnWDY3WzPPMQj98pf32hePThu+/1nz775mfj688rh1+vTj82QXUjWY+zUzTxDRP1pvDNv/H+r5nMc4Tg67wf/xg+bLhYbXmYfXC685htd6x3h8JRIDvufieh+97iFAgZIjnuoR+gJSSIAgZhoHFME70jUYtl3juAcc54B0PuM6BVEkbe57LbrfDPTrsd3u22x3H4/HDwiBEa30DPF8unMaROhSEaYNIa6K8QSQVKm+odc/F/HM6W3+5nDmdTpzO7/nNzLperixsMI6o3w+8HkNe9j7rvc8hSHhzJFFW0nUdbddSVTVN3Vg2piFVXVNXNyuK4lZDA3gZR+LlEtd17FOd4x4ZhqRxTJLE+L6PktICtrqla1t0o9FtS6u13TO5acwHYPL0hFKxLa4ptAGQUuF7AYHnIXyfJEkss7qsqMqKsqgoy8KyNgzrur4BnoeB7PkPKo7xXZ84ivA8j6qqmKeJtm2ZxpHOaHEYGPrBsmzbjq5r6U3edbYUHwzT1RNRkhL4IUIIvDujIi9odGOFnBc5ZVGSpRlVXVHkOZEpS5xYULP+ByiFRAplNZalCYeDkZFrD5j6jOPIPM2Mw8hoxDyOln3f9bbznwBX9qmBEJZhJBXqHqdJShwpyyZLMrI8tyyTNCNNU8qqoigLC/pPlx8RUhKGAqUihBR2MmQo6brejpph+D5272ZyA2Ti6/Wuw7MR9vaNUEhc10UE0o5YrBRxfJNNpJStn1Lm0pAoiS3Y53UT9vXK9ZPyjdn969Xefr5/N94wes8/zt/tL5FkbXGhpUh/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_12.png\"\n        title=\"img_12.png\"\n        src=\"/static/ff8803f6f187dba48491e83329d9c6dd/466da/img_12.png\"\n        srcset=\"/static/ff8803f6f187dba48491e83329d9c6dd/e9ff0/img_12.png 180w,\n/static/ff8803f6f187dba48491e83329d9c6dd/f21e7/img_12.png 360w,\n/static/ff8803f6f187dba48491e83329d9c6dd/466da/img_12.png 475w\"\n        sizes=\"(max-width: 475px) 100vw, 475px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n이후 WebHook 에서도 확인하실 수 있습니다!</p>\n<p>##5. PLG Stack</p>\n<p>PLG(<code class=\"language-text\">P</code>romtail, <code class=\"language-text\">L</code>oki, <code class=\"language-text\">G</code>rafana) 에 대해서 실습해보는 시간입니다.\r\nPLG는 위의 3가지의 요소를 묶어 여러 파드의 로그를 중앙 서버에 저장하고 조회하는 기능입니다.\r\n(<a href=\"https://www.infracloud.io/blogs/logging-in-kubernetes-efk-vs-plg-stack/\">https://www.infracloud.io/blogs/logging-in-kubernetes-efk-vs-plg-stack/</a>)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQY03WQYU7DMBSDe//rwA12Bv4UFoFCMtqq0FZtmqQv+dA6sWUILFnye/5ju5qmiQsyP8j5pstf/scrUWmtdyEpscWANGq/U0oXiiApg3j4PF49yZDXmdho5sWxLDPrulK1bUuMkRA88+JZXx6Q6YkQBe89IQSGcaRrPuieH+m7N/r+i7Al0mhx6sCrNtR1jVKKyhhzF3kcTgz9+91PZMNYu9Nag3Pu10hF5XPM60Y74dzwdv+9WemX/Aau/oYWnw2zhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_13.png\"\n        title=\"img_13.png\"\n        src=\"/static/00ec095fa88635df71bb1a3792c541cd/4597d/img_13.png\"\n        srcset=\"/static/00ec095fa88635df71bb1a3792c541cd/e9ff0/img_13.png 180w,\n/static/00ec095fa88635df71bb1a3792c541cd/f21e7/img_13.png 360w,\n/static/00ec095fa88635df71bb1a3792c541cd/4597d/img_13.png 631w\"\n        sizes=\"(max-width: 631px) 100vw, 631px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Promtail은 로그를 로컬 시스템에서 Loki로 전송하는 에이전트 입니다.\r\nLoki는 Promtail로 부터 로그를 받아 이것을 저장하고 분석하는데 적합합니다.\r\nGrfana는 Loki에서 로그를 가져와서 이것을 시각화 해주게 됩니다.</p>\n<p>먼저 실습을 위한 Nginx를 설치해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">helm repo <span class=\"token function\">add</span> bitnami https://charts.bitnami.com/bitnami\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/nginx-values.yaml</span>\r\nmetrics:\r\n  enabled: true\r\n\r\n  service:\r\n    port: 9113\r\n\r\n  serviceMonitor:\r\n    enabled: true\r\n    namespace: monitoring\r\n    interval: 10s\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> nginx bitnami/nginx --version <span class=\"token number\">13.2</span>.27 -f nginx-values.yaml\r\n\r\n<span class=\"token comment\">#CLB에 EnternalDNS로 도메인을 연결해주기</span>\r\nkubectl annotate <span class=\"token function\">service</span> nginx <span class=\"token string\">\"external-dns.alpha.kubernetes.io/hostname=nginx.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\"</span>\r\n</code></pre></div>\n<p>그렇다면 Loki, Promtail를 설치해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\r\n<span class=\"token comment\">#Loki 생성</span>\r\nkubectl create ns loki\r\nhelm repo <span class=\"token function\">add</span> grafana https://grafana.github.io/helm-charts\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/loki-values.yaml</span>\r\npersistence:\r\n  enabled: true\r\n  size: 20Gi\r\n\r\nserviceMonitor:\r\n  enabled: true\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> loki grafana/loki --version <span class=\"token number\">2.16</span>.0 -f loki-values.yaml --namespace loki</code></pre></div>\n<p>설치를 완료 하였다면 Curl 을 수행해줄 Test용 Pod를 생성해주어 로키 Gateway 접속확인을 해보도록 하겠습니다.\r\nkubectl apply -f ~/pkos/2/netshoot-2pods.yaml</p>\n<p>kubectl exec -it pod-1 — curl -s <a href=\"http://loki.loki.svc:3100/api/prom/label\">http://loki.loki.svc:3100/api/prom/label</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.777777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZUlEQVQI14WMuw7EIBAD0wJCFIDgdnmtSJTu/v/vHGWLa68Y2dJYPvr9xb5uiCzsfWKMgVoriAhrLfTetZdSMOdUF2MEMyOlBBH5bVtrOMqHQMwIISjee+U9yDnDGAPn3F+stZoPO7Qx2WfUhGsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_14.png\"\n        title=\"img_14.png\"\n        src=\"/static/3e91e1bb3d600c90206223d9684bb41d/37523/img_14.png\"\n        srcset=\"/static/3e91e1bb3d600c90206223d9684bb41d/e9ff0/img_14.png 180w,\n/static/3e91e1bb3d600c90206223d9684bb41d/f21e7/img_14.png 360w,\n/static/3e91e1bb3d600c90206223d9684bb41d/37523/img_14.png 720w,\n/static/3e91e1bb3d600c90206223d9684bb41d/2a50c/img_14.png 925w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 화면과 같이 나오면 정상적으로 접속이 완료된것입니다.</p>\n<p>이제 Promtail을 설치해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#Promtail 설치</span>\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/promtail-values.yaml</span>\r\nserviceMonitor:\r\n  enabled: true\r\nconfig:\r\n  serverPort: 3101\r\n  clients:\r\n    - url: http://loki-headless:3100/loki/api/v1/push\r\n#defaultVolumes:\r\n#  - name: pods\r\n#    hostPath:\r\n#      path: /var/log/pods\r\nEOT</span>\r\n</code></pre></div>\n<p>다음 Gragana 에 접속하여\r\nConfiguration -> Data source -> Add data source 로 들어가서 Loki 를 추가해주도록 하겠습니다.\r\n이떄 URL은 <a href=\"http://loki-headless.loki:3100\">http://loki-headless.loki:3100</a> 해보도록 하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 131.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1UlEQVRIx5VUSXLTQBT1noJMtoaeJVmjJdvxkJCkEsIixQKKBRsWcA0WXIFDcD5u8ajfkoIcywOL599yd78/vf6DyChEwoWRAibMYUwCIUM4rsCbkyFOTkfW9oH2WpyeOTg5dTDgOoYSDFprRHEFEyTgIrCEdOjs3D0K9VkHAxUkGA49pEZBeAyvXp/XXs9G9uD5hfdfGEgdIMjv8PDtN2arJ6R5ibSYIytmSIsZdJhBBSl0uAn6T3XWJsrhMY0BFxxm+gnvf/7B/P4bllfvsLh+wurmAxZXjyiqJYpyiaJaNVg+Iy//2TibwecGA48r+DpDevsFUTUHNzGYSsB0AqbGYDIAV6G1HjfWMhk2tosQji8xoB9fKKRljDBP4HKJocMwcnkDYb99YWCizKblMgmXqS04nsDAJUJOhwt4zNg/RwS3QfNNUZgotcR02eN6C5aQIqRww7iwh7mKIHQEZWKQAsiSw5a4JeuStusNwvnyBtnkEmE8sTBBiiDMrB05HBdDBp91iDrrDUJKmYpNUrERNWAiAKdCe3UNidTx5DPB3gjpogpim1L3wstLfen2EvoiwGJ9hzitaiGbGEGUY3l1j7xcQEcZwnFha3lUDYlwdf2Acrq2itdBCqljBOMc0ozrRqlo4/JOwraG2WRuo6GGSOqsMM9dfVmCgylTA2rCS6s1x5e9OjsyQgWfa0wvr7FY39pnRi+BnmRfNPucbEVIaVL6LXaluJewq0OLfAoVlQjzNRyPb106TNgUm54eaVHosY2YNqkch0h2ymYypZlW2SFAeqNN2qsdyr3d7iE0GKcloqSwg0HqsZUOQdh1jXZNTg9EaDBfvrXzzjZGh/ClARMKXBrrhLrf4uUI661h65kOZ14IIxL40QK+zjupH5kyDYdyukReLVBVK/yQj/g4+Yz111+Y3H2H47FGSkc0pR7dmxEMucSIGuExuL7oHVm7ZPMXbBG9O0C96zAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_15.png\"\n        title=\"img_15.png\"\n        src=\"/static/b9e377bc6fbc63dfd63d385af3206d1a/37523/img_15.png\"\n        srcset=\"/static/b9e377bc6fbc63dfd63d385af3206d1a/e9ff0/img_15.png 180w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/f21e7/img_15.png 360w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/37523/img_15.png 720w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/302a4/img_15.png 1080w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그 다음 Loki에서의 Log 확인을 위해\r\nwhile true; do curl -s <a href=\"http://nginx.$KOPS_CLUSTER_NAME\">http://nginx.$KOPS_CLUSTER_NAME</a> -I | head -n 1; date; sleep 1; done\r\n명령어를 사용하여 Nginx에 반복 접속을 걸어주도록 하겠습니다.</p>\n<p>다음 Grafana에서 Exploer -> Loki 로 접속한 뒤 상단에 Prometheus가 아닌 Loki로 선택 후 Label filter는 nginx로 선택하시고\r\n상단에 파란색 Run query를 클릭해주시면 아래 화면과 같이 Log 확인이 가능합니다!\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 124.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAADeUlEQVQ4y41UWW7jRhTkHWJL4s7m0s1NlEiJWmzPIDlAgJwoxwnyFyCWZdkJMkh8gdyognoUFc9kAuij0Hv1e/UW6+3tDZ8+/Ynj6RW/Ph7weDji8ek4jGccnp5xOJ7wfHrF0/OL4PTyG56eTzieXvD7X3/j8PoHfv7lJ1gmDhFGGVRSwrZ9OG6Em4mLb25swc2tI6PtRgiVRqA0VFIgjA0cT8ELYvTf/4h09QNc14flBgkcP0Zer9C0W8RZhSjJ5YFKCwTKwAtTAe9+Ce6nmUFVL+Uzy48yzNwQXX+HulkjyaozkUZqaoSxhh8mCKJM9gaYd3ONMCmgi8VAaHSJqRMKkR+mYl1eLLHs9tjsv4Uu19DVBlm5Rqxr8eBrUGkpXllpajCxfcRpgVTXuJk4cri7+w5d/wBd72Caj9D1/vLwa+BZqAysmRvhduaJ0ATN9sLsjBSByhDFGlFi/pdsBKWwaJ0XJlhtHtAsN1h0W6w29yjqVub1Yi1Buwa2pwZCpoQuGkSxkQBw5CeSJlGK26l3NaypE2BqB1BpDi9IxH1+Mo4Es+BaCCEtFGLOvUgOVGpknF5JxHeOr2DROmY8F9wkSLzqd0h0CTeIL5fHh1+C+44fyV3RkBM+ZlT9aKgKrjNJbCOR5v6IoXKSz9a8Q08vGs4c6uaKZtyjhjcTe9ByNmTCuD/K8x4zJ5TxTOgjyhaIdQOVDLUbqgwqX0FJbZtLfdNqWkWvvHfWCukYlJkToGi2KOY9+u0DynmH1FRIig6hEGnRkG7FWXluFLEQjc1lDJ5oyB8zU0nqsDHQEjYNtqZBo0TWnNu+uhCSjCQ851v2ggshK4PdJdGVgN2F1mT5XOqcic99fkj3WaLRucU5XiR75LGGOs7R9feompVg0e3EZZbdqr+Xtial2W5QVu358wp5uURZd5I6/JyVZU1mnmg0X/YwRQNTLuQSreKcZLRuvuiFSOdzsVpJd6pkTdftqMLMS84WpgX63Qd5ROJ2tZdocr7efMB8ucFm9xHLbotq3glIWlStzIUwMLBJOFpI92gJQUsoMuejhRzzaikfETynpiRmBkydIX//o2FNDdutaMR1t76TkVqKhnV7CeAgTysRZ9dncgshI9Su95J/vExX+TvXdJ+acqQXebkQ8JyW02pXLBzy+d+gLHq5MAZFXRuUovmM8B+60OTHZe19iwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_16.png\"\n        title=\"img_16.png\"\n        src=\"/static/3c02b51a0738291e82d64d86296553c2/37523/img_16.png\"\n        srcset=\"/static/3c02b51a0738291e82d64d86296553c2/e9ff0/img_16.png 180w,\n/static/3c02b51a0738291e82d64d86296553c2/f21e7/img_16.png 360w,\n/static/3c02b51a0738291e82d64d86296553c2/37523/img_16.png 720w,\n/static/3c02b51a0738291e82d64d86296553c2/e24fe/img_16.png 1073w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##6. 과제 1 교제 367 ~ 372 페이지 사용자 정의 Prometheusrules 정책 설정 : 파일 시스템 사용률 초과 80% 시 경고</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY032QW2+EIBCFfRaMK4ig4AVtvOC660v3//+z0zDbbZNu0ocvhxngMIfEbA/M+4llmdF1HWzTwFkHrTU452ApA2ccWZYRnGdI0/SNeDaSNOGBMXxiWwNue8Dce9yOO479wHk/EZaAdd6wX3d47+GHEUbX9OALpRSZMsaQqG5GpQ1N56xFEydsHdq2Rdf3qJsGspQoioIQQpBKKX+IvTzPKUHyMU3wfsA4jmQ6TROtnXPotYFVFU1RliWMMYQoCqqr6rkXlfpCIOm7loq6rglrLSn1YiSlKNLLUEiJ4nJBxtjbP1JkPazkHC88P53/8l1nf/Q/vgCSyZa880hxTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_19.png\"\n        title=\"img_19.png\"\n        src=\"/static/07d243d0cd6095d9213231e738195ce1/37523/img_19.png\"\n        srcset=\"/static/07d243d0cd6095d9213231e738195ce1/e9ff0/img_19.png 180w,\n/static/07d243d0cd6095d9213231e738195ce1/f21e7/img_19.png 360w,\n/static/07d243d0cd6095d9213231e738195ce1/37523/img_19.png 720w,\n/static/07d243d0cd6095d9213231e738195ce1/302a4/img_19.png 1080w,\n/static/07d243d0cd6095d9213231e738195ce1/62a6a/img_19.png 1122w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoElEQVQoz53M3W7aQBCGYd//QcVvIKHtBfSgUi8hJ62gVdUQbMANhLT8BnvZXe/aEGO/VQxpEnFQqSM9mvlGo3Ea797zplqhVCpTqtQp1xrUGheF6tk51bOLY24V6s0W9fO31Jqtv3eVepNyvcmHj59w2v0rvny/pPv5Er/n4d/c4Ps+rtfnuufiuh6D4ZDB4LXh0Gc0Gh+Mb/nZHzLxRzhZIMlDDWYL2pDLqMAT9bx7CWnAJAfxDsKQLAxw1P2QYN5DLDzUvU+8mRDLo+OcyLtX+eCOXTQlNVNSu2QruiTSx/k9m7JYC1ahQMgNUkukkiitkFqxUYdc0AodHajiblP0YtYaY2Oc9XJOuJojgxVivUSJNboQoDcBVgmMkkRKktiIxJqi23iLjXcYY4kig7WWJI5xOiNFZ2xojyPao6iYO7em6F9vDd8mFncWM5jHeDOLNzN48y3TXx6rqUsgFFprhBAkSYJzvcz5sYCrR8uDl7m7BBFDtAO9e+4P2w1pIki2D+z3e7IsI01THIrK/8NpPT52sjznX/ITnOyeHv4BG7Lj9Apa11UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_20.png\"\n        title=\"img_20.png\"\n        src=\"/static/1ff2b5936232d5b90f9680b101590efb/37523/img_20.png\"\n        srcset=\"/static/1ff2b5936232d5b90f9680b101590efb/e9ff0/img_20.png 180w,\n/static/1ff2b5936232d5b90f9680b101590efb/f21e7/img_20.png 360w,\n/static/1ff2b5936232d5b90f9680b101590efb/37523/img_20.png 720w,\n/static/1ff2b5936232d5b90f9680b101590efb/302a4/img_20.png 1080w,\n/static/1ff2b5936232d5b90f9680b101590efb/07a9c/img_20.png 1440w,\n/static/1ff2b5936232d5b90f9680b101590efb/cb9f4/img_20.png 1903w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##7. 과제 2 교제 386 ~ 389 페이지 - LogQL</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQoz5WSy27TUBRF/QGIpqHE+P1+xq+kBKcgAoGoqBJ50Lgp0AljhBADPoEJX73QvSFInYXB0tnX3sc+Z+squ5tbtt1HNpuO98sPLFfXLNf3Wa23e726Zr3p6Haf2d3e0d18Ytvt+PLtF3dff/P9x0+U0zMNxx8y0Gx6/QEnp3se/ge9RzoPTlRevlqgBGHGsG7JyzFpXpFkFZYTYtrB0Qj/mWowf3OJYlg+fpRhuSG2G2G5EapuH8VAsySa4dDriwnfoqiaTZyV6Jb3z/jEcI7CdHzZJxDRzeYLFPEijHNsL0I3XTTTQZP1PqLpUA/a8WMM25e6/1hn9nqBIiYynAjd8tGsANONZYNhB9IsfrivrlzvsKr6d13hdYNUZignNEyXIKmIkpwkKwnTmigtiJICL8xw/UTiB5HMWGxiezGOF0vthamMTOjF5RWK5wTSUDcNLy5ayqalOZ9SNc+ox1PGT5+TF2Omk5o0b8iGI3kj9reiIc7E8xrLS5gvrlBCTwQbkBcVk0lLNWrlh8pmQj1qGZ1fyIaiGBImBVFaEguySp4F4qxZIbP5O/4As9oja3HPWT8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_17.png\"\n        title=\"img_17.png\"\n        src=\"/static/65e4a9cca737f2c6de4ce3d906f7ddeb/37523/img_17.png\"\n        srcset=\"/static/65e4a9cca737f2c6de4ce3d906f7ddeb/e9ff0/img_17.png 180w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/f21e7/img_17.png 360w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/37523/img_17.png 720w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/302a4/img_17.png 1080w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/07a9c/img_17.png 1440w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/91bda/img_17.png 1867w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz42RWU7DMBCGfQNoK5rGjePEdhJnISxCHIKyNG1BIB5445ULcAhu/KOZNGURIB4+/TOexX8csdncolvd4fpmhYvFEovLJRZXHXPJutxqx7Wr6xVWm3usbx9Yl90aj8+veHp5Q7d+gBhNZtC2RqgMKB6NA+yPA+yNfmH8A5MQk0AjjAyEsQWq9hxVewpftfBlC6Ud5rFBFFvM/4XBXPWIMEqQ2IKXqKQnkDGCMO71L0L1JT8IIoiZ1KjbE0iVYir7htlcYxYlPRT/As2QoQEyIWSUIvcN25afigTlNPQd7lUpIm1Zh+XTUEGQbRm7bZOBSord+9EALR4W/PTZVNMmR6Rd75AGbNHC5jVj8gap8zBZCZNV/L6J9TxEMV3CP2FLnGZIXcmz9P4iNhlcUaNsTtG0Z8h8g7xsmWLQ6gi+Poavjnb50MP4Q9jiEFI5iNRZaFNwU1kfsxu6kSCXg5Jb48qPOmsf07m2JaYywTveHhz0AXP8WgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_18.png\"\n        title=\"img_18.png\"\n        src=\"/static/06560e1cd277a80719c9d300cb54bc3d/37523/img_18.png\"\n        srcset=\"/static/06560e1cd277a80719c9d300cb54bc3d/e9ff0/img_18.png 180w,\n/static/06560e1cd277a80719c9d300cb54bc3d/f21e7/img_18.png 360w,\n/static/06560e1cd277a80719c9d300cb54bc3d/37523/img_18.png 720w,\n/static/06560e1cd277a80719c9d300cb54bc3d/302a4/img_18.png 1080w,\n/static/06560e1cd277a80719c9d300cb54bc3d/07a9c/img_18.png 1440w,\n/static/06560e1cd277a80719c9d300cb54bc3d/bfd4b/img_18.png 1871w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##8. 과제 3 스터디에서 배우지 않은 Alert Rule 생성 및 적용</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVQoz63QS0vDQBSG4fnTgouCt0RbUnEjrvxH7txIEcTQJE46Y5vLpGkxyStOkrZqXSie4WHOdzjMYsShe8Tx4IDTgcPIu8K9GOMOx5w4I87OPZudPfq9Nnu4w0uub24RaqkxhaJcFlSbU1NWa1bVmjeqH33s9dUAcqURD8GEycsTz6/Blp7izwP8L7O+9zthKpFGWVEecxffIx5nIdOFJM41MlPf5Z2dHHezmdEbsdEEmUSEUqHmKYskwxhj5d3d9/tyK/+kMAUiiiK0VqRJQpq2j5Zl+WfCfmjTWHVd23t39luCf6534uBQjfS5jGYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_21.png\"\n        title=\"img_21.png\"\n        src=\"/static/78943f94dedc9196277e5a2fa15f000b/37523/img_21.png\"\n        srcset=\"/static/78943f94dedc9196277e5a2fa15f000b/e9ff0/img_21.png 180w,\n/static/78943f94dedc9196277e5a2fa15f000b/f21e7/img_21.png 360w,\n/static/78943f94dedc9196277e5a2fa15f000b/37523/img_21.png 720w,\n/static/78943f94dedc9196277e5a2fa15f000b/302a4/img_21.png 1080w,\n/static/78943f94dedc9196277e5a2fa15f000b/07a9c/img_21.png 1440w,\n/static/78943f94dedc9196277e5a2fa15f000b/91bda/img_21.png 1867w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQY03WNy27DMAwEfWwtkpKbOhCdxA+grYQE7rX//2UT2MglaHsYYJcAZ5taCrVWSims64q77/THI70aEgSR34QQ/rw3OQ+oKiklohkpxh0zI26PbfvMJvpHtgvflm8ul4lpntEUkRjRTdglWjVsG+rS3mNKiBqtCG0IvD7Y8ssjN339wefCkp1rdm5+4ssH1vNIie9cfeJjGLn5wJSdz9hzVuMgHaMYgygHERYxTqLcAbpOYRch382JAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_22.png\"\n        title=\"img_22.png\"\n        src=\"/static/92ab53f2fd20971e48e0a1323915696b/37523/img_22.png\"\n        srcset=\"/static/92ab53f2fd20971e48e0a1323915696b/e9ff0/img_22.png 180w,\n/static/92ab53f2fd20971e48e0a1323915696b/f21e7/img_22.png 360w,\n/static/92ab53f2fd20971e48e0a1323915696b/37523/img_22.png 720w,\n/static/92ab53f2fd20971e48e0a1323915696b/914c7/img_22.png 978w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-alert-manager\">1. Alert Manager??</a></li>\n<li><a href=\"#2-%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD-%EB%B0%B0%ED%8F%AC-%EC%A4%91-%EC%9D%B4%EC%8A%88-%EB%B0%9C%EC%83%9D\">2. 실습환경 배포 중 이슈 발생</a></li>\n<li><a href=\"#3-prometheus-grafana-alert-manager-%EB%B0%B0%ED%8F%AC\">3. Prometheus, Grafana, Alert Manager 배포</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 25, 2023","title":"Gasida Kubernetes Study 6주차","categories":"Kubernetes","author":"KORWOO","emoji":"🔮"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_6/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/Kubernetes/Gasida_Study_homework_5/","nextSlug":"/Kubernetes/Gasida_Study_homework_4/","prevSlug":"/Kubernetes/Gasida_Study_homework_6/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}