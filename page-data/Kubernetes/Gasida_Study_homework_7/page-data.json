{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Kubernetes/Gasida_Study_homework_7/",
    "result": {"data":{"cur":{"id":"e1480ec1-191d-5f85-a82b-25d05d2ac8b4","html":"<p>ê°€ì‹œë‹¤ë‹˜ ìŠ¤í„°ë”” : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG5S0peaL//xAAaEAACAgMAAAAAAAAAAAAAAAABAgARAxIT/9oACAEBAAEFAmvVOlzMxDB2uf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABECIxIf/aAAgBAQAGPwKulkko4zY//8QAGRABAQEAAwAAAAAAAAAAAAAAAREAECFB/9oACAEBAAE/IZKL4NR5KYcQ6znw/9oADAMBAAIAAwAAABD87//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EKf/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QcH//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhgRBR/9oACAEBAAE/EKsTlGXHSkUBFHmbMTEN53AhcAmj55//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"book.jpg\"\n        title=\"book.jpg\"\n        src=\"/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg\"\n        srcset=\"/static/ffca88658c8e7539216186bdb5832d9c/4ec73/book.jpg 180w,\n/static/ffca88658c8e7539216186bdb5832d9c/158ba/book.jpg 360w,\n/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg 720w,\n/static/ffca88658c8e7539216186bdb5832d9c/47311/book.jpg 1080w,\n/static/ffca88658c8e7539216186bdb5832d9c/644c5/book.jpg 1440w,\n/static/ffca88658c8e7539216186bdb5832d9c/93719/book.jpg 4000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë³¸ í¬ìŠ¤íŒ…ì€ ê°€ì‹œë‹¤ë‹˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ìŠ¤í„°ë”” ë‚´ìš©ê³¼ ì´ì •í›ˆë‹˜ì˜ <code class=\"language-text\">24ë‹¨ê³„ ì‹¤ìŠµìœ¼ë¡œ ì •ë³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤</code>\r\nì±…ì„ ì°¸ê³ í•˜ì—¬ í¬ìŠ¤íŒ…í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h1 id=\"7ì£¼ì°¨-kubernetes-ë³´ì•ˆ\" style=\"position:relative;\"><a href=\"#7%EC%A3%BC%EC%B0%A8-kubernetes-%EB%B3%B4%EC%95%88\" aria-label=\"7ì£¼ì°¨ kubernetes ë³´ì•ˆ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7ì£¼ì°¨ Kubernetes ë³´ì•ˆ</h1>\n<h2 id=\"1-podì—ì„œ-ec2-ë©”íƒ€ë°ì´í„°ì˜-iam-role-token-ì •ë³´ë¥¼-í™œìš©í•˜ì—¬boto3-ìŠ¤í„°ë””ì—ì„œ-ì†Œê°œí•œ-ê²ƒ-ì´ì™¸ì˜-ë‹¤ë¥¸-aws-ì„œë¹„ìŠ¤í˜¹ì€-actionë¥¼-ì‚¬ìš©-í›„-ì½”ë“œ-or-ìŠ¤ìƒ·\" style=\"position:relative;\"><a href=\"#1-pod%EC%97%90%EC%84%9C-ec2-%EB%A9%94%ED%83%80%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-iam-role-token-%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%ACboto3-%EC%8A%A4%ED%84%B0%EB%94%94%EC%97%90%EC%84%9C-%EC%86%8C%EA%B0%9C%ED%95%9C-%EA%B2%83-%EC%9D%B4%EC%99%B8%EC%9D%98-%EB%8B%A4%EB%A5%B8-aws-%EC%84%9C%EB%B9%84%EC%8A%A4%ED%98%B9%EC%9D%80-action%EB%A5%BC-%EC%82%AC%EC%9A%A9-%ED%9B%84-%EC%BD%94%EB%93%9C-or-%EC%8A%A4%EC%83%B7\" aria-label=\"1 podì—ì„œ ec2 ë©”íƒ€ë°ì´í„°ì˜ iam role token ì •ë³´ë¥¼ í™œìš©í•˜ì—¬boto3 ìŠ¤í„°ë””ì—ì„œ ì†Œê°œí•œ ê²ƒ ì´ì™¸ì˜ ë‹¤ë¥¸ aws ì„œë¹„ìŠ¤í˜¹ì€ actionë¥¼ ì‚¬ìš© í›„ ì½”ë“œ or ìŠ¤ìƒ· permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Podì—ì„œ EC2 ë©”íƒ€ë°ì´í„°ì˜ IAM Role Token ì •ë³´ë¥¼ í™œìš©í•˜ì—¬(boto3), ìŠ¤í„°ë””ì—ì„œ ì†Œê°œí•œ ê²ƒ ì´ì™¸ì˜ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤(í˜¹ì€ Action)ë¥¼ ì‚¬ìš© í›„ ì½”ë“œ OR ìŠ¤ìƒ·</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 713px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 121.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1klEQVQ4y31VCZLjIAz0/1+4s8lUZpL4PjAY2+AjvdXykHOyVHVBMBJSq0UiP68Y3AzrZ9jRo+s6qFaj1QbOe3BcLhf8NsI+53meBZF3DkmS4Hg8Is9zHI8nmbnHA8HgHTjWdUGWZSiKEhGNtNZwzsH7Cd57wTRN/43sGcuyYF3XLcKqrvFuvIvqeSRxjLIsEa2Xi0THiIID3kSM44h1fXXArPq+FxhjhHfaM8qIztI0hVIKnbXiJDhumkZAStpWy2ytxTAMwjNB7mhf17V8i+Zphqo3Q3LHW4JDozWKopBUSAsvY3SMpm3bK7YLW4k4GieHrMmhO/PCHW/sh/5apDBIx7sRGW9x0hk61798JB1BOs+6e4fo3gELwJRDYYLxJonbfjjza4QsYt9kcNZgGEfhkumxckyZ6QpPbSs6JU/8fX/xQ4TcYNVoePuwPsjnHs+tKOd+7ETY3GTZd7u/iOMYlerQ9SO8dw9dw4gIVpwSo2S+DgeRy9D3UmnpZZGHMXKIM/Vmuk4OMG2CVNApnfMMqWDadLrb7fC5/8ThcIC1PSLeSl6YNg8SwSh0QkDglXPQLO0IKoIQh/dGWqLcxGru1uF3WNMpLwydw2LyrLw2ocXIR/2zvkEJHc3L/na+qiqZ+dxxHTF09uP5fMbHxx/B+XxCnqXI0hRpkshhfif2+70Uj3uc97sdvr+P4kNeG6YceMmLEnHeIC1bJIVCnCs0bQfnyNP2utR1JapotZZUA68h9Shob6Xj3sEMK5T10P0kMMOEbpjhp02DlBM5nO5a8qFTpLVmGiwwTY62qZAph0L1KNSAWg8w1qEfJ2k/RiLaG0YJhJUNiuBrJA4hagcGXcIahcYuEp0dFyxPLbtVVGGa5usDEtKWlNkuSrUoywJxkuOYVDjFOeK0eKx+XaNpauRZJsUIHcOihn88il8chk7ZHgH183BucnlGeCi4vv25+Sv+AS40Q3H8AY4GAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/7478e8dbf82dc486b919fc4f937013a2/01267/img_1.png\"\n        srcset=\"/static/7478e8dbf82dc486b919fc4f937013a2/e9ff0/img_1.png 180w,\n/static/7478e8dbf82dc486b919fc4f937013a2/f21e7/img_1.png 360w,\n/static/7478e8dbf82dc486b919fc4f937013a2/01267/img_1.png 713w\"\n        sizes=\"(max-width: 713px) 100vw, 713px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Nodeì— EC2 Full Access ê¶Œí•œ ë¶€ì—¬</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVQoz4VSx6qEQBD0aFpzDpgwi3gQEf//v3qphlkePMVDoT30VOgeaRgGKoqCfN8nx3Ho8/mQruuv0DTt9lxqmobKsqQ8z5kQjYqiMFRV5foOT6QSiEBYVRWjrmsmb9uWnQdBQGEYUpqmlGUZ10jx6LDrOgL6vudLruuS53k8AtM02end5SfnEgiSJGF3cAK3EMAoACH05OifQ8wNiKLoFxUQhEAcxxwVkdEDYSSAEQCCOLcsi6RxHGmaJlrXleZ5ZmIowbmIDEHUf5fxGBlEx3HQeZ50XRerQ3Xfd3aEpmVZWBTkr5ExL5Bt28YbFiPATBEVhNg2IuEZvRIilm3bZBgGybL8sy7eIZrwFf9vy/kCepf18hudRLQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/bb8b30dec5111e57033b4fb664388521/37523/img_2.png\"\n        srcset=\"/static/bb8b30dec5111e57033b4fb664388521/e9ff0/img_2.png 180w,\n/static/bb8b30dec5111e57033b4fb664388521/f21e7/img_2.png 360w,\n/static/bb8b30dec5111e57033b4fb664388521/37523/img_2.png 720w,\n/static/bb8b30dec5111e57033b4fb664388521/302a4/img_2.png 1080w,\n/static/bb8b30dec5111e57033b4fb664388521/b5cea/img_2.png 1140w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>EC2 Instances ê¶Œí•œ íšë“ ë° ì½”ë“œ ì‹¤í–‰ ê²°ê³¼</p>\n<p>ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì¤‘\r\nì´ˆê¸°ì—ëŠ”\r\nec2client=boto3.client(â€˜ec2â€™) ë¼ê³  ì½”ë“œë¥¼ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\r\nê·¸ ê²°ê³¼ Moduleì„ ì°¾ì•„ì˜¤ì§€ ëª»í•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤..ã…œã…œ\r\nì—´ì‹¬íˆ êµ¬ê¸€ë§ í•´ë³¸ ê²°ê³¼ ë’¤ì— Regionì„ ë¶™ì—¬ì£¼ëŠ” ì˜ˆì‹œì½”ë“œë¥¼ ì°¾ì•„ì„œ ì ìš©í•´ë³¸ ê²°ê³¼ ì´ìŠˆê°€ ì—†ì´ ì˜ ì‘ë™í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\r\nì•„ì§ë„ ì™œ ë¦¬ì „ì„ ì•ˆ ë¶™ì´ë©´ ëª¨ë“ˆì„ ëª»ì°¾ì•„ ì˜¤ëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë„¤ìš”.. ì›ì¸ë¶„ì„ì€ ì°¨ê·¼ì°¨ê·¼ í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤</p>\n<h2 id=\"2-êµì œ-p-398--p400-kubescape-armo-ì›¹-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#2-%EA%B5%90%EC%A0%9C-p-398--p400-kubescape-armo-%EC%9B%B9-%EC%82%AC%EC%9A%A9\" aria-label=\"2 êµì œ p 398  p400 kubescape armo ì›¹ ì‚¬ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. êµì œ P 398 ~ P400 kubescape armo ì›¹ ì‚¬ìš©</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVQoz22SS2sUQRSFe+VSZkIMQSESwcckRhSJ5EfkJ4j/QHAzijoiZkhgwLV73QjRnZvgKihMAhIlZiYEBIlRSERi9/RjuqvqVn3S3TPxgQWHW3W5dTjnVHnXby4zf+Mpc/NPWPm4y2fTZzsK2YlDdpKIbs9n88d3tn4e0g18Ov4h3V7AVtArZvLZTi9gOwxZP9jDG7v4kMq5BscmbtN+t0u+tBZELGIGEIu1DpG/kfe0sSgtaO3wowBv8tojTkzdpXL2Diur2xxGMb1UEymDyckBYx1hrAnjjDQzZEp+Q+eEttinmcObnHvMqastqlOLvH3zCXPgo/Z99EFQwOz7ZH6CH2REfUVmhmotYh1KaZIkRSlDqgzeyStLjE43qcws0n7WhtYr9L1lpPECefASqT/HvO4ggBXBOke5yqrSjDiKSZIEEYN3erbFxGyLkdoCax++FUN9cWSOI6hBXjnXUN3wHCaKMIqJwqhQ641fXmJsZpFqbYH1jb2SMDWoQUaqyEaIEoXSBm2khBaM2KKX281rfs+r1ppULjSp1Jqsv/9aEg6CL8MuQy9VlZBBLSzHSaFOa4OI4I3W6oxfqnP8zC3WNr4cEao/Xi+vzg0su6H9MsM06ROGIUqpQqlXrTUYmW5QPX+ftaHl/xDm/+1fGGPJtBRfySF0NhW/AJTLxFGBAZmsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_3.png\"\n        title=\"img_3.png\"\n        src=\"/static/1c5d9b35930d5e3d020e7c8da83055dd/37523/img_3.png\"\n        srcset=\"/static/1c5d9b35930d5e3d020e7c8da83055dd/e9ff0/img_3.png 180w,\n/static/1c5d9b35930d5e3d020e7c8da83055dd/f21e7/img_3.png 360w,\n/static/1c5d9b35930d5e3d020e7c8da83055dd/37523/img_3.png 720w,\n/static/1c5d9b35930d5e3d020e7c8da83055dd/302a4/img_3.png 1080w,\n/static/1c5d9b35930d5e3d020e7c8da83055dd/07a9c/img_3.png 1440w,\n/static/1c5d9b35930d5e3d020e7c8da83055dd/09262/img_3.png 1896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"3-polaris-ê´€ë ¨-ì‹¤ìŠµ\" style=\"position:relative;\"><a href=\"#3-polaris-%EA%B4%80%EB%A0%A8-%EC%8B%A4%EC%8A%B5\" aria-label=\"3 polaris ê´€ë ¨ ì‹¤ìŠµ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. polaris ê´€ë ¨ ì‹¤ìŠµ</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 157.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAAAsTAAALEwEAmpwYAAADtElEQVRIx51Wz4scRRSe/0LPGkQ8RIO5GKIeYmLwEBaWkPVHBF3wEnJZUfDgQbx49KKokRDBZMkSNAQTFDTgwas3g3HN/pjd2WR+9HR3VXVVdVdXf/LeTM12JjM7MQXfPKiZ/vp7732vahpaa1hrIaSEEBKpkEhSwVFIBa0NjLEwdggzgLU5skxDSoVMa7jCYafTQkMpxYS5tQAqPOzytd9WqJijyIsBIamMen1cWf4JFy/8iEvfXcU3X1zEOcYlfHtuBecv/IDl76/h6vJ13Lh8AzdXfsbvV37Br8vXcevPv2BzCyklGvSR5zm2mi0c2j+H5558FQf2HcdTj7+EfY+9iKefOIZn98/h2AtvYP7gKbx74CTOHlzAe8+fwtlDp3HmmTn89vUKSgAyFWgoOUi5tX0XJ468g+OH38JrL7+NuaOLOHL4TbxydBELJ87g/ZNL+GR+CZ/PL+GrhQ/x6esf4LPFj/Hl6Y9w69pN2KqEFHI3ZcLGWhOrt9fw7+o6x39ur2F1dQPrdzbRvNPEzvo22pst9LbuQuy0kd3rQt7rIo1iaKORKTUgpJSNMShLxyWm6H2J/7Mq71kUExZFgSzL2DYcUwEqRVmW8L6C955RMSpG2Ct9hbIa+MMEQuccdyiKIn4LqeW3VtVE0BJ5gXWRYUsoNJMEwlpYY3YVCiHQbrcRfDmNrE64piw6vTaKv/9AGe3ABB9yykohTVNWSDWdpVAWDttSo2VybCUZVDdhL466zNOS5xzroL1x2GF0NeTDPjTogwhJXUAcx+j3+/wQKQoNmIVRl6kJzhWcOr/ZOcYkxXuBFYYaUqTG0Gan00Gr1eL9abWctO7zIakk61AkHyZJMtU+qCo475G5EtqVHIuqgjE1QkovEIZa0jk3kRBASrYRCptSYyNOIYd2Gxlb1WwTGkP70whJWVtbdKxDnPTh4ggmzweENGLU9iRNWSkpJoSHx2s2s4akpPQeqRC8SXvUnDrhuMJJjdJh9Ngm3kMoBSkEpxwaspei+ndMGBRSyoUx6He7iPp9NjUpJNJZdplI6FwJeAeVxFxH8iMppTitjjMIHZ9pqZRI4pjtExTybTZm8IckrJiQ6kemJoSOU8MegXCgME2SUVPCPPtHIySFajQlejglkx6cZqMHCIXKmIyaMT4lu/8SMJX4vjuFksqMGZha6z0VzZ6U4aiFC4oU1o09aZmyRMfk6NmcI8326JIaHJAGenh6k20ohoO2joLK4xwym6OXaUTacFQ255T/A1xrMqmPTT+oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/1e27c78ce91fcd360c5a53f470d252d5/37523/img.png\"\n        srcset=\"/static/1e27c78ce91fcd360c5a53f470d252d5/e9ff0/img.png 180w,\n/static/1e27c78ce91fcd360c5a53f470d252d5/f21e7/img.png 360w,\n/static/1e27c78ce91fcd360c5a53f470d252d5/37523/img.png 720w,\n/static/1e27c78ce91fcd360c5a53f470d252d5/8ea22/img.png 1023w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"4-ì‹ ê·œ-ì„œë¹„ìŠ¤-ì–´ì¹´ìš´íŠ¸sa-ìƒì„±-í›„-í´ëŸ¬ìŠ¤í„°-ìˆ˜ì¤€ëª¨ë“ -ë„¤ì„ìŠ¤í˜ì´ìŠ¤-í¬í•¨ì—ì„œ-ì½ê¸°-ì „ìš©-ì˜-ê¶Œí•œì„-ì£¼ê³ -í…ŒìŠ¤íŠ¸\" style=\"position:relative;\"><a href=\"#4-%EC%8B%A0%EA%B7%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%96%B4%EC%B9%B4%EC%9A%B4%ED%8A%B8sa-%EC%83%9D%EC%84%B1-%ED%9B%84-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%88%98%EC%A4%80%EB%AA%A8%EB%93%A0-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%ED%8F%AC%ED%95%A8%EC%97%90%EC%84%9C-%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%9A%A9-%EC%9D%98-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%A3%BC%EA%B3%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"4 ì‹ ê·œ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸sa ìƒì„± í›„ í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í¬í•¨ì—ì„œ ì½ê¸° ì „ìš© ì˜ ê¶Œí•œì„ ì£¼ê³  í…ŒìŠ¤íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ì‹ ê·œ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸(SA) ìƒì„± í›„ í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€(ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í¬í•¨)ì—ì„œ ì½ê¸° ì „ìš© ì˜ ê¶Œí•œì„ ì£¼ê³  í…ŒìŠ¤íŠ¸</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">k get create sa korwoo-readonly -n default\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl create -f -</span>\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: korwoo-readonly\r\n  namespace: default\r\nspec:\r\n  serviceAccountName: korwoo-readonly\r\n  containers:\r\n  - name: kubectl-pod\r\n    image: bitnami/kubectl:1.24.10\r\n    command: [\"tail\"]\r\n    args: [\"-f\", \"/dev/null\"]\r\n  terminationGracePeriodSeconds: 0\r\nEOF</span>\r\n\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl create -f -</span>\r\napiVersion: rbac.authorization.k8s.io/v1\r\nkind: ClusterRole\r\nmetadata:\r\n  name: role-korwoo-only\r\n  namespace: default\r\nrules:\r\n- apiGroups: [\"\"]\r\n  resources: [\"*\"]\r\n  verbs: [\"get\", \"watch\", \"list\"]\r\nEOF</span>\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArklEQVQY02WPyQ6DMAxEc2KN1LSEAFlAlYiQaC/w//821Viih/Yw8jiO7WcVbwbaJcRnxvv1wnEc2PcdMUZM04QQAlJK4pdlET8Mg0TKew9rLeZ5hnMOKm8b7OOO4D1yzmia5quyLEVFUaCqKvF1XUuN8RJz1hnVeZ5Y14xxHIWARKThNlJehMxJdg1o2xZa6z8p4hpjpJFNfd/LCfR8Y951nXhewBO5kH84+HfgB4t+Y2dlmV/4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_4.png\"\n        title=\"img_4.png\"\n        src=\"/static/0a4108867522cefead3a3b75dcb304fb/37523/img_4.png\"\n        srcset=\"/static/0a4108867522cefead3a3b75dcb304fb/e9ff0/img_4.png 180w,\n/static/0a4108867522cefead3a3b75dcb304fb/f21e7/img_4.png 360w,\n/static/0a4108867522cefead3a3b75dcb304fb/37523/img_4.png 720w,\n/static/0a4108867522cefead3a3b75dcb304fb/302a4/img_4.png 1080w,\n/static/0a4108867522cefead3a3b75dcb304fb/df56e/img_4.png 1188w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\në¶€ì—¬ëœ ë¡¤ í™•ì¸</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Role Binding ìƒì„±\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl create -f -</span>\r\napiVersion: rbac.authorization.k8s.io/v1\r\nkind: ClusterRoleBinding\r\nmetadata:\r\n  name: roleB-korwoo-only\r\n  namespace: default\r\nroleRef:\r\n  apiGroup: rbac.authorization.k8s.io\r\n  kind: ClusterRole\r\n  name: role-korwoo-only\r\nsubjects:\r\n- kind: ServiceAccount\r\n  name: korwoo-readonly\r\n  namespace: default\r\nEOF</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAp0lEQVQY05WQSw+DIBCEufpMK4oPFhTFJobG/v9fN83uoemt9jCZjzDZHVDurlEZgl8feKaE83xh33cMw4BxHEFE4tZaYe+98DRNwuyc7fsezjmoNUbc6gpEFvM8I89z1HUtzsqy7Ke+syosCywRYozShIeVZSniUFEUn/MVqZQStNbyjG3bhHkTX3Zdh7Ztha8OViEEGGPQNA2YuSWLhx3HId/wT8s3Q615ertXzVQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_5.png\"\n        title=\"img_5.png\"\n        src=\"/static/8fc28df0844132b61fc8c2c3d9dddd8c/37523/img_5.png\"\n        srcset=\"/static/8fc28df0844132b61fc8c2c3d9dddd8c/e9ff0/img_5.png 180w,\n/static/8fc28df0844132b61fc8c2c3d9dddd8c/f21e7/img_5.png 360w,\n/static/8fc28df0844132b61fc8c2c3d9dddd8c/37523/img_5.png 720w,\n/static/8fc28df0844132b61fc8c2c3d9dddd8c/302a4/img_5.png 1080w,\n/static/8fc28df0844132b61fc8c2c3d9dddd8c/c425d/img_5.png 1279w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë¶€ì—¬ëœ ë¡¤ í™•ì¸</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6klEQVQY042R2WrDMBBF9ejdxbtjx6skI8txlPz/v90yQw2lFNqHw4iRdHUYiaNpcWsHFKOGVgrHcWCeZyiloLXGtm0YhgFlWaIoCjRNw1RVxVCfoHUYhhDnKtF3A+r7jHVdOYTCKHSaJizLgjzP4XkeXwiCAL7vc/1JFEUQ7vFAd+uQFSWklFBKs1Ecx0iShA9RENX/IE7nYIzBR5pg+rIax5GNyOSCDCj4L8STjO4T4ryCkpLD+75H27Y8q7queU1zuqzTNP0V2hOntTBmx/P1ht13OOdgreVZ0kwJsv4OPXJ9ygX1sizDJ9sWmCysSmykAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_6.png\"\n        title=\"img_6.png\"\n        src=\"/static/2e8edc6591fb271d8b4a9c28f21fced4/37523/img_6.png\"\n        srcset=\"/static/2e8edc6591fb271d8b4a9c28f21fced4/e9ff0/img_6.png 180w,\n/static/2e8edc6591fb271d8b4a9c28f21fced4/f21e7/img_6.png 360w,\n/static/2e8edc6591fb271d8b4a9c28f21fced4/37523/img_6.png 720w,\n/static/2e8edc6591fb271d8b4a9c28f21fced4/302a4/img_6.png 1080w,\n/static/2e8edc6591fb271d8b4a9c28f21fced4/07a9c/img_6.png 1440w,\n/static/2e8edc6591fb271d8b4a9c28f21fced4/16068/img_6.png 1451w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë¶€ì—¬ëœ ë¡¤ ê¸°ë°˜ ê¶Œí•œ í…ŒìŠ¤íŠ¸</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-pod%EC%97%90%EC%84%9C-ec2-%EB%A9%94%ED%83%80%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-iam-role-token-%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%ACboto3-%EC%8A%A4%ED%84%B0%EB%94%94%EC%97%90%EC%84%9C-%EC%86%8C%EA%B0%9C%ED%95%9C-%EA%B2%83-%EC%9D%B4%EC%99%B8%EC%9D%98-%EB%8B%A4%EB%A5%B8-aws-%EC%84%9C%EB%B9%84%EC%8A%A4%ED%98%B9%EC%9D%80-action%EB%A5%BC-%EC%82%AC%EC%9A%A9-%ED%9B%84-%EC%BD%94%EB%93%9C-or-%EC%8A%A4%EC%83%B7\">1. Podì—ì„œ EC2 ë©”íƒ€ë°ì´í„°ì˜ IAM Role Token ì •ë³´ë¥¼ í™œìš©í•˜ì—¬(boto3), ìŠ¤í„°ë””ì—ì„œ ì†Œê°œí•œ ê²ƒ ì´ì™¸ì˜ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤(í˜¹ì€ Action)ë¥¼ ì‚¬ìš© í›„ ì½”ë“œ OR ìŠ¤ìƒ·</a></li>\n<li><a href=\"#2-%EA%B5%90%EC%A0%9C-p-398--p400-kubescape-armo-%EC%9B%B9-%EC%82%AC%EC%9A%A9\">2. êµì œ P 398 ~ P400 kubescape armo ì›¹ ì‚¬ìš©</a></li>\n<li><a href=\"#3-polaris-%EA%B4%80%EB%A0%A8-%EC%8B%A4%EC%8A%B5\">3. polaris ê´€ë ¨ ì‹¤ìŠµ</a></li>\n<li><a href=\"#4-%EC%8B%A0%EA%B7%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%96%B4%EC%B9%B4%EC%9A%B4%ED%8A%B8sa-%EC%83%9D%EC%84%B1-%ED%9B%84-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%88%98%EC%A4%80%EB%AA%A8%EB%93%A0-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%ED%8F%AC%ED%95%A8%EC%97%90%EC%84%9C-%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%9A%A9-%EC%9D%98-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%A3%BC%EA%B3%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8\">4. ì‹ ê·œ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸(SA) ìƒì„± í›„ í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€(ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í¬í•¨)ì—ì„œ ì½ê¸° ì „ìš© ì˜ ê¶Œí•œì„ ì£¼ê³  í…ŒìŠ¤íŠ¸</a></li>\n</ul>\n</div>","excerpt":"ê°€ì‹œë‹¤ë‹˜ ìŠ¤í„°ë”” : https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e  ë³¸ í¬ìŠ¤íŒ…ì€ ê°€ì‹œë‹¤ë‹˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ìŠ¤í„°ë”” ë‚´ìš©ê³¼ ì´ì •í›ˆë‹˜ì˜ \r\nì±…ì„ ì°¸ê³ í•˜ì—¬ í¬ìŠ¤íŒ…í•˜ì˜€ìŠµë‹ˆë‹¤. 7ì£¼ì°¨ Kubernetes ë³´ì•ˆ 1. Podì—ì„œ EC2 ë©”íƒ€ë°ì´í„°ì˜ IAM Role Token ì •ë³´ë¥¼ í™œìš©í•˜ì—¬(boto3), ìŠ¤í„°ë””ì—ì„œ ì†Œê°œí•œ ê²ƒ ì´ì™¸ì˜ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤(í˜¹ì€ Action)ë¥¼ ì‚¬ìš© í›„ ì½”ë“œ OR ìŠ¤ìƒ·  Nodeì— EC2 Full Access ê¶Œí•œ ë¶€ì—¬  EC2 Instances ê¶Œí•œ íšë“ ë° ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì¤‘\r\nì´ˆê¸°ì—ëŠ”\r\nec2client=boto3.client(â€˜ec2â€™) ë¼ê³  ì½”ë“œë¥¼ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\r\nê·¸ ê²°ê³¼ Moduleì„ ì°¾ì•„ì˜¤ì§€ ëª»í•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤..ã…œã…œ\r\nì—´ì‹¬íˆ êµ¬ê¸€ë§ í•´ë³¸ ê²°ê³¼ ë’¤ì— Regionì„ ë¶™ì—¬ì£¼ëŠ” ì˜ˆì‹œì½”ë“œë¥¼ ì°¾ì•„ì„œ ì ìš©í•´ë³¸ ê²°ê³¼ ì´ìŠˆê°€ ì—†ì´ ì˜ ì‘ë™í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\r\nì•„ì§ë„ ì™œ ë¦¬ì „ì„ â€¦","frontmatter":{"date":"March 04, 2023","title":"Gasida Kubernetes Study 7ì£¼ì°¨","categories":"Kubernetes","author":"KORWOO","emoji":"ğŸ”®"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_7/"}},"next":{"id":"0968b639-e024-57b2-b6d3-e882f78b7245","html":"<p>ê°€ì‹œë‹¤ë‹˜ ìŠ¤í„°ë”” : <a href=\"https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e\">https://www.notion.so/gasidaseo/23-7635cc4f02c04954a3260b317588113e</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG5S0peaL//xAAaEAACAgMAAAAAAAAAAAAAAAABAgARAxIT/9oACAEBAAEFAmvVOlzMxDB2uf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABECIxIf/aAAgBAQAGPwKulkko4zY//8QAGRABAQEAAwAAAAAAAAAAAAAAAREAECFB/9oACAEBAAE/IZKL4NR5KYcQ6znw/9oADAMBAAIAAwAAABD87//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EKf/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QcH//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhgRBR/9oACAEBAAE/EKsTlGXHSkUBFHmbMTEN53AhcAmj55//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"book.jpg\"\n        title=\"book.jpg\"\n        src=\"/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg\"\n        srcset=\"/static/ffca88658c8e7539216186bdb5832d9c/4ec73/book.jpg 180w,\n/static/ffca88658c8e7539216186bdb5832d9c/158ba/book.jpg 360w,\n/static/ffca88658c8e7539216186bdb5832d9c/80e3c/book.jpg 720w,\n/static/ffca88658c8e7539216186bdb5832d9c/47311/book.jpg 1080w,\n/static/ffca88658c8e7539216186bdb5832d9c/644c5/book.jpg 1440w,\n/static/ffca88658c8e7539216186bdb5832d9c/93719/book.jpg 4000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë³¸ í¬ìŠ¤íŒ…ì€ ê°€ì‹œë‹¤ë‹˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ìŠ¤í„°ë”” ë‚´ìš©ê³¼ ì´ì •í›ˆë‹˜ì˜ <code class=\"language-text\">24ë‹¨ê³„ ì‹¤ìŠµìœ¼ë¡œ ì •ë³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤</code>\r\nì±…ì„ ì°¸ê³ í•˜ì—¬ í¬ìŠ¤íŒ…í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h1 id=\"6ì£¼ì°¨-alert-manager-logging-system\" style=\"position:relative;\"><a href=\"#6%EC%A3%BC%EC%B0%A8-alert-manager-logging-system\" aria-label=\"6ì£¼ì°¨ alert manager logging system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6ì£¼ì°¨ Alert Manager Logging System</h1>\n<h2 id=\"1-alert-manager\" style=\"position:relative;\"><a href=\"#1-alert-manager\" aria-label=\"1 alert manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Alert Manager??</h2>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í•™ìŠµí•˜ë©° Prometheus, Grafana ë“±ì—ëŒ€í•´ì„œëŠ” í•œë²ˆì¯¤ì€ ë“¤ì–´ë´¤ì§€ë§Œ\r\nì†”ì§íˆ AlertManagerëŠ” ì²˜ìŒë“¤ì–´ë´¤ìŠµë‹ˆë‹¤..</p>\n<p>AlertManagerëŠ” Prometheusì˜ íŠ¹ì • ì„ê³„ê°’ì„ ë„˜ê±°ë‚˜ ë©”íŠ¸ë¦­ì˜ ë³€í™”ì— ëŒ€í•œ ì•Œë¦¼ì„ slack, email ë“±ìœ¼ë¡œ ì „ì†¡í•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ì¹œêµ¬ì…ë‹ˆë‹¤.</p>\n<p>ì‰½ê²Œìƒê°í•´ <code class=\"language-text\">Prometheus ì—ì„œì˜ ì•Œë¦¼ ì‹œìŠ¤í…œ ê¸°ëŠ¥ì„ AlertManagerë¡œ ë¶„ë¦¬ì‹œì¼°ë‹¤</code> ë¼ê³  ìƒê°í•´ì£¼ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ê°œì¸ì ìœ¼ë¡œ ì™œ ë¶„ë¦¬ë¥¼ ì‹œì¼œë‘ì—ˆëŠ”ì§€ ì˜ ì´í•´ê°€ ë˜ì§€ ì•Šë„¤ìš”..</p>\n<p>ì°¸ê³ ë¡œ Grafana v4.0 ì—ì„œ Alert ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆë‹¤ê³  í•˜ëŠ”ë° Alert Manager ì˜ ë¯¸ë˜ê°€ ì–´ë–»ê²Œ ë ì§€ëŠ” í•œë²ˆ ì§€ì¼œë´ì•¼ ë˜ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤..</p>\n<h2 id=\"2-ì‹¤ìŠµí™˜ê²½-ë°°í¬-ì¤‘-ì´ìŠˆ-ë°œìƒ\" style=\"position:relative;\"><a href=\"#2-%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD-%EB%B0%B0%ED%8F%AC-%EC%A4%91-%EC%9D%B4%EC%8A%88-%EB%B0%9C%EC%83%9D\" aria-label=\"2 ì‹¤ìŠµí™˜ê²½ ë°°í¬ ì¤‘ ì´ìŠˆ ë°œìƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ì‹¤ìŠµí™˜ê²½ ë°°í¬ ì¤‘ ì´ìŠˆ ë°œìƒ</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVQ4y52U147DMAwE/Zree0MSpDi9Acn//xgPQ2AN2efkgnsQSMnkaClKjkajkQ2HQxuPxzYYDNyfTCbu9/t9t9Vq1crlslUqFR/4eaNUKlnUbret1Wr5wGfU63XTeqPRsG636+BOp+N+rVazQqFgxWLRIfiCRovFwpMJBEDidDr1j6zPZjO3zWYzgbIJPjn4VJUAn8+n7fd7u16vbpfLpb1eLwdJNSUDYrAGXOpRiy+10fl8tt1u57Db7Wbz+dxOp5Pd73e7XC52OBz8O5bYOI59zoYoYxPU9no9txEBx+PRIdjtduvJKGYeApnjr1YrPxYGjVMTaWxEADB2FxD7eDx8jW/EsCbFxKCQISBquTGRgkkmYbPZ+JzygYUKBV+v14lCSpXCBBgqBEjyJyAxeSWngIKq5BBIwwTEl0JAKNSjSJWspkhhXlPelZwCsqPOjwS6jg2bIpia8lXJJCv425I/NuXTGYbH8q5klKaASsgqxEeVrhb+u5JTF5uEv5qil5LX5V8KBdVT/PdLoQQB816KVGWvTRaYlMxuKAnVkMzfJtsUNlSXSUYRfxvU6W/zA2HdF9J3ODVSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_3.png\"\n        title=\"img_3.png\"\n        src=\"/static/74dc5a4635285d50343f3d30d16a0da4/37523/img_3.png\"\n        srcset=\"/static/74dc5a4635285d50343f3d30d16a0da4/e9ff0/img_3.png 180w,\n/static/74dc5a4635285d50343f3d30d16a0da4/f21e7/img_3.png 360w,\n/static/74dc5a4635285d50343f3d30d16a0da4/37523/img_3.png 720w,\n/static/74dc5a4635285d50343f3d30d16a0da4/00172/img_3.png 1044w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVQoz41S2W6DQAzkMRyBBBKuUJYryyEQ8P8fN9FYWtQmldqH0R5ej2fHtnTT4asboKoavdaoqgphGCKKItxuN8RxjPv9LmfHcWDbtoB713Xhed6xEpaqFCpVSsL1esXj8RCSuq6Rpil835cYcblcpGCWZQiC4INMCIdhwLwsWJYFSimM44g8z7GuK57PpyRSMUHyeZ6x7zumaZLYB2FZlkiSRKpTIb/HZKrj2Tw8n8+yMkYrqPhXhVRGlW3bCkHf92iaRr5+Op1+PCboncF77CDctk1IeUF/jAJj/l8wjSIsqimKQvyidyRiU6iWqgkWoBUEYwTvTOHvMYskTCZMNwl6xjsmmaaYcSLM+T3P4hhordF13TFvbAjHxqih8f/5OvECiAjdw9pfT9oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/03cdbd361e8b15ed1d961b415dca03ff/37523/img_2.png\"\n        srcset=\"/static/03cdbd361e8b15ed1d961b415dca03ff/e9ff0/img_2.png 180w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/f21e7/img_2.png 360w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/37523/img_2.png 720w,\n/static/03cdbd361e8b15ed1d961b415dca03ff/22475/img_2.png 1039w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Rolling Update ìˆ˜í–‰ ì¤‘\r\nI0222 22:24:12.336747    8250 instancegroups.go:533] Cluster did not pass validation, will retry in â€30sâ€: InstanceGroup â€œnodes-ap-northeast-2aâ€ did not have enough nodes 0 vs 2.\r\nì˜ ì˜¤ë¥˜ë©”ì„¸ì§€ê°€ ë°˜ë³µì ìœ¼ë¡œ ì¶œë ¥ ë˜ë©´ì„œ Rolling Updateê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ë¡¤ë§ì—…ë°ì´íŠ¸ë£° ì¤‘ë‹¨í•˜ê³  kops validate cluster ë¥¼ í†µí•´ í™•ì¸í•´ ë³´ë‹ˆ Validation Errorê°€ ë°œìƒí•œ ìƒíƒœì´ë”êµ°ìš”..\r\nì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì— í•´ë‹¹í•˜ëŠ” EC2ëŠ” ì¬ìƒì´ ì •ìƒì ìœ¼ë¡œ ë˜ì—ˆìœ¼ë‚˜ ì›Œì»¤ë…¸ë“œ ì¬ìƒì„±ë˜í•œ ì§„í–‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\r\nê·¼ë° ë˜ ë…¸ë“œì˜ ìƒíƒœëŠ” ì •ìƒì ìœ¼ë¡œ í‘œì‹œê°€ ë˜ê³ \r\nPrometheus, Grafana ë“±ì—ì„œ ê°’ë“¤ì€ ì •ìƒì ìœ¼ë¡œ ë°›ì•„ì˜¤ë”êµ°ìš”..</p>\n<p>ìš”ì¦˜ í•«í•œ ChatGPTì—ê²Œ ìë¬¸ì„ êµ¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\r\nì²˜ìŒì—ëŠ” ì´ì¹œêµ¬ê°€ ì œ ì§ˆë¬¸ì„ ì´í•´ë¥¼ ëª»í•˜ê³  ì´ìƒí•œ ì†Œë¦¬ë§Œ í•´ì„œ ê³ ìƒì¢€ í–ˆìŠµë‹ˆë‹¤ë§Œâ€¦\r\nì •ë¦¬í•´ê°€ë©´ì„œ ì§ˆë¬¸ì„ ê³„ì† í•˜ë‹ˆ ì œë²• ìœ ìš©í•œ ë‹µë³€ì„ ì œê³µí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p>ì²«ë²ˆì§¸ëŠ” í´ëŸ¬ìŠ¤í„° ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œì´ê³ \r\në‘ë²ˆì¨°ëŠ” AWS ë¦¬ì†ŒìŠ¤ ì œí•œ ê´€ë ¨ ì´ìŠˆì…ë‹ˆë‹¤.</p>\n<p>AWS ë¦¬ì†ŒìŠ¤ ì œí•œì´ ì œì¼ í…ŒìŠ¤íŠ¸í•´ë³´ê¸° ì‰¬ìš°ë‹ˆ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAESElEQVRIx61WSW/bRhTWP2+BHOzUSW25kSLHsBMYtS+5pj20x6LLsa1ju2ktrxIpiuRwhttw/4r3SO1y7AIl8PENB8OPb97yDVtHJ+/x7vg9uvtH2O2+wc6rHrZ3u2zbr3rY7ezNoYdObx+dvUPs9t4yXh98i97hMd68PcHe4TFau919dPaPsNM9wMt2B89ftrGxtY3NrW08e/41vtyc4YuNF3j2oo2tdhdf7fSw1d7DzutDxjd777DdOUAL//PViqIYvh/AdQXiOEZRFMjzfAE0J4SHn37+DWfnf/FcmqYNMqRZhjwvEIQhWlprHtiugB9EyGhxVi/KsnpMc0r5+PjxHGfnF7DHNjxPwnFdeMKDlBJlWbJDLZ0k8IMAhmVh5LgQUsJTagp6VkEA2olhWjBGFgbGiGEYJgzLxshy2NtYa7TolqQpirJERq4XBW9xhhwFgNS6hPxuA+qHbagf25DfbyL8/QPSCsiLElVVIWIPmy3HsQZ5uwJNNkUcBoice0TOALFzj9i+R6zcZo1m7+oYJgmEELgfDBBFUR1wjt8ieK6okJVgmxLyYi45CcJJUlSUYByksGSIkReyXYbtx7C8ACPhT58dP2YrohQqLRFEzZZp4s7T+Gdoo28KXI0E+qbLdjIeejGGMsZAhGxNlcBUmq0VZnB0BT9qskxpt8Y2sqLk4qzWFGy1hLJqAECnGYOzPCkbz/M4uEWeo6pKBtVW2WSfbM1crdBXzVxNqDXCKMJ4bHNdUQETAX2Igr1MSC+voNnF1ENKt/J9tkRORRxQMTetSO01T7iOeIGQyExrzF1BJGEcT20QRfDDkAt/nnAa2xVCXdeP7/tc3PRizgJR1LbBZ7c8T0g3iuOk5UgIiJQWlc3icu6lddcKIcVtoh6u8JAklIyKiSeZLh4BrYkmakMx9KTkFqQSIhmiNoyaWD4F9A4lsq5DIhQubNvhDPM257xbFtyHQE7UvRynuJUp96nhKgwdiSFZV8EQPqQuuFdVUkImxQw6Z6ikmPVyojXcMMEfZohPdyZO+wOc3xi4uDVwdj3Exa2Jy6GNS8PB39TrhoMr08WtJXBlSfQthRsnwjgqZuJAHqq0wo0Toj/20bckru2AcUUY+4xPpsSQ1EhpjFSMka8Zhp/AjstFQiuuYAYZRJzDDjOMwxR2lMEOUx7zczNvBTXGjITHC4RUNlIquEIi1Om0FEjaZyiWbLlY+NWcOFAPu0LAcgRMV/EHCJPeTpqjYN4SJk1Bc5RlPvV4MkkW2mq+ZKay9cg1PaTWEeIBAXgMK4Rre/QzPfyghwQ+2Sa/FmnKavNfvCuXz+UwiqfJ8IP6ee05vfbspsRQEoNaD6VSGNs2DNNkSx4mTyCiNSnZvAIFLdBZLQ6kNI4QsB0Hjiug/IAVqLbr4LMqKaVgCwl5/SfkryeQt6cz+aJt15iQPQH0M6UCyJtTyF+Ooe7O8C/9WWw/kALwLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_10.png\"\n        title=\"img_10.png\"\n        src=\"/static/d0ef78edab26a8cc9b1b7384540d5de3/37523/img_10.png\"\n        srcset=\"/static/d0ef78edab26a8cc9b1b7384540d5de3/e9ff0/img_10.png 180w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/f21e7/img_10.png 360w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/37523/img_10.png 720w,\n/static/d0ef78edab26a8cc9b1b7384540d5de3/00d43/img_10.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><a href=\"https://support.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase&#x26;limitType=service-code-ec2-instances&#x26;serviceLimitIncreaseType=ec2-instances&#x26;type=service_limit_increase\">https://support.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase&#x26;limitType=service-code-ec2-instances&#x26;serviceLimitIncreaseType=ec2-instances&#x26;type=service_limit_increase</a></p>\n<p>ì¦ì„¤ ìš”ì²­ì€ ìœ„ì˜ ë§í¬ì—ì„œ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì¦ì„¤ ìš”ì²­ì„ í•˜ë©´ íŠ¹ë³„í•œ ì‚¬ìœ ê°€ ì—†ë‹¤ë©´ 10ë¶„ ì´ë‚´ë¡œ ë¹ ë¥´ê²Œ ì¦ì„¤ì´ ë ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ ì›ì¸ì€ ìì›ì´ ë¶€ì¡±í•´ì„œ ë°œìƒí•œ ì´ìŠˆê°€ ë§ì•˜ìŠµë‹ˆë‹¤ã…ã…</p>\n<h2 id=\"3-prometheus-grafana-alert-manager-ë°°í¬\" style=\"position:relative;\"><a href=\"#3-prometheus-grafana-alert-manager-%EB%B0%B0%ED%8F%AC\" aria-label=\"3 prometheus grafana alert manager ë°°í¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Prometheus, Grafana, Alert Manager ë°°í¬</h2>\n<p>ì‹¤ìŠµí™˜ê²½ì„ ì…‹íŒ…í•˜ëŠ” ê³¼ì •ì€ ì•ì˜ í¬ìŠ¤íŒ…ì—ì„œ ê³„ì†í•´ì„œ ë‹¤ë¤˜ìœ¼ë¯€ë¡œ ìƒëµí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë³¸ ë¦¬ì†ŒìŠ¤ë“¤ì€ Helmì„ ì´ìš©í•˜ì—¬ ë°°í¬í• ê²ƒì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create ns monitoring\r\nhelm repo <span class=\"token function\">add</span> prometheus-community https://prometheus-community.github.io/helm-charts</code></pre></div>\n<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ Namespace ë³€ê²½ ë° Helm Chartë¥¼ ë‹¤ìš´ë°›ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/monitor-values.yaml</span>\r\n\r\nalertmanager:\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - alertmanager.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\n\r\ngrafana:\r\n  defaultDashboardsTimezone: Asia/Seoul\r\n  adminPassword: prom-operator\r\n\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - grafana.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\nprometheus:\r\n  ingress:\r\n    enabled: true\r\n    ingressClassName: alb\r\n\r\n    annotations:\r\n      alb.ingress.kubernetes.io/scheme: internet-facing\r\n      alb.ingress.kubernetes.io/target-type: ip\r\n      alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\":443}, {\"HTTP\":80}]'\r\n      alb.ingress.kubernetes.io/certificate-arn: <span class=\"token variable\">$CERT_ARN</span>\r\n      alb.ingress.kubernetes.io/success-codes: 200-399\r\n      alb.ingress.kubernetes.io/group.name: \"monitoring\"\r\n\r\n    hosts:\r\n      - prometheus.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\r\n\r\n    paths:\r\n      - /*\r\n\r\n  prometheusSpec:\r\n    serviceMonitorSelectorNilUsesHelmValues: false\r\n    retention: 5d\r\n    retentionSize: \"10GiB\"\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> kube-prometheus-stack prometheus-community/kube-prometheus-stack --version <span class=\"token number\">45.0</span>.0 -f monitor-values.yaml --namespace monitoring\r\n</code></pre></div>\n<p>ë‹¤ìŒ ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ YAML íŒŒì¼ì„ ìƒì„±í•˜ê³  Helm Install ì„ ì§„í–‰í•´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ê°ê°ì˜ ì ‘ì† ì£¼ì†ŒëŠ”\r\nGrafana : grafana.ë³¸ì¸ë„ë©”ì¸\r\nPrometheus : Prometheus.ë³¸ì¸ë„ë©”ì¸\r\nAlertManager : alertmanager.ë³¸ì¸ë„ë©”ì¸</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADgElEQVQ4y42UWY/cRBSF/dMIKBnQJBCWCIkIEAghgeCB/8MryhviNS+AyEQkKJ2ZkDBr2+12t9t7ubxV2e7lQ+WeGSUhSLH06dx7yrbKVadsffPdD3z8yRfc/vRLbnx4m50bt3jn5i123vuIa7s32bn+AW+9/S5v7ty45Irh2nWu7Fznjau7XN19n8+//p7PvvoWa//0GXce/cydh3/y996PPLj/E3/98huTP+4xDyPOxg7PDo8Z286A6W3HZTqd4XlbTk/HHNk2x2Mba7lZI7Qk14pll6O1RJc1S6VYs0F3HbXStF0/oNuO5WrFerNhYwDWG9gsQsgLrELkRPMFSRASBRGhHxAuzvF9wrk/jCVhRLRYEAchtSyocrnF1LJAnYxpZz6WOrWJ7j8ge7RP+fQf1NEJ/ZlDd2bTDXqB/QrvOSYenTvDUmc20d4DxOiA6unh8FA/nrwGzgt1O57QOVOsuiiIg4A0isjimDSKSUNTJ4Nn+gs/i+Lh840vzseNJ9IMdfCU1p5gSSnxgwB/EZAJQd00VFVNWVaU1ZbKUNeDDl5ZUtfN5XjTKFayYFXVWNpxEaN9xOMDstE+2ejxsJbN8Qm947Kazli6Bu9cX9V7dNMZnTfHiudz5rMMbybxvBzHFUSBQERbylRQZ4LmOV7uG7FVledYc9/HjzKyUpEWDbJuyesWUWlkramUptEa9RKNVtTqRcx9VhAEOI5DksSkSUwhc2QuKAt5XucURYHIBLkQCEOWDV5TN9R1TVPXW20aLFkUw5Fypx4Td3p5vIzazgTbdvA8D3fiMp/NWSyCgdAEPYoGNZuklEKbGVZFjqokm1XLqtOsOsVm2bLuNate07YtsiwptB6OmZmZlAV937Ner1mZY7heUw+7X2E9dBrunvTsTWHPhXsu3J/C7xMYzRku5S9I7/5KP52RFSVRFA+faNbSvGS5XKGXS5q2xYqrNU7S4SQtbtoxSbbYSc8sa2n7JZ0saGwXlaRo85Mwm9KoAZNNrVuWccqqKLFUU5FlEblIkTJFZAl5lgwqREIUx0RpSpjnLJJtnwpBaPwkJTFjcUJzdErnB1jKniBGT8hGB4jHT6gPj1Enp0OoL7ENk61e9Jf+tr4MduR5OOOAs3GMbcfEfkISZBRJTpWeh/Z1uAj2IgyJMkmpOmSzDXNeaQqzPmad1H8D/H+YYP8Lne65pPri1SEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/073a7942fcbc372790fd916c5679db7f/37523/img.png\"\n        srcset=\"/static/073a7942fcbc372790fd916c5679db7f/e9ff0/img.png 180w,\n/static/073a7942fcbc372790fd916c5679db7f/f21e7/img.png 360w,\n/static/073a7942fcbc372790fd916c5679db7f/37523/img.png 720w,\n/static/073a7942fcbc372790fd916c5679db7f/d2c2a/img.png 929w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìœ„ì˜ í™”ë©´ì€ Prometheusì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  ìˆëŠ” í•­ëª©ë“¤ ì…ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVQ4y41UWa7bMAx89z9UL9AjtCgKFK8fzWJb+0JyClJ24iQOWgEMZcUacYYjf7TWUGuF8x6n8wXnyxWX64Tr9QofAlIuiCkj5my5lIyvPxf8OAVc5hnn2SGEhN9/PvF5+oUP7AYRofcOYkYlQWkMZgFEIGvo+PI94tu5ooogk+wh8LG9xMwotaKUYjlXQmlk67IDtANsyMO6hhb0AFhrMfoKStTHNnndyAdrG8YKKNDf1gnee9NOQRV8q+bdOATcFhRgWRYE7+GcQ4zRNGrEyJ3RWSwXUo1HbKA3wP2Cdty5UeHiHLJSZwYRo9PIGsz3+bb3EFA7HGJEUovEaPOYkkXSHBNKGRqnlMeBRDdA3X/XUIBGZEAKoPTvGr4f8sTwQUM9QQG1mpyzAXYBSMT02nJjMT37aqEHwP2CUpmmyRpznSbM84zZR/iYkGozPUsna9IW2BX0Aqh6eB+McgjRGqTdVitl0zCimxTFGJScjdU2DikP/xXL+twYRk2tQpr7sMutQsh7DVWzaZrvlNWTKZvhTUMeIH0XL4DPtlmcN3s4H2xuEsTRJJWhlrLaZljpkLKBsSB2RioVsVSkWm2uVEvraG+uocgBZX1JLaGddEG7GrH4YN2N61VTUP0oGOX/tU1r1boagjf9lKZVnAtCrkPDHVhjfgV8LnmaF9NOAW8xL3aQ2kgP4d11E/lHU/TDYB70oyGa9VmB7L/1Jm13+BnwL8UfIzge/kX9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/1c629872cc1247b23372c393e9d86cc3/37523/img_1.png\"\n        srcset=\"/static/1c629872cc1247b23372c393e9d86cc3/e9ff0/img_1.png 180w,\n/static/1c629872cc1247b23372c393e9d86cc3/f21e7/img_1.png 360w,\n/static/1c629872cc1247b23372c393e9d86cc3/37523/img_1.png 720w,\n/static/1c629872cc1247b23372c393e9d86cc3/f1901/img_1.png 942w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  ìˆëŠ” í•­ëª©ë“¤ì— ëŒ€í•´ì„œ alertmanager ë˜í•œ ë™ì¼í•˜ê²Œ í‘œì‹œí•´ì£¼ê³  ìˆëŠ”ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>##4. Slackìœ¼ë¡œ WebHook ë‚ ë ¤ë³´ê¸°</p>\n<p>ì´ì œ Slack ìœ¼ë¡œ WebHookì„ ë‚ ë ¤ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">https://hooks.slack.com/services/blabla/blabla/blabla\r\n<span class=\"token assign-left variable\">WEBHOOK</span><span class=\"token operator\">=</span><span class=\"token string\">'https://hooks.slack.com/services/blabla/blabla/blabla'</span>\r\n\r\n<span class=\"token function\">curl</span> -X POST --data-urlencode <span class=\"token string\">\"payload={<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>channel<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>#webhook<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>username<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>pkosbot<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>text<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$KOPS_CLUSTER_NAME</span> ë‹¤ìŒì£¼ ì¢…ê°•! - ë´‡ ì œê³µ<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>}\"</span> <span class=\"token variable\">$WEBHOOK</span>\r\n<span class=\"token function\">curl</span> -X POST --data-urlencode <span class=\"token string\">\"payload={<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>channel<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>#webhook<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>username<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>pkosbot<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>text<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$KOPS_CLUSTER_NAME</span> ë‹¤ìŒì£¼ ì¢…ê°•! - ë´‡ ì œê³µ<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>icon_emoji<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>:ghost:<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>}\"</span> <span class=\"token variable\">$WEBHOOK</span>\r\n</code></pre></div>\n<p>ê°€ì‹œë‹¤ë‹˜ì˜ ìŠ¤í„°ë””ì±„ë„ì˜ ë¯¸ë¦¬ êµ¬ì„±ëœ WebHook ì±„ë„ì— WebHookì„ ë‚ ë ¤ë³´ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.\r\nWebHook URLì€ ë³¸ì¸ì˜ Slack ì±„ë„ì˜ WebHook URLì„ ì…ë ¥í•´ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQY06WPW26CUBBAWVVX2K8uodvoZ38t1cTaaPGJKBIvIiCIolzgwmm4id1AJzmZx8eZGaNSitvkG5We8TyPXs9k0B/QN/vMF0u8nUsUhgRBQBzHRFFEXddIKVF1jVJK0/VFUWDIJCF+eaJ4e0b4CePJFGs6ZzZf4XoC/xDoRbZt/+Xj8cgtvyKEj9gLhBDcbnctNWR2JrNeke470enOZh+x9RO8Q8LKC9mKEGdtY5ofOM6GyXiMZVmkyUnLrR+L4fCLyzWn7IRN29KApiwrCllqpK4r7oUkz3PSNCXLMs0ly6irStdp0s0v1ErRNA0GQNuqLhGnOfYuZL2Pcf3uwggvOLHdOHz2TdzdTl+4WCz1y2vHYWbNGH2NKKtaO4y2bXnwn3g4fgFp1cJRcCNNxgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_4.png\"\n        title=\"img_4.png\"\n        src=\"/static/1b58b5b6000b0115371ffa00902a9924/e4a3f/img_4.png\"\n        srcset=\"/static/1b58b5b6000b0115371ffa00902a9924/e9ff0/img_4.png 180w,\n/static/1b58b5b6000b0115371ffa00902a9924/e4a3f/img_4.png 295w\"\n        sizes=\"(max-width: 295px) 100vw, 295px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>WebHookì´ ì •ìƒì ìœ¼ë¡œ ë‚ ë¼ê°€ëŠ”êµ°ìš”!!</p>\n<p>ë‹¤ìŒ Alert Managerì— WebHook URL ì •ë³´ë¥¼ ë°˜ì˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/alertmanager-slack.yaml</span>\r\nalertmanager:\r\n  config:\r\n    global:\r\n      resolve_timeout: 5m\r\n      slack_api_url: 'https://hooks.slack.com/services/blabla/blabla/blabla'\r\n    route:\r\n      group_by: ['job']  # namespace\r\n      group_wait: 10s\r\n      group_interval: 1m\r\n      repeat_interval: 5m\r\n      receiver: 'slack-notifications'\r\n      routes:\r\n      - receiver: 'slack-notifications'\r\n        matchers:\r\n          - alertname =~ \"InfoInhibitor|Watchdog\"\r\n    receivers:\r\n    - name: 'slack-notifications'\r\n      slack_configs:\r\n      - channel: '#webhook'\r\n        send_resolved: true\r\n        title: '[{{.Status | toUpper}}] {{ .CommonLabels.alertname }}'\r\n        text: |\r\n          *Description:* {{ .CommonAnnotations.description }}\r\nEOT</span>\r\n\r\nhelm upgrade kube-prometheus-stack prometheus-community/kube-prometheus-stack --version <span class=\"token number\">45.0</span>.0 --reuse-values -f alertmanager-slack.yaml --namespace monitoring\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 471px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVQ4y52UyY7bOBRF6///o7f9FUEWvWmgy1WeB1mcRVqyJVuT7dMgnbjSFWSRJvDAJ5G8vO/yki/d2xfa+V9MF2smkymTyRtv7+846zgeK8qy5HK5ENv9fufZfsxju924dT0v7fuf1F//QMx2/L1U/LMQTLeaWeZ4XWt81cTV3G63BPi9/55fr9eP/8BLBO9CSTGbstplrFZLNtsdUmqUNriiQCmFLRxaKXzhE3vvHNZZjDYUzqOlom7qb4DW4OdzslyyzzK22w35Psc5i5SKPMuQQtB1LeM4MgzDMyLDcRjp+z6NfQO0hOUS44oEVFibAIwxeOcxWuOtRSuNLwJlCFhjcbZAa80hHFLvnHsAtsZQrlco6xB7gRCC9XpNe2kfDK4frLque+Tjg1X8btsuachTw8RwjjIWkQu0lhhrWS1XZFlG4QuKwlF4T1VWFFHD4AmFRymJ1ZamOX8AtglwgTE2iSuVxCiFkBKR5wR/4Hy50DQNfRdZ9bRtm9il6PvENrJ8MvSLOUIppBRoYxNg3D3qdqoqQghJo8gwhAOHsuQQtbTukZeHJM9Tw2ibvRDssxwhJJvtht12gxQyLThHdn3P6XSirmvqpuGTtT9KHuuaNgRCWeFckUo8nY40dcP5XGOt5eA9p+MpWSky9SHQD0O6MfcfIgEOwWNXG2ayYiVLhDsx3wdm+4LcHfmd9tTQTd9ZbncsFjNW6zVK6RRaG6RWKC1T+UortFYIkaONRluNzHOUkMlKTw3DbEqudZr8OJiHUePNkVLivUdIlUwefWrjWJ6z3+dJknAIHwyHquIUJ1nD0Hc/vyy/W/IYnymp2RVntubIcL3/B/T+SfjPm/10KPFxUK+vTJZbJtNFem36fvgl2K/iyfA2joxtS3u5cDk3yWfRpP+n9H8BlVBeh68OXYcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_5.png\"\n        title=\"img_5.png\"\n        src=\"/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/1f09d/img_5.png\"\n        srcset=\"/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/e9ff0/img_5.png 180w,\n/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/f21e7/img_5.png 360w,\n/static/fd1ebdd0d7e56d6a77bbe3bd6bef6767/1f09d/img_5.png 471w\"\n        sizes=\"(max-width: 471px) 100vw, 471px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Slack ì—ì„œ ìœ„ì— Prometheusì—ì„œ í™•ì¸í–ˆë˜ ì˜¤ë¥˜ì— ê´€í•œ ë‚´ìš©ì´ ì „ì†¡ëœê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\nroute.repeat_interval ì´ 5mìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì´ìŠˆë¥¼ í•´ê²°í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ 5ë¶„ë§ˆë‹¤ ê°™ì€ ë©”ì„¸ì§€ë¥¼ ê³„ì† ë‚ ë ¤ì¤„ê²ƒì…ë‹ˆë‹¤.\r\n5ë¶„ë§ˆë‹¤ ì´ìŠˆ í•´ê²°í•˜ë¼ê³  ë– ë“¤ì–´ëŒ„ë‹¤ê³  ìƒê°í•˜ë©´ ê½¤ë‚˜ ì”¨ë„ëŸ¬ìš¸ê±° ê°™êµ°ìš”\r\nAlertManagerì—ì„œ silence ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB40lEQVQ4y5WUz47UMAzG5/1fgQsvwoUz4r4HVishjZDYmTbNf8fJhz6nXTosHMjIcpI2v/izPb3UWpFzhg8Bt/sdr7c7ltXhdl/gtg2pFKRckAut7n7OY8pYnLOzKWa8XJ9xwT7GGBBpZjFmiKjNaxUzHgghIqWMFBNKishp7uVcDwwuBPGnqiilmK2rg1SBiOzAhhiS7edcsLiIb9cFPibcF4cQEyNCH30CjwhbawYhXFpHFkXTjjE65sVzfF8EH79sWIvCSUdRPhlkPgKrCEqpKLWiSEcoCtFut4+T2Un8Xvc+L3yTfAC7qj2cL/QjuQ+wPga0E/K4/wdwhtssjxkxRpNO+59B1uWQQKw0RfAeG9slRYQQTDIjomdUL77g62vE81bQqOak0IDHgoNFIYytQM9IK4EDqH2q+PzD48PTT3y6bnaRnoAm+bxgdZ3bsHkPt3nzbHoa24l+SAWGAq3aHv8Y5zpczgllMfgCjfkru69y6knOm77tMYh3wKMooooYApxbUfIszhh/Sf4/CvJOMnPovTcQPYsSGZV2ZEalHdIHoqjlL7dZsAfgWTLDX52z3LEonNt680g52/PW1NpLd+P6QfKZzhzGlOxw2iWnlGyPFuL8ODB39pGwghU7dwB/ARPJmN7hBV+TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_6.png\"\n        title=\"img_6.png\"\n        src=\"/static/bce9e6da9cd67e530c54a0d8233cb743/37523/img_6.png\"\n        srcset=\"/static/bce9e6da9cd67e530c54a0d8233cb743/e9ff0/img_6.png 180w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/f21e7/img_6.png 360w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/37523/img_6.png 720w,\n/static/bce9e6da9cd67e530c54a0d8233cb743/d9217/img_6.png 904w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\nAlertManagerì— ì ‘ì†í•˜ì…”ì„œ ì˜¤ë¥˜ë¥¼ ë³´ì‹œë©´ ì˜†ì— Silence ë©”ë‰´ê°€ ìˆìŠµë‹ˆë‹¤. ì ‘ì†í•´ ì¤ì‹œë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeUlEQVQ4y5VVS27bMBD1vXqwrrrMqmfoFZorZFmkaNGlWyAwECdOU8cSKYmf4Qz5iqEkx0ldJ6HxxI+k0ZvPGy+stVgul7jdbLBeX2P58xeurq4wOAcdpRToD3otp6FjkXNGCAFEhESEECKC99DzJ6PgxaFGF847tKatLKQIcsnIKHWWLNBdiAE3mw1614/PZfkHe4YpJzS2Qdu1dd42D3VNQkiS0FGHkAI6141nmeo83te9PmOr0WpQGQ5uqBtlVSZ2h9Cvy7SWrPvH9Yw9Q08e22YLO1iY3mBnGpjegiRVhn3qEFjgU0FIBcQFzcAwXuo6cMFAanQyqIw4M4gTiAkxUZ01nspKXeOsc0GaEFKumPdqOM8MhRneOaSUoGtOCcwMSlzPXpPdJ1n2IeD67jf+tBY72+O+MTDWYmgbeDfsY/O8gspco2Vkt48hF8Ckgl0UNFGwjRk2MoLziOqeZAQe4TkjckYmQtFEHGNIMhpoI6MnQRcIxhNM5Hqu6IjRTeuBGOIcMnM1oh9YNQksM8NcHl8mQVKVhFEpZUI+wOyiVCUV3NmEjxc7mCBzlsd45INYaHKc83DOVSkOUWAcow9yVMP5uZbVwFuyeTLLqtP15gY+hlr9WpPHtMoTjt2LEuu7Yx0WQec7eApVl7NO3wLV+95gljy2Lk5Vxy/1vP/1wacu366xa3dVburyW6GeHbQvrv1ORKZel8EylYieTaVyCkMaHttXDWyRPbvDIRO065xiGDnuO/wiTx0lMmnfwffVA86/3WK1XMFffgH9uZ/ik18XQ/XfBIMH14Ax4OzzD7w7u8D5p3NsP7yH/Xo5Pvz8P+ZIDSrDv5THvHUyfkVXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_7.png\"\n        title=\"img_7.png\"\n        src=\"/static/d61f74d84f07a39ce318afeb2a826465/37523/img_7.png\"\n        srcset=\"/static/d61f74d84f07a39ce318afeb2a826465/e9ff0/img_7.png 180w,\n/static/d61f74d84f07a39ce318afeb2a826465/f21e7/img_7.png 360w,\n/static/d61f74d84f07a39ce318afeb2a826465/37523/img_7.png 720w,\n/static/d61f74d84f07a39ce318afeb2a826465/898f6/img_7.png 798w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Durationì€ ì–¼ë§ˆë‚˜ silenceë¥¼ ì§€ì •í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ê²ƒì…ë‹ˆë‹¤. ì‹œê°„ê³¼ Creator,  Comment ë¥¼ ì…ë ¥í•´ì£¼ì‹œê³  Create í•˜ë©´\r\nì´ ì´ìŠˆì— ëŒ€í•´ì„œëŠ” ì§€ì •í•œ ì‹œê°„ë™ì•ˆ ì¡°ìš©íˆ í•˜ê³  ìˆì„ê²ƒì…ë‹ˆë‹¤ã…ã…</p>\n<p>ê³„ì† ì´ì–´ì„œ Prometheusì—ì„œ ê°ì§€ë˜ëŠ” ì´ìŠˆì¤‘ì— kube-controller-manager, kube-scheduler ì— ëŒ€í•´ì„œ ìì„¸íˆ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get svc,ep -n kube-system kube-prometheus-stack-kube-controller-manager\r\nkubectl describe svc -n kube-system kube-prometheus-stack-kube-controller-manager</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABp0lEQVQ4y5WTWY+iUBCFeepWXEBREFTwstgajeIS//8/q85XSRFm2vRkHk5u3VvUqVML3perJSmPkqaZVGUpeZ7Ler2W3W7X2WC73cpms1Gbd/PzbkiSRDxXOlkuIlkulzKfzxVRFHX2YrGQ2WymRNzjOJaiKCQIAiUlCf66rtXnwRoGgZLg6MNIwzDUO0mxJ5OJDIdDmU6nMhqNxPd99ZPEc9tC1q6RvCikLEvNiHxU2Glvl8tF703TqHIUcZKIk+ReU9WS5U7iOJGmqaWqKu2NEWL3e4lCqjFYFVaJl2WZfH5+SBTN5fl8yuv1ksPhoD3Z7/cKbIAyVA0Gg67UPnjzxuOx+P5Is7XtVdq2ldPpJLfbTXG/3+V4POoAAN8RTNw7eJaJDx+Phyo8n8+qDEWcq9WqC+B7O83+g5C6MegBTQcoRBVk9BQfEwRM+B1RR0jDjRCFlHy9XrVcbEBPIWfaCPiV0DmnJbGPqCPQ1NhE2bd+4/ul/yDUxQ5DJUUJwUZGeX2Sv/v4lpBd6/eQ/UNVmqa6/f9DpoRMlF0EENpvBf5V3jvCb6OnYBVc1S0uAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_8.png\"\n        title=\"img_8.png\"\n        src=\"/static/cca9114acd3db90304de63857d154182/37523/img_8.png\"\n        srcset=\"/static/cca9114acd3db90304de63857d154182/e9ff0/img_8.png 180w,\n/static/cca9114acd3db90304de63857d154182/f21e7/img_8.png 360w,\n/static/cca9114acd3db90304de63857d154182/37523/img_8.png 720w,\n/static/cca9114acd3db90304de63857d154182/2e694/img_8.png 1048w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Prometheusê°€ kube-controller-manager ì— ì ‘ê·¼ì„ í•  ë•Œì—ëŠ” Cluster IPë¡œ ì ‘ì†ì„ í•˜ëŠ”ë° ìœ„ í™”ë©´ì—ì„œ ë³´ì‹œë©´\r\nEndPointê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ì´ìŠˆ ì…ë‹ˆë‹¤.</p>\n<p>í•´ê²°í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl label <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod -n kube-system -l k8s-app<span class=\"token operator\">=</span>kube-controller-manager -oname<span class=\"token variable\">)</span></span> -n kube-system <span class=\"token assign-left variable\">component</span><span class=\"token operator\">=</span>kube-controller-manager\r\n\r\nkubectl label <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod -n kube-system -l k8s-app<span class=\"token operator\">=</span>kube-scheduler -oname<span class=\"token variable\">)</span></span> -n kube-system <span class=\"token assign-left variable\">component</span><span class=\"token operator\">=</span>kube-scheduler\r\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPUlEQVQ4y63NWU8TURjG8fl+akIxFAFJ9EJvTEgMiRd+HI1BFodigahRMcY1bC5QaMHS0tLOdJZzZjqdrTB/01aw6gWa+CS/vM8755yM8vzlK54+e0F26QlTsypTMyrTc/NdM48yZLJLzD/+k7qwyMNZlVk1g5pZ5N70A+ayKsrE5B2Gxq8xev0Gw2PjpNIjDFweYXBojFR6jIGhUS6m0lxMDfdJd10avMKFVJrU8FUmJu9y89ZtFLMleFP/yEqpiFFcpn74Fn0tT1Kt0kkYRjiuRxTF3R4EIe32Mf0Jg5Cm7+P5PoofhpjSxnQcLGHRMA0sS2ALgS0lpi0wbBtL9LotZPeh67XwWj7NVosgjgm2doiqNRTfsjEOytiVKqKmIWsart7A0fQzzYaBZ5jd3jIs2m6TWDrE0iV23N5e12hbNoqf30dbeY31fhVn/VPvTzsFolyeKHc6fwpzeYKtXYLtH0575+7+AUp4VEN83cbdLdDaLxIfVn9V6Ztnjmj36ZxHpTLxUQ3F80MM4WAKF0s2Mexe102BbtoYlqRhCTTD6k7DlphCds87u25KXNdEfLtP6OygRG4JUV9Haps42iayvoHb+IJn5QhEnsjZI3L3CGWBQBZ6u7PX7b1vedpeEYIySXiE0pYb2AcqspxFlBawixncyjKBvsKxeAfeGjRXz5U4H8D7jHISmUTNQ2KvQtTR6a0qx0Gdk1AniRsk0TniBnTuxRYK5yTh36IkSUKSnPwmOUPf/BsK/znfAQAf+JyXuoRqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_9.png\"\n        title=\"img_9.png\"\n        src=\"/static/9aa0d1b9f719d2e3095ee9dcd1d76727/37523/img_9.png\"\n        srcset=\"/static/9aa0d1b9f719d2e3095ee9dcd1d76727/e9ff0/img_9.png 180w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/f21e7/img_9.png 360w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/37523/img_9.png 720w,\n/static/9aa0d1b9f719d2e3095ee9dcd1d76727/9b379/img_9.png 951w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Prometheus ì—ì„œ í•´ë‹¹ ì´ìŠˆê°€ ì—†ì–´ì§„ ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ë²ˆì—ëŠ” ê³ ì˜ì ìœ¼ë¡œ ì‹œìŠ¤í…œì— ì´ìŠˆë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\r\në…¸ë“œë¥¼ í•˜ë‚˜ ì¶”ê°€í•´ì£¼ê³  ê·¸ ë…¸ë“œë¥¼ ë‹¤ìš´ì‹œì¼œë³´ê² ìŠµë‹ˆë‹¤.\r\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ ë…¸ë“œë¥¼ 1ê°œ ì¶”ê°€í•´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> kops edit ig nodes-ap-northeast-2a --set spec.minSize<span class=\"token operator\">=</span><span class=\"token number\">2</span> --set spec.maxSize<span class=\"token operator\">=</span><span class=\"token number\">2</span>\r\n kops update cluster --yes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">3</span> <span class=\"token operator\">&amp;&amp;</span> kops rolling-update cluster</code></pre></div>\n<p>ë‹¤ìŒ AWS Consoleì— ì ‘ì†í•´ë³´ì‹œë©´ ì§€ì—­ì´ ap-norrheast-2aì— í•´ë‹¹í•˜ëŠ” EC2ê°€ 2ê°œë¡œ ì¦ê°€ë˜ì–´ìˆëŠ”ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì‹ ê·œ ìƒì„±ëœ Nodeì— ì ‘ì†í•˜ì—¬ Kubeletì„ Downì‹œì¼œ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">WNODE3</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>ì‹ ê·œìƒì„±ëœ Worker Nodeì˜ Public IP<span class=\"token operator\">></span>\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">hostname</span>\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">sudo</span> systemctl stop kubelet\r\n<span class=\"token function\">ssh</span> -i ~/.ssh/id_rsa ubuntu@<span class=\"token variable\">$WNODE3</span> <span class=\"token function\">sudo</span> systemctl status kubelet</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVQ4y5WTW2vcRhiG9ccaSNI0SUkCuXCgaSGlEHLX/1L6E3pb4hyg9KYXTuy49tbe7Np7kHat3bXjPWikGWl11nr1FI2d1N1CWw88PK+++UagT4zRt23apsl+44CdWo3aXp0/9urs1xs0Dlp0zJ6m3bX+wf77pu5ptU3e7myyXd/GePrsex6tPeGrx0+49eAbbt9f49bDNW7ee8j1L+5x484Drn3+5QV3tT+7eVdzrfKNO1y/fZ+vv3vG42+fYrw5/J2fdp6zvv2O9taPvHn7C/Wff8XerzM6HdPpWjQP23RMS9PumPT6R9iD4Se6Vh/THtPtDTCCLOQ4GDPxfbKgj1IO0ViwiGLOlkviJCWKE/K8IMtyzXJZasqypATOiph8vEmZfMAIfB/lSnwlceUc1/MQ0sNxXRxnphHCQUqPmTNDKUmSxERRSByFJGlK5I6ZvfiBdHKIUag60XSD3Ntl4e9B1IS4BfEhJK2/8mWigxWqXhOSHsa81WSytYF6v0fYalLYFoXd0yxWKFZycWSdU+XBiOKk+mQhcU4meBOBmrqomYeaetpy6mrUR+ua0A6EYu4qAuETuR5B7zXx6W41wwnCGeCKY1wxQsyGeO4JnjhByTHSO9X4akIQTHWtynnmU+SBZlH4FEGTRWxjLIIGibNFKrZJnHeaapZl2ITchNy68ApZF9LuuZMOZEeQjTCCMMaTAcoPNZ6q/rSPK32EK3GExPWUdvWs9zyFcJXOlcMwYD5aJ3Z2MCI1RM46+I6JLywCt08obSI1IPKH2rE/ouoL5d/zRxfxKYuwx1l8jJE6G6jBOmr4En/0inT2G2dyE6IahLUL7557NV+u6d4mRh5YhE6d2DsgEg1S1aaYW5Tp8AqMKNMBZfYBg39ZJVdfhr6P5fIS5Se45P+LwRUP/NcL/wQL7tog9BUKkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_11.png\"\n        title=\"img_11.png\"\n        src=\"/static/bea63bcc1edbef420fb754915a1924f2/37523/img_11.png\"\n        srcset=\"/static/bea63bcc1edbef420fb754915a1924f2/e9ff0/img_11.png 180w,\n/static/bea63bcc1edbef420fb754915a1924f2/f21e7/img_11.png 360w,\n/static/bea63bcc1edbef420fb754915a1924f2/37523/img_11.png 720w,\n/static/bea63bcc1edbef420fb754915a1924f2/f79fa/img_11.png 940w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>kubeletì„ Downì‹œí‚¤ë©´ ì²˜ìŒ Prometheus ì—ì„œëŠ” Pending ìƒíƒœë¡œ í‘œì‹œê°€ ë©ë‹ˆë‹¤.\r\nì´í›„ 10ë¶„ì´ ì§€ë‚˜ë©´ Firing ìƒíƒœë¡œ ë³€í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>kubectl get prometheusrules -n monitoring -o json | grep TargetDown -B1 -A11 ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ì•„ë˜ì— í•´ë‹¹í•´ë‹¹ ë‚´ìš©ì´ ë‚˜ì˜¤ëŠ”ë°\r\nì•„ë˜ì— ì •ì˜ë˜ì–´ìˆëŠ” ê·œì¹™ìœ¼ë¡œ ì¸í•˜ì—¬ 10ë¶„ ë’¤ Firing ìƒíƒœë¡œ ë³€í•˜ê²Œë˜ëŠ” ì›ë¦¬ ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\r\n                                <span class=\"token string\">\"alert\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"TargetDown\"</span>,\r\n                                <span class=\"token string\">\"annotations\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\r\n                                    <span class=\"token string\">\"description\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"{{ printf <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>%.4g<span class=\"token entity\" title=\"\\&quot;\">\\\"</span> <span class=\"token variable\">$value</span> }}% of the {{ <span class=\"token variable\">$labels</span>.job }}/{{ <span class=\"token variable\">$labels</span>.service }} targets in {{ <span class=\"token variable\">$labels</span>.namespace }} namespace are down.\"</span>,\r\n                                    <span class=\"token string\">\"runbook_url\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"https://runbooks.prometheus-operator.dev/runbooks/general/targetdown\"</span>,\r\n                                    <span class=\"token string\">\"summary\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"One or more targets are unreachable.\"</span>\r\n                                <span class=\"token punctuation\">}</span>,\r\n                                <span class=\"token string\">\"expr\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"100 * (count(up == 0) BY (job, namespace, service) / count(up) BY (job, namespace, service)) <span class=\"token entity\" title=\"\\u003e\">\\u003e</span> 10\"</span>,\r\n                                <span class=\"token string\">\"for\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"10m\"</span>,\r\n                                <span class=\"token string\">\"labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\r\n                                    <span class=\"token string\">\"severity\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"warning\"</span>\r\n                                <span class=\"token punctuation\">}</span>\r\n                            <span class=\"token punctuation\">}</span>,</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 475px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrElEQVQ4y12T6W4bOwyF/f7/+h59iAL90V6gTRw3cRxvs0qafdPsXr5CshP0RgBBUjM6OiIPF0PgMLlv7LYHNqtnDpsN2/WaKAip0pQ8jqmynLHtGNrO+rbRZFlG0zSUZYnWDY3WzPPMQj98pf32hePThu+/1nz775mfj688rh1+vTj82QXUjWY+zUzTxDRP1pvDNv/H+r5nMc4Tg67wf/xg+bLhYbXmYfXC685htd6x3h8JRIDvufieh+97iFAgZIjnuoR+gJSSIAgZhoHFME70jUYtl3juAcc54B0PuM6BVEkbe57LbrfDPTrsd3u22x3H4/HDwiBEa30DPF8unMaROhSEaYNIa6K8QSQVKm+odc/F/HM6W3+5nDmdTpzO7/nNzLperixsMI6o3w+8HkNe9j7rvc8hSHhzJFFW0nUdbddSVTVN3Vg2piFVXVNXNyuK4lZDA3gZR+LlEtd17FOd4x4ZhqRxTJLE+L6PktICtrqla1t0o9FtS6u13TO5acwHYPL0hFKxLa4ptAGQUuF7AYHnIXyfJEkss7qsqMqKsqgoy8KyNgzrur4BnoeB7PkPKo7xXZ84ivA8j6qqmKeJtm2ZxpHOaHEYGPrBsmzbjq5r6U3edbYUHwzT1RNRkhL4IUIIvDujIi9odGOFnBc5ZVGSpRlVXVHkOZEpS5xYULP+ByiFRAplNZalCYeDkZFrD5j6jOPIPM2Mw8hoxDyOln3f9bbznwBX9qmBEJZhJBXqHqdJShwpyyZLMrI8tyyTNCNNU8qqoigLC/pPlx8RUhKGAqUihBR2MmQo6brejpph+D5272ZyA2Ti6/Wuw7MR9vaNUEhc10UE0o5YrBRxfJNNpJStn1Lm0pAoiS3Y53UT9vXK9ZPyjdn969Xefr5/N94wes8/zt/tL5FkbXGhpUh/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_12.png\"\n        title=\"img_12.png\"\n        src=\"/static/ff8803f6f187dba48491e83329d9c6dd/466da/img_12.png\"\n        srcset=\"/static/ff8803f6f187dba48491e83329d9c6dd/e9ff0/img_12.png 180w,\n/static/ff8803f6f187dba48491e83329d9c6dd/f21e7/img_12.png 360w,\n/static/ff8803f6f187dba48491e83329d9c6dd/466da/img_12.png 475w\"\n        sizes=\"(max-width: 475px) 100vw, 475px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\nì´í›„ WebHook ì—ì„œë„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>\n<p>##5. PLG Stack</p>\n<p>PLG(<code class=\"language-text\">P</code>romtail, <code class=\"language-text\">L</code>oki, <code class=\"language-text\">G</code>rafana) ì— ëŒ€í•´ì„œ ì‹¤ìŠµí•´ë³´ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.\r\nPLGëŠ” ìœ„ì˜ 3ê°€ì§€ì˜ ìš”ì†Œë¥¼ ë¬¶ì–´ ì—¬ëŸ¬ íŒŒë“œì˜ ë¡œê·¸ë¥¼ ì¤‘ì•™ ì„œë²„ì— ì €ì¥í•˜ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.\r\n(<a href=\"https://www.infracloud.io/blogs/logging-in-kubernetes-efk-vs-plg-stack/\">https://www.infracloud.io/blogs/logging-in-kubernetes-efk-vs-plg-stack/</a>)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQY03WQYU7DMBSDe//rwA12Bv4UFoFCMtqq0FZtmqQv+dA6sWUILFnye/5ju5qmiQsyP8j5pstf/scrUWmtdyEpscWANGq/U0oXiiApg3j4PF49yZDXmdho5sWxLDPrulK1bUuMkRA88+JZXx6Q6YkQBe89IQSGcaRrPuieH+m7N/r+i7Al0mhx6sCrNtR1jVKKyhhzF3kcTgz9+91PZMNYu9Nag3Pu10hF5XPM60Y74dzwdv+9WemX/Aau/oYWnw2zhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_13.png\"\n        title=\"img_13.png\"\n        src=\"/static/00ec095fa88635df71bb1a3792c541cd/4597d/img_13.png\"\n        srcset=\"/static/00ec095fa88635df71bb1a3792c541cd/e9ff0/img_13.png 180w,\n/static/00ec095fa88635df71bb1a3792c541cd/f21e7/img_13.png 360w,\n/static/00ec095fa88635df71bb1a3792c541cd/4597d/img_13.png 631w\"\n        sizes=\"(max-width: 631px) 100vw, 631px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Promtailì€ ë¡œê·¸ë¥¼ ë¡œì»¬ ì‹œìŠ¤í…œì—ì„œ Lokië¡œ ì „ì†¡í•˜ëŠ” ì—ì´ì „íŠ¸ ì…ë‹ˆë‹¤.\r\nLokiëŠ” Promtailë¡œ ë¶€í„° ë¡œê·¸ë¥¼ ë°›ì•„ ì´ê²ƒì„ ì €ì¥í•˜ê³  ë¶„ì„í•˜ëŠ”ë° ì í•©í•©ë‹ˆë‹¤.\r\nGrfanaëŠ” Lokiì—ì„œ ë¡œê·¸ë¥¼ ê°€ì ¸ì™€ì„œ ì´ê²ƒì„ ì‹œê°í™” í•´ì£¼ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì € ì‹¤ìŠµì„ ìœ„í•œ Nginxë¥¼ ì„¤ì¹˜í•´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">helm repo <span class=\"token function\">add</span> bitnami https://charts.bitnami.com/bitnami\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/nginx-values.yaml</span>\r\nmetrics:\r\n  enabled: true\r\n\r\n  service:\r\n    port: 9113\r\n\r\n  serviceMonitor:\r\n    enabled: true\r\n    namespace: monitoring\r\n    interval: 10s\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> nginx bitnami/nginx --version <span class=\"token number\">13.2</span>.27 -f nginx-values.yaml\r\n\r\n<span class=\"token comment\">#CLBì— EnternalDNSë¡œ ë„ë©”ì¸ì„ ì—°ê²°í•´ì£¼ê¸°</span>\r\nkubectl annotate <span class=\"token function\">service</span> nginx <span class=\"token string\">\"external-dns.alpha.kubernetes.io/hostname=nginx.<span class=\"token variable\">$KOPS_CLUSTER_NAME</span>\"</span>\r\n</code></pre></div>\n<p>ê·¸ë ‡ë‹¤ë©´ Loki, Promtailë¥¼ ì„¤ì¹˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\r\n<span class=\"token comment\">#Loki ìƒì„±</span>\r\nkubectl create ns loki\r\nhelm repo <span class=\"token function\">add</span> grafana https://grafana.github.io/helm-charts\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/loki-values.yaml</span>\r\npersistence:\r\n  enabled: true\r\n  size: 20Gi\r\n\r\nserviceMonitor:\r\n  enabled: true\r\nEOT</span>\r\n\r\nhelm <span class=\"token function\">install</span> loki grafana/loki --version <span class=\"token number\">2.16</span>.0 -f loki-values.yaml --namespace loki</code></pre></div>\n<p>ì„¤ì¹˜ë¥¼ ì™„ë£Œ í•˜ì˜€ë‹¤ë©´ Curl ì„ ìˆ˜í–‰í•´ì¤„ Testìš© Podë¥¼ ìƒì„±í•´ì£¼ì–´ ë¡œí‚¤ Gateway ì ‘ì†í™•ì¸ì„ í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\r\nkubectl apply -f ~/pkos/2/netshoot-2pods.yaml</p>\n<p>kubectl exec -it pod-1 â€” curl -s <a href=\"http://loki.loki.svc:3100/api/prom/label\">http://loki.loki.svc:3100/api/prom/label</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.777777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZUlEQVQI14WMuw7EIBAD0wJCFIDgdnmtSJTu/v/vHGWLa68Y2dJYPvr9xb5uiCzsfWKMgVoriAhrLfTetZdSMOdUF2MEMyOlBBH5bVtrOMqHQMwIISjee+U9yDnDGAPn3F+stZoPO7Qx2WfUhGsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_14.png\"\n        title=\"img_14.png\"\n        src=\"/static/3e91e1bb3d600c90206223d9684bb41d/37523/img_14.png\"\n        srcset=\"/static/3e91e1bb3d600c90206223d9684bb41d/e9ff0/img_14.png 180w,\n/static/3e91e1bb3d600c90206223d9684bb41d/f21e7/img_14.png 360w,\n/static/3e91e1bb3d600c90206223d9684bb41d/37523/img_14.png 720w,\n/static/3e91e1bb3d600c90206223d9684bb41d/2a50c/img_14.png 925w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìœ„ì˜ í™”ë©´ê³¼ ê°™ì´ ë‚˜ì˜¤ë©´ ì •ìƒì ìœ¼ë¡œ ì ‘ì†ì´ ì™„ë£Œëœê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì´ì œ Promtailì„ ì„¤ì¹˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#Promtail ì„¤ì¹˜</span>\r\n\r\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOT<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/promtail-values.yaml</span>\r\nserviceMonitor:\r\n  enabled: true\r\nconfig:\r\n  serverPort: 3101\r\n  clients:\r\n    - url: http://loki-headless:3100/loki/api/v1/push\r\n#defaultVolumes:\r\n#  - name: pods\r\n#    hostPath:\r\n#      path: /var/log/pods\r\nEOT</span>\r\n</code></pre></div>\n<p>ë‹¤ìŒ Gragana ì— ì ‘ì†í•˜ì—¬\r\nConfiguration -> Data source -> Add data source ë¡œ ë“¤ì–´ê°€ì„œ Loki ë¥¼ ì¶”ê°€í•´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\r\nì´ë–„ URLì€ <a href=\"http://loki-headless.loki:3100\">http://loki-headless.loki:3100</a> í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 131.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1UlEQVRIx5VUSXLTQBT1noJMtoaeJVmjJdvxkJCkEsIixQKKBRsWcA0WXIFDcD5u8ajfkoIcywOL599yd78/vf6DyChEwoWRAibMYUwCIUM4rsCbkyFOTkfW9oH2WpyeOTg5dTDgOoYSDFprRHEFEyTgIrCEdOjs3D0K9VkHAxUkGA49pEZBeAyvXp/XXs9G9uD5hfdfGEgdIMjv8PDtN2arJ6R5ibSYIytmSIsZdJhBBSl0uAn6T3XWJsrhMY0BFxxm+gnvf/7B/P4bllfvsLh+wurmAxZXjyiqJYpyiaJaNVg+Iy//2TibwecGA48r+DpDevsFUTUHNzGYSsB0AqbGYDIAV6G1HjfWMhk2tosQji8xoB9fKKRljDBP4HKJocMwcnkDYb99YWCizKblMgmXqS04nsDAJUJOhwt4zNg/RwS3QfNNUZgotcR02eN6C5aQIqRww7iwh7mKIHQEZWKQAsiSw5a4JeuStusNwvnyBtnkEmE8sTBBiiDMrB05HBdDBp91iDrrDUJKmYpNUrERNWAiAKdCe3UNidTx5DPB3gjpogpim1L3wstLfen2EvoiwGJ9hzitaiGbGEGUY3l1j7xcQEcZwnFha3lUDYlwdf2Acrq2itdBCqljBOMc0ozrRqlo4/JOwraG2WRuo6GGSOqsMM9dfVmCgylTA2rCS6s1x5e9OjsyQgWfa0wvr7FY39pnRi+BnmRfNPucbEVIaVL6LXaluJewq0OLfAoVlQjzNRyPb106TNgUm54eaVHosY2YNqkch0h2ymYypZlW2SFAeqNN2qsdyr3d7iE0GKcloqSwg0HqsZUOQdh1jXZNTg9EaDBfvrXzzjZGh/ClARMKXBrrhLrf4uUI661h65kOZ14IIxL40QK+zjupH5kyDYdyukReLVBVK/yQj/g4+Yz111+Y3H2H47FGSkc0pR7dmxEMucSIGuExuL7oHVm7ZPMXbBG9O0C96zAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_15.png\"\n        title=\"img_15.png\"\n        src=\"/static/b9e377bc6fbc63dfd63d385af3206d1a/37523/img_15.png\"\n        srcset=\"/static/b9e377bc6fbc63dfd63d385af3206d1a/e9ff0/img_15.png 180w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/f21e7/img_15.png 360w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/37523/img_15.png 720w,\n/static/b9e377bc6fbc63dfd63d385af3206d1a/302a4/img_15.png 1080w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ê·¸ ë‹¤ìŒ Lokiì—ì„œì˜ Log í™•ì¸ì„ ìœ„í•´\r\nwhile true; do curl -s <a href=\"http://nginx.$KOPS_CLUSTER_NAME\">http://nginx.$KOPS_CLUSTER_NAME</a> -I | head -n 1; date; sleep 1; done\r\nëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Nginxì— ë°˜ë³µ ì ‘ì†ì„ ê±¸ì–´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë‹¤ìŒ Grafanaì—ì„œ Exploer -> Loki ë¡œ ì ‘ì†í•œ ë’¤ ìƒë‹¨ì— Prometheusê°€ ì•„ë‹Œ Lokië¡œ ì„ íƒ í›„ Label filterëŠ” nginxë¡œ ì„ íƒí•˜ì‹œê³ \r\nìƒë‹¨ì— íŒŒë€ìƒ‰ Run queryë¥¼ í´ë¦­í•´ì£¼ì‹œë©´ ì•„ë˜ í™”ë©´ê³¼ ê°™ì´ Log í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 124.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAADeUlEQVQ4y41UWW7jRhTkHWJL4s7m0s1NlEiJWmzPIDlAgJwoxwnyFyCWZdkJMkh8gdyognoUFc9kAuij0Hv1e/UW6+3tDZ8+/Ynj6RW/Ph7weDji8ek4jGccnp5xOJ7wfHrF0/OL4PTyG56eTzieXvD7X3/j8PoHfv7lJ1gmDhFGGVRSwrZ9OG6Em4mLb25swc2tI6PtRgiVRqA0VFIgjA0cT8ELYvTf/4h09QNc14flBgkcP0Zer9C0W8RZhSjJ5YFKCwTKwAtTAe9+Ce6nmUFVL+Uzy48yzNwQXX+HulkjyaozkUZqaoSxhh8mCKJM9gaYd3ONMCmgi8VAaHSJqRMKkR+mYl1eLLHs9tjsv4Uu19DVBlm5Rqxr8eBrUGkpXllpajCxfcRpgVTXuJk4cri7+w5d/wBd72Caj9D1/vLwa+BZqAysmRvhduaJ0ATN9sLsjBSByhDFGlFi/pdsBKWwaJ0XJlhtHtAsN1h0W6w29yjqVub1Yi1Buwa2pwZCpoQuGkSxkQBw5CeSJlGK26l3NaypE2BqB1BpDi9IxH1+Mo4Es+BaCCEtFGLOvUgOVGpknF5JxHeOr2DROmY8F9wkSLzqd0h0CTeIL5fHh1+C+44fyV3RkBM+ZlT9aKgKrjNJbCOR5v6IoXKSz9a8Q08vGs4c6uaKZtyjhjcTe9ByNmTCuD/K8x4zJ5TxTOgjyhaIdQOVDLUbqgwqX0FJbZtLfdNqWkWvvHfWCukYlJkToGi2KOY9+u0DynmH1FRIig6hEGnRkG7FWXluFLEQjc1lDJ5oyB8zU0nqsDHQEjYNtqZBo0TWnNu+uhCSjCQ851v2ggshK4PdJdGVgN2F1mT5XOqcic99fkj3WaLRucU5XiR75LGGOs7R9feompVg0e3EZZbdqr+Xtial2W5QVu358wp5uURZd5I6/JyVZU1mnmg0X/YwRQNTLuQSreKcZLRuvuiFSOdzsVpJd6pkTdftqMLMS84WpgX63Qd5ROJ2tZdocr7efMB8ucFm9xHLbotq3glIWlStzIUwMLBJOFpI92gJQUsoMuejhRzzaikfETynpiRmBkydIX//o2FNDdutaMR1t76TkVqKhnV7CeAgTysRZ9dncgshI9Su95J/vExX+TvXdJ+acqQXebkQ8JyW02pXLBzy+d+gLHq5MAZFXRuUovmM8B+60OTHZe19iwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_16.png\"\n        title=\"img_16.png\"\n        src=\"/static/3c02b51a0738291e82d64d86296553c2/37523/img_16.png\"\n        srcset=\"/static/3c02b51a0738291e82d64d86296553c2/e9ff0/img_16.png 180w,\n/static/3c02b51a0738291e82d64d86296553c2/f21e7/img_16.png 360w,\n/static/3c02b51a0738291e82d64d86296553c2/37523/img_16.png 720w,\n/static/3c02b51a0738291e82d64d86296553c2/e24fe/img_16.png 1073w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##6. ê³¼ì œ 1 êµì œ 367 ~ 372 í˜ì´ì§€ ì‚¬ìš©ì ì •ì˜ Prometheusrules ì •ì±… ì„¤ì • : íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©ë¥  ì´ˆê³¼ 80% ì‹œ ê²½ê³ </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY032QW2+EIBCFfRaMK4ig4AVtvOC660v3//+z0zDbbZNu0ocvhxngMIfEbA/M+4llmdF1HWzTwFkHrTU452ApA2ccWZYRnGdI0/SNeDaSNOGBMXxiWwNue8Dce9yOO479wHk/EZaAdd6wX3d47+GHEUbX9OALpRSZMsaQqG5GpQ1N56xFEydsHdq2Rdf3qJsGspQoioIQQpBKKX+IvTzPKUHyMU3wfsA4jmQ6TROtnXPotYFVFU1RliWMMYQoCqqr6rkXlfpCIOm7loq6rglrLSn1YiSlKNLLUEiJ4nJBxtjbP1JkPazkHC88P53/8l1nf/Q/vgCSyZa880hxTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_19.png\"\n        title=\"img_19.png\"\n        src=\"/static/07d243d0cd6095d9213231e738195ce1/37523/img_19.png\"\n        srcset=\"/static/07d243d0cd6095d9213231e738195ce1/e9ff0/img_19.png 180w,\n/static/07d243d0cd6095d9213231e738195ce1/f21e7/img_19.png 360w,\n/static/07d243d0cd6095d9213231e738195ce1/37523/img_19.png 720w,\n/static/07d243d0cd6095d9213231e738195ce1/302a4/img_19.png 1080w,\n/static/07d243d0cd6095d9213231e738195ce1/62a6a/img_19.png 1122w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoElEQVQoz53M3W7aQBCGYd//QcVvIKHtBfSgUi8hJ62gVdUQbMANhLT8BnvZXe/aEGO/VQxpEnFQqSM9mvlGo3Ea797zplqhVCpTqtQp1xrUGheF6tk51bOLY24V6s0W9fO31Jqtv3eVepNyvcmHj59w2v0rvny/pPv5Er/n4d/c4Ps+rtfnuufiuh6D4ZDB4LXh0Gc0Gh+Mb/nZHzLxRzhZIMlDDWYL2pDLqMAT9bx7CWnAJAfxDsKQLAxw1P2QYN5DLDzUvU+8mRDLo+OcyLtX+eCOXTQlNVNSu2QruiTSx/k9m7JYC1ahQMgNUkukkiitkFqxUYdc0AodHajiblP0YtYaY2Oc9XJOuJojgxVivUSJNboQoDcBVgmMkkRKktiIxJqi23iLjXcYY4kig7WWJI5xOiNFZ2xojyPao6iYO7em6F9vDd8mFncWM5jHeDOLNzN48y3TXx6rqUsgFFprhBAkSYJzvcz5sYCrR8uDl7m7BBFDtAO9e+4P2w1pIki2D+z3e7IsI01THIrK/8NpPT52sjznX/ITnOyeHv4BG7Lj9Apa11UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_20.png\"\n        title=\"img_20.png\"\n        src=\"/static/1ff2b5936232d5b90f9680b101590efb/37523/img_20.png\"\n        srcset=\"/static/1ff2b5936232d5b90f9680b101590efb/e9ff0/img_20.png 180w,\n/static/1ff2b5936232d5b90f9680b101590efb/f21e7/img_20.png 360w,\n/static/1ff2b5936232d5b90f9680b101590efb/37523/img_20.png 720w,\n/static/1ff2b5936232d5b90f9680b101590efb/302a4/img_20.png 1080w,\n/static/1ff2b5936232d5b90f9680b101590efb/07a9c/img_20.png 1440w,\n/static/1ff2b5936232d5b90f9680b101590efb/cb9f4/img_20.png 1903w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##7. ê³¼ì œ 2 êµì œ 386 ~ 389 í˜ì´ì§€ - LogQL</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQoz5WSy27TUBRF/QGIpqHE+P1+xq+kBKcgAoGoqBJ50Lgp0AljhBADPoEJX73QvSFInYXB0tnX3sc+Z+squ5tbtt1HNpuO98sPLFfXLNf3Wa23e726Zr3p6Haf2d3e0d18Ytvt+PLtF3dff/P9x0+U0zMNxx8y0Gx6/QEnp3se/ge9RzoPTlRevlqgBGHGsG7JyzFpXpFkFZYTYtrB0Qj/mWowf3OJYlg+fpRhuSG2G2G5EapuH8VAsySa4dDriwnfoqiaTZyV6Jb3z/jEcI7CdHzZJxDRzeYLFPEijHNsL0I3XTTTQZP1PqLpUA/a8WMM25e6/1hn9nqBIiYynAjd8tGsANONZYNhB9IsfrivrlzvsKr6d13hdYNUZignNEyXIKmIkpwkKwnTmigtiJICL8xw/UTiB5HMWGxiezGOF0vthamMTOjF5RWK5wTSUDcNLy5ayqalOZ9SNc+ox1PGT5+TF2Omk5o0b8iGI3kj9reiIc7E8xrLS5gvrlBCTwQbkBcVk0lLNWrlh8pmQj1qGZ1fyIaiGBImBVFaEguySp4F4qxZIbP5O/4As9oja3HPWT8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_17.png\"\n        title=\"img_17.png\"\n        src=\"/static/65e4a9cca737f2c6de4ce3d906f7ddeb/37523/img_17.png\"\n        srcset=\"/static/65e4a9cca737f2c6de4ce3d906f7ddeb/e9ff0/img_17.png 180w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/f21e7/img_17.png 360w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/37523/img_17.png 720w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/302a4/img_17.png 1080w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/07a9c/img_17.png 1440w,\n/static/65e4a9cca737f2c6de4ce3d906f7ddeb/91bda/img_17.png 1867w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz42RWU7DMBCGfQNoK5rGjePEdhJnISxCHIKyNG1BIB5445ULcAhu/KOZNGURIB4+/TOexX8csdncolvd4fpmhYvFEovLJRZXHXPJutxqx7Wr6xVWm3usbx9Yl90aj8+veHp5Q7d+gBhNZtC2RqgMKB6NA+yPA+yNfmH8A5MQk0AjjAyEsQWq9hxVewpftfBlC6Ud5rFBFFvM/4XBXPWIMEqQ2IKXqKQnkDGCMO71L0L1JT8IIoiZ1KjbE0iVYir7htlcYxYlPRT/As2QoQEyIWSUIvcN25afigTlNPQd7lUpIm1Zh+XTUEGQbRm7bZOBSord+9EALR4W/PTZVNMmR6Rd75AGbNHC5jVj8gap8zBZCZNV/L6J9TxEMV3CP2FLnGZIXcmz9P4iNhlcUaNsTtG0Z8h8g7xsmWLQ6gi+Poavjnb50MP4Q9jiEFI5iNRZaFNwU1kfsxu6kSCXg5Jb48qPOmsf07m2JaYywTveHhz0AXP8WgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_18.png\"\n        title=\"img_18.png\"\n        src=\"/static/06560e1cd277a80719c9d300cb54bc3d/37523/img_18.png\"\n        srcset=\"/static/06560e1cd277a80719c9d300cb54bc3d/e9ff0/img_18.png 180w,\n/static/06560e1cd277a80719c9d300cb54bc3d/f21e7/img_18.png 360w,\n/static/06560e1cd277a80719c9d300cb54bc3d/37523/img_18.png 720w,\n/static/06560e1cd277a80719c9d300cb54bc3d/302a4/img_18.png 1080w,\n/static/06560e1cd277a80719c9d300cb54bc3d/07a9c/img_18.png 1440w,\n/static/06560e1cd277a80719c9d300cb54bc3d/bfd4b/img_18.png 1871w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>##8. ê³¼ì œ 3 ìŠ¤í„°ë””ì—ì„œ ë°°ìš°ì§€ ì•Šì€ Alert Rule ìƒì„± ë° ì ìš©</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVQoz63QS0vDQBSG4fnTgouCt0RbUnEjrvxH7txIEcTQJE46Y5vLpGkxyStOkrZqXSie4WHOdzjMYsShe8Tx4IDTgcPIu8K9GOMOx5w4I87OPZudPfq9Nnu4w0uub24RaqkxhaJcFlSbU1NWa1bVmjeqH33s9dUAcqURD8GEycsTz6/Blp7izwP8L7O+9zthKpFGWVEecxffIx5nIdOFJM41MlPf5Z2dHHezmdEbsdEEmUSEUqHmKYskwxhj5d3d9/tyK/+kMAUiiiK0VqRJQpq2j5Zl+WfCfmjTWHVd23t39luCf6534uBQjfS5jGYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_21.png\"\n        title=\"img_21.png\"\n        src=\"/static/78943f94dedc9196277e5a2fa15f000b/37523/img_21.png\"\n        srcset=\"/static/78943f94dedc9196277e5a2fa15f000b/e9ff0/img_21.png 180w,\n/static/78943f94dedc9196277e5a2fa15f000b/f21e7/img_21.png 360w,\n/static/78943f94dedc9196277e5a2fa15f000b/37523/img_21.png 720w,\n/static/78943f94dedc9196277e5a2fa15f000b/302a4/img_21.png 1080w,\n/static/78943f94dedc9196277e5a2fa15f000b/07a9c/img_21.png 1440w,\n/static/78943f94dedc9196277e5a2fa15f000b/91bda/img_21.png 1867w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQY03WNy27DMAwEfWwtkpKbOhCdxA+grYQE7rX//2UT2MglaHsYYJcAZ5taCrVWSims64q77/THI70aEgSR34QQ/rw3OQ+oKiklohkpxh0zI26PbfvMJvpHtgvflm8ul4lpntEUkRjRTdglWjVsG+rS3mNKiBqtCG0IvD7Y8ssjN339wefCkp1rdm5+4ssH1vNIie9cfeJjGLn5wJSdz9hzVuMgHaMYgygHERYxTqLcAbpOYRch382JAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_22.png\"\n        title=\"img_22.png\"\n        src=\"/static/92ab53f2fd20971e48e0a1323915696b/37523/img_22.png\"\n        srcset=\"/static/92ab53f2fd20971e48e0a1323915696b/e9ff0/img_22.png 180w,\n/static/92ab53f2fd20971e48e0a1323915696b/f21e7/img_22.png 360w,\n/static/92ab53f2fd20971e48e0a1323915696b/37523/img_22.png 720w,\n/static/92ab53f2fd20971e48e0a1323915696b/914c7/img_22.png 978w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-alert-manager\">1. Alert Manager??</a></li>\n<li><a href=\"#2-%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD-%EB%B0%B0%ED%8F%AC-%EC%A4%91-%EC%9D%B4%EC%8A%88-%EB%B0%9C%EC%83%9D\">2. ì‹¤ìŠµí™˜ê²½ ë°°í¬ ì¤‘ ì´ìŠˆ ë°œìƒ</a></li>\n<li><a href=\"#3-prometheus-grafana-alert-manager-%EB%B0%B0%ED%8F%AC\">3. Prometheus, Grafana, Alert Manager ë°°í¬</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 25, 2023","title":"Gasida Kubernetes Study 6ì£¼ì°¨","categories":"Kubernetes","author":"KORWOO","emoji":"ğŸ”®"},"fields":{"slug":"/Kubernetes/Gasida_Study_homework_6/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/Kubernetes/Gasida_Study_homework_7/","nextSlug":"/Kubernetes/Gasida_Study_homework_6/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}